
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python package for simulating & decoding 2D color code circuits via the concatenated MWPM decoder">
      
      
        <meta name="author" content="Seok-Hyung Lee">
      
      
        <link rel="canonical" href="https://github.com/seokhyung-lee/color-code-stim/api/color_code/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../noise_model/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>ColorCode - color-code-stim</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#colorcode" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="color-code-stim" class="md-header__button md-logo" aria-label="color-code-stim" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            color-code-stim
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ColorCode
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/seokhyung-lee/color-code-stim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    seokhyung-lee/color-code-stim
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="color-code-stim" class="md-nav__button md-logo" aria-label="color-code-stim" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    color-code-stim
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/seokhyung-lee/color-code-stim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    seokhyung-lee/color-code-stim
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    ColorCode
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    ColorCode
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode" class="md-nav__link">
    <span class="md-ellipsis">
      ColorCode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.H" class="md-nav__link">
    <span class="md-ellipsis">
      H
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.belief_concat_matching_decoder" class="md-nav__link">
    <span class="md-ellipsis">
      belief_concat_matching_decoder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.bp_decoder" class="md-nav__link">
    <span class="md-ellipsis">
      bp_decoder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.concat_matching_decoder" class="md-nav__link">
    <span class="md-ellipsis">
      concat_matching_decoder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.cult_detector_ids" class="md-nav__link">
    <span class="md-ellipsis">
      cult_detector_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.dem_manager" class="md-nav__link">
    <span class="md-ellipsis">
      dem_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.dem_xz" class="md-nav__link">
    <span class="md-ellipsis">
      dem_xz
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.dems_decomposed" class="md-nav__link">
    <span class="md-ellipsis">
      dems_decomposed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.detector_ids_by_color" class="md-nav__link">
    <span class="md-ellipsis">
      detector_ids_by_color
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.detectors_checks_map" class="md-nav__link">
    <span class="md-ellipsis">
      detectors_checks_map
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.interface_detector_ids" class="md-nav__link">
    <span class="md-ellipsis">
      interface_detector_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.obs_matrix" class="md-nav__link">
    <span class="md-ellipsis">
      obs_matrix
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.probs_xz" class="md-nav__link">
    <span class="md-ellipsis">
      probs_xz
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.simulator" class="md-nav__link">
    <span class="md-ellipsis">
      simulator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.decode" class="md-nav__link">
    <span class="md-ellipsis">
      decode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.decode_bp" class="md-nav__link">
    <span class="md-ellipsis">
      decode_bp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.draw_lattice" class="md-nav__link">
    <span class="md-ellipsis">
      draw_lattice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.draw_tanner_graph" class="md-nav__link">
    <span class="md-ellipsis">
      draw_tanner_graph
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.errors_to_qubits" class="md-nav__link">
    <span class="md-ellipsis">
      errors_to_qubits
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_decomposed_dems" class="md-nav__link">
    <span class="md-ellipsis">
      get_decomposed_dems
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_detector" class="md-nav__link">
    <span class="md-ellipsis">
      get_detector
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_detector_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_detector_type
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_observable_pauli" class="md-nav__link">
    <span class="md-ellipsis">
      get_observable_pauli
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.sample" class="md-nav__link">
    <span class="md-ellipsis">
      sample
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.sample_with_errors" class="md-nav__link">
    <span class="md-ellipsis">
      sample_with_errors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.simulate" class="md-nav__link">
    <span class="md-ellipsis">
      simulate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../noise_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NoiseModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../circuit_builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CircuitBuilder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph_builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TannerGraphBuilder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Decoders
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Decoders
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoders/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BaseDecoder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoders/concat_matching_decoder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ConcatMatchingDecoder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoders/bp_decoder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BPDecoder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoders/belief_concat_matching_decoder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BeliefConcatMatchingDecoder
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Utilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dem_utils/dem_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DemManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dem_utils/dem_decomp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DemDecomp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simulation/simulator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stim_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stim Utilities
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode" class="md-nav__link">
    <span class="md-ellipsis">
      ColorCode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.H" class="md-nav__link">
    <span class="md-ellipsis">
      H
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.belief_concat_matching_decoder" class="md-nav__link">
    <span class="md-ellipsis">
      belief_concat_matching_decoder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.bp_decoder" class="md-nav__link">
    <span class="md-ellipsis">
      bp_decoder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.concat_matching_decoder" class="md-nav__link">
    <span class="md-ellipsis">
      concat_matching_decoder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.cult_detector_ids" class="md-nav__link">
    <span class="md-ellipsis">
      cult_detector_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.dem_manager" class="md-nav__link">
    <span class="md-ellipsis">
      dem_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.dem_xz" class="md-nav__link">
    <span class="md-ellipsis">
      dem_xz
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.dems_decomposed" class="md-nav__link">
    <span class="md-ellipsis">
      dems_decomposed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.detector_ids_by_color" class="md-nav__link">
    <span class="md-ellipsis">
      detector_ids_by_color
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.detectors_checks_map" class="md-nav__link">
    <span class="md-ellipsis">
      detectors_checks_map
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.interface_detector_ids" class="md-nav__link">
    <span class="md-ellipsis">
      interface_detector_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.obs_matrix" class="md-nav__link">
    <span class="md-ellipsis">
      obs_matrix
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.probs_xz" class="md-nav__link">
    <span class="md-ellipsis">
      probs_xz
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.simulator" class="md-nav__link">
    <span class="md-ellipsis">
      simulator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.decode" class="md-nav__link">
    <span class="md-ellipsis">
      decode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.decode_bp" class="md-nav__link">
    <span class="md-ellipsis">
      decode_bp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.draw_lattice" class="md-nav__link">
    <span class="md-ellipsis">
      draw_lattice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.draw_tanner_graph" class="md-nav__link">
    <span class="md-ellipsis">
      draw_tanner_graph
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.errors_to_qubits" class="md-nav__link">
    <span class="md-ellipsis">
      errors_to_qubits
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_decomposed_dems" class="md-nav__link">
    <span class="md-ellipsis">
      get_decomposed_dems
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_detector" class="md-nav__link">
    <span class="md-ellipsis">
      get_detector
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_detector_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_detector_type
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.get_observable_pauli" class="md-nav__link">
    <span class="md-ellipsis">
      get_observable_pauli
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.sample" class="md-nav__link">
    <span class="md-ellipsis">
      sample
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.sample_with_errors" class="md-nav__link">
    <span class="md-ellipsis">
      sample_with_errors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#color_code_stim.ColorCode.simulate" class="md-nav__link">
    <span class="md-ellipsis">
      simulate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="colorcode">ColorCode</h1>


<div class="doc doc-object doc-class">



<a id="color_code_stim.ColorCode"></a>
    <div class="doc doc-contents first">


        <p>Class for constructing a color code circuit and simulating the concatenated MWPM decoder.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Triangular patch with uniform circuit-level noise of 1e-3:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">color_code_stim</span><span class="w"> </span><span class="kn">import</span> <span class="n">ColorCode</span><span class="p">,</span> <span class="n">NoiseModel</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="n">NoiseModel</span><span class="o">.</span><span class="n">uniform_circuit_noise</span><span class="p">(</span><span class="mf">1e-3</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">colorcode</span> <span class="o">=</span> <span class="n">ColorCode</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">rounds</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">circuit_type</span><span class="o">=</span><span class="s2">&quot;tri&quot;</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">num_fails</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">colorcode</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">full_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
    <p>See <code>getting_started.ipynb</code> for more detailed usage.</p>







              <details class="quote">
                <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-35">  35</a></span>
<span class="normal"><a href="#__codelineno-0-36">  36</a></span>
<span class="normal"><a href="#__codelineno-0-37">  37</a></span>
<span class="normal"><a href="#__codelineno-0-38">  38</a></span>
<span class="normal"><a href="#__codelineno-0-39">  39</a></span>
<span class="normal"><a href="#__codelineno-0-40">  40</a></span>
<span class="normal"><a href="#__codelineno-0-41">  41</a></span>
<span class="normal"><a href="#__codelineno-0-42">  42</a></span>
<span class="normal"><a href="#__codelineno-0-43">  43</a></span>
<span class="normal"><a href="#__codelineno-0-44">  44</a></span>
<span class="normal"><a href="#__codelineno-0-45">  45</a></span>
<span class="normal"><a href="#__codelineno-0-46">  46</a></span>
<span class="normal"><a href="#__codelineno-0-47">  47</a></span>
<span class="normal"><a href="#__codelineno-0-48">  48</a></span>
<span class="normal"><a href="#__codelineno-0-49">  49</a></span>
<span class="normal"><a href="#__codelineno-0-50">  50</a></span>
<span class="normal"><a href="#__codelineno-0-51">  51</a></span>
<span class="normal"><a href="#__codelineno-0-52">  52</a></span>
<span class="normal"><a href="#__codelineno-0-53">  53</a></span>
<span class="normal"><a href="#__codelineno-0-54">  54</a></span>
<span class="normal"><a href="#__codelineno-0-55">  55</a></span>
<span class="normal"><a href="#__codelineno-0-56">  56</a></span>
<span class="normal"><a href="#__codelineno-0-57">  57</a></span>
<span class="normal"><a href="#__codelineno-0-58">  58</a></span>
<span class="normal"><a href="#__codelineno-0-59">  59</a></span>
<span class="normal"><a href="#__codelineno-0-60">  60</a></span>
<span class="normal"><a href="#__codelineno-0-61">  61</a></span>
<span class="normal"><a href="#__codelineno-0-62">  62</a></span>
<span class="normal"><a href="#__codelineno-0-63">  63</a></span>
<span class="normal"><a href="#__codelineno-0-64">  64</a></span>
<span class="normal"><a href="#__codelineno-0-65">  65</a></span>
<span class="normal"><a href="#__codelineno-0-66">  66</a></span>
<span class="normal"><a href="#__codelineno-0-67">  67</a></span>
<span class="normal"><a href="#__codelineno-0-68">  68</a></span>
<span class="normal"><a href="#__codelineno-0-69">  69</a></span>
<span class="normal"><a href="#__codelineno-0-70">  70</a></span>
<span class="normal"><a href="#__codelineno-0-71">  71</a></span>
<span class="normal"><a href="#__codelineno-0-72">  72</a></span>
<span class="normal"><a href="#__codelineno-0-73">  73</a></span>
<span class="normal"><a href="#__codelineno-0-74">  74</a></span>
<span class="normal"><a href="#__codelineno-0-75">  75</a></span>
<span class="normal"><a href="#__codelineno-0-76">  76</a></span>
<span class="normal"><a href="#__codelineno-0-77">  77</a></span>
<span class="normal"><a href="#__codelineno-0-78">  78</a></span>
<span class="normal"><a href="#__codelineno-0-79">  79</a></span>
<span class="normal"><a href="#__codelineno-0-80">  80</a></span>
<span class="normal"><a href="#__codelineno-0-81">  81</a></span>
<span class="normal"><a href="#__codelineno-0-82">  82</a></span>
<span class="normal"><a href="#__codelineno-0-83">  83</a></span>
<span class="normal"><a href="#__codelineno-0-84">  84</a></span>
<span class="normal"><a href="#__codelineno-0-85">  85</a></span>
<span class="normal"><a href="#__codelineno-0-86">  86</a></span>
<span class="normal"><a href="#__codelineno-0-87">  87</a></span>
<span class="normal"><a href="#__codelineno-0-88">  88</a></span>
<span class="normal"><a href="#__codelineno-0-89">  89</a></span>
<span class="normal"><a href="#__codelineno-0-90">  90</a></span>
<span class="normal"><a href="#__codelineno-0-91">  91</a></span>
<span class="normal"><a href="#__codelineno-0-92">  92</a></span>
<span class="normal"><a href="#__codelineno-0-93">  93</a></span>
<span class="normal"><a href="#__codelineno-0-94">  94</a></span>
<span class="normal"><a href="#__codelineno-0-95">  95</a></span>
<span class="normal"><a href="#__codelineno-0-96">  96</a></span>
<span class="normal"><a href="#__codelineno-0-97">  97</a></span>
<span class="normal"><a href="#__codelineno-0-98">  98</a></span>
<span class="normal"><a href="#__codelineno-0-99">  99</a></span>
<span class="normal"><a href="#__codelineno-0-100"> 100</a></span>
<span class="normal"><a href="#__codelineno-0-101"> 101</a></span>
<span class="normal"><a href="#__codelineno-0-102"> 102</a></span>
<span class="normal"><a href="#__codelineno-0-103"> 103</a></span>
<span class="normal"><a href="#__codelineno-0-104"> 104</a></span>
<span class="normal"><a href="#__codelineno-0-105"> 105</a></span>
<span class="normal"><a href="#__codelineno-0-106"> 106</a></span>
<span class="normal"><a href="#__codelineno-0-107"> 107</a></span>
<span class="normal"><a href="#__codelineno-0-108"> 108</a></span>
<span class="normal"><a href="#__codelineno-0-109"> 109</a></span>
<span class="normal"><a href="#__codelineno-0-110"> 110</a></span>
<span class="normal"><a href="#__codelineno-0-111"> 111</a></span>
<span class="normal"><a href="#__codelineno-0-112"> 112</a></span>
<span class="normal"><a href="#__codelineno-0-113"> 113</a></span>
<span class="normal"><a href="#__codelineno-0-114"> 114</a></span>
<span class="normal"><a href="#__codelineno-0-115"> 115</a></span>
<span class="normal"><a href="#__codelineno-0-116"> 116</a></span>
<span class="normal"><a href="#__codelineno-0-117"> 117</a></span>
<span class="normal"><a href="#__codelineno-0-118"> 118</a></span>
<span class="normal"><a href="#__codelineno-0-119"> 119</a></span>
<span class="normal"><a href="#__codelineno-0-120"> 120</a></span>
<span class="normal"><a href="#__codelineno-0-121"> 121</a></span>
<span class="normal"><a href="#__codelineno-0-122"> 122</a></span>
<span class="normal"><a href="#__codelineno-0-123"> 123</a></span>
<span class="normal"><a href="#__codelineno-0-124"> 124</a></span>
<span class="normal"><a href="#__codelineno-0-125"> 125</a></span>
<span class="normal"><a href="#__codelineno-0-126"> 126</a></span>
<span class="normal"><a href="#__codelineno-0-127"> 127</a></span>
<span class="normal"><a href="#__codelineno-0-128"> 128</a></span>
<span class="normal"><a href="#__codelineno-0-129"> 129</a></span>
<span class="normal"><a href="#__codelineno-0-130"> 130</a></span>
<span class="normal"><a href="#__codelineno-0-131"> 131</a></span>
<span class="normal"><a href="#__codelineno-0-132"> 132</a></span>
<span class="normal"><a href="#__codelineno-0-133"> 133</a></span>
<span class="normal"><a href="#__codelineno-0-134"> 134</a></span>
<span class="normal"><a href="#__codelineno-0-135"> 135</a></span>
<span class="normal"><a href="#__codelineno-0-136"> 136</a></span>
<span class="normal"><a href="#__codelineno-0-137"> 137</a></span>
<span class="normal"><a href="#__codelineno-0-138"> 138</a></span>
<span class="normal"><a href="#__codelineno-0-139"> 139</a></span>
<span class="normal"><a href="#__codelineno-0-140"> 140</a></span>
<span class="normal"><a href="#__codelineno-0-141"> 141</a></span>
<span class="normal"><a href="#__codelineno-0-142"> 142</a></span>
<span class="normal"><a href="#__codelineno-0-143"> 143</a></span>
<span class="normal"><a href="#__codelineno-0-144"> 144</a></span>
<span class="normal"><a href="#__codelineno-0-145"> 145</a></span>
<span class="normal"><a href="#__codelineno-0-146"> 146</a></span>
<span class="normal"><a href="#__codelineno-0-147"> 147</a></span>
<span class="normal"><a href="#__codelineno-0-148"> 148</a></span>
<span class="normal"><a href="#__codelineno-0-149"> 149</a></span>
<span class="normal"><a href="#__codelineno-0-150"> 150</a></span>
<span class="normal"><a href="#__codelineno-0-151"> 151</a></span>
<span class="normal"><a href="#__codelineno-0-152"> 152</a></span>
<span class="normal"><a href="#__codelineno-0-153"> 153</a></span>
<span class="normal"><a href="#__codelineno-0-154"> 154</a></span>
<span class="normal"><a href="#__codelineno-0-155"> 155</a></span>
<span class="normal"><a href="#__codelineno-0-156"> 156</a></span>
<span class="normal"><a href="#__codelineno-0-157"> 157</a></span>
<span class="normal"><a href="#__codelineno-0-158"> 158</a></span>
<span class="normal"><a href="#__codelineno-0-159"> 159</a></span>
<span class="normal"><a href="#__codelineno-0-160"> 160</a></span>
<span class="normal"><a href="#__codelineno-0-161"> 161</a></span>
<span class="normal"><a href="#__codelineno-0-162"> 162</a></span>
<span class="normal"><a href="#__codelineno-0-163"> 163</a></span>
<span class="normal"><a href="#__codelineno-0-164"> 164</a></span>
<span class="normal"><a href="#__codelineno-0-165"> 165</a></span>
<span class="normal"><a href="#__codelineno-0-166"> 166</a></span>
<span class="normal"><a href="#__codelineno-0-167"> 167</a></span>
<span class="normal"><a href="#__codelineno-0-168"> 168</a></span>
<span class="normal"><a href="#__codelineno-0-169"> 169</a></span>
<span class="normal"><a href="#__codelineno-0-170"> 170</a></span>
<span class="normal"><a href="#__codelineno-0-171"> 171</a></span>
<span class="normal"><a href="#__codelineno-0-172"> 172</a></span>
<span class="normal"><a href="#__codelineno-0-173"> 173</a></span>
<span class="normal"><a href="#__codelineno-0-174"> 174</a></span>
<span class="normal"><a href="#__codelineno-0-175"> 175</a></span>
<span class="normal"><a href="#__codelineno-0-176"> 176</a></span>
<span class="normal"><a href="#__codelineno-0-177"> 177</a></span>
<span class="normal"><a href="#__codelineno-0-178"> 178</a></span>
<span class="normal"><a href="#__codelineno-0-179"> 179</a></span>
<span class="normal"><a href="#__codelineno-0-180"> 180</a></span>
<span class="normal"><a href="#__codelineno-0-181"> 181</a></span>
<span class="normal"><a href="#__codelineno-0-182"> 182</a></span>
<span class="normal"><a href="#__codelineno-0-183"> 183</a></span>
<span class="normal"><a href="#__codelineno-0-184"> 184</a></span>
<span class="normal"><a href="#__codelineno-0-185"> 185</a></span>
<span class="normal"><a href="#__codelineno-0-186"> 186</a></span>
<span class="normal"><a href="#__codelineno-0-187"> 187</a></span>
<span class="normal"><a href="#__codelineno-0-188"> 188</a></span>
<span class="normal"><a href="#__codelineno-0-189"> 189</a></span>
<span class="normal"><a href="#__codelineno-0-190"> 190</a></span>
<span class="normal"><a href="#__codelineno-0-191"> 191</a></span>
<span class="normal"><a href="#__codelineno-0-192"> 192</a></span>
<span class="normal"><a href="#__codelineno-0-193"> 193</a></span>
<span class="normal"><a href="#__codelineno-0-194"> 194</a></span>
<span class="normal"><a href="#__codelineno-0-195"> 195</a></span>
<span class="normal"><a href="#__codelineno-0-196"> 196</a></span>
<span class="normal"><a href="#__codelineno-0-197"> 197</a></span>
<span class="normal"><a href="#__codelineno-0-198"> 198</a></span>
<span class="normal"><a href="#__codelineno-0-199"> 199</a></span>
<span class="normal"><a href="#__codelineno-0-200"> 200</a></span>
<span class="normal"><a href="#__codelineno-0-201"> 201</a></span>
<span class="normal"><a href="#__codelineno-0-202"> 202</a></span>
<span class="normal"><a href="#__codelineno-0-203"> 203</a></span>
<span class="normal"><a href="#__codelineno-0-204"> 204</a></span>
<span class="normal"><a href="#__codelineno-0-205"> 205</a></span>
<span class="normal"><a href="#__codelineno-0-206"> 206</a></span>
<span class="normal"><a href="#__codelineno-0-207"> 207</a></span>
<span class="normal"><a href="#__codelineno-0-208"> 208</a></span>
<span class="normal"><a href="#__codelineno-0-209"> 209</a></span>
<span class="normal"><a href="#__codelineno-0-210"> 210</a></span>
<span class="normal"><a href="#__codelineno-0-211"> 211</a></span>
<span class="normal"><a href="#__codelineno-0-212"> 212</a></span>
<span class="normal"><a href="#__codelineno-0-213"> 213</a></span>
<span class="normal"><a href="#__codelineno-0-214"> 214</a></span>
<span class="normal"><a href="#__codelineno-0-215"> 215</a></span>
<span class="normal"><a href="#__codelineno-0-216"> 216</a></span>
<span class="normal"><a href="#__codelineno-0-217"> 217</a></span>
<span class="normal"><a href="#__codelineno-0-218"> 218</a></span>
<span class="normal"><a href="#__codelineno-0-219"> 219</a></span>
<span class="normal"><a href="#__codelineno-0-220"> 220</a></span>
<span class="normal"><a href="#__codelineno-0-221"> 221</a></span>
<span class="normal"><a href="#__codelineno-0-222"> 222</a></span>
<span class="normal"><a href="#__codelineno-0-223"> 223</a></span>
<span class="normal"><a href="#__codelineno-0-224"> 224</a></span>
<span class="normal"><a href="#__codelineno-0-225"> 225</a></span>
<span class="normal"><a href="#__codelineno-0-226"> 226</a></span>
<span class="normal"><a href="#__codelineno-0-227"> 227</a></span>
<span class="normal"><a href="#__codelineno-0-228"> 228</a></span>
<span class="normal"><a href="#__codelineno-0-229"> 229</a></span>
<span class="normal"><a href="#__codelineno-0-230"> 230</a></span>
<span class="normal"><a href="#__codelineno-0-231"> 231</a></span>
<span class="normal"><a href="#__codelineno-0-232"> 232</a></span>
<span class="normal"><a href="#__codelineno-0-233"> 233</a></span>
<span class="normal"><a href="#__codelineno-0-234"> 234</a></span>
<span class="normal"><a href="#__codelineno-0-235"> 235</a></span>
<span class="normal"><a href="#__codelineno-0-236"> 236</a></span>
<span class="normal"><a href="#__codelineno-0-237"> 237</a></span>
<span class="normal"><a href="#__codelineno-0-238"> 238</a></span>
<span class="normal"><a href="#__codelineno-0-239"> 239</a></span>
<span class="normal"><a href="#__codelineno-0-240"> 240</a></span>
<span class="normal"><a href="#__codelineno-0-241"> 241</a></span>
<span class="normal"><a href="#__codelineno-0-242"> 242</a></span>
<span class="normal"><a href="#__codelineno-0-243"> 243</a></span>
<span class="normal"><a href="#__codelineno-0-244"> 244</a></span>
<span class="normal"><a href="#__codelineno-0-245"> 245</a></span>
<span class="normal"><a href="#__codelineno-0-246"> 246</a></span>
<span class="normal"><a href="#__codelineno-0-247"> 247</a></span>
<span class="normal"><a href="#__codelineno-0-248"> 248</a></span>
<span class="normal"><a href="#__codelineno-0-249"> 249</a></span>
<span class="normal"><a href="#__codelineno-0-250"> 250</a></span>
<span class="normal"><a href="#__codelineno-0-251"> 251</a></span>
<span class="normal"><a href="#__codelineno-0-252"> 252</a></span>
<span class="normal"><a href="#__codelineno-0-253"> 253</a></span>
<span class="normal"><a href="#__codelineno-0-254"> 254</a></span>
<span class="normal"><a href="#__codelineno-0-255"> 255</a></span>
<span class="normal"><a href="#__codelineno-0-256"> 256</a></span>
<span class="normal"><a href="#__codelineno-0-257"> 257</a></span>
<span class="normal"><a href="#__codelineno-0-258"> 258</a></span>
<span class="normal"><a href="#__codelineno-0-259"> 259</a></span>
<span class="normal"><a href="#__codelineno-0-260"> 260</a></span>
<span class="normal"><a href="#__codelineno-0-261"> 261</a></span>
<span class="normal"><a href="#__codelineno-0-262"> 262</a></span>
<span class="normal"><a href="#__codelineno-0-263"> 263</a></span>
<span class="normal"><a href="#__codelineno-0-264"> 264</a></span>
<span class="normal"><a href="#__codelineno-0-265"> 265</a></span>
<span class="normal"><a href="#__codelineno-0-266"> 266</a></span>
<span class="normal"><a href="#__codelineno-0-267"> 267</a></span>
<span class="normal"><a href="#__codelineno-0-268"> 268</a></span>
<span class="normal"><a href="#__codelineno-0-269"> 269</a></span>
<span class="normal"><a href="#__codelineno-0-270"> 270</a></span>
<span class="normal"><a href="#__codelineno-0-271"> 271</a></span>
<span class="normal"><a href="#__codelineno-0-272"> 272</a></span>
<span class="normal"><a href="#__codelineno-0-273"> 273</a></span>
<span class="normal"><a href="#__codelineno-0-274"> 274</a></span>
<span class="normal"><a href="#__codelineno-0-275"> 275</a></span>
<span class="normal"><a href="#__codelineno-0-276"> 276</a></span>
<span class="normal"><a href="#__codelineno-0-277"> 277</a></span>
<span class="normal"><a href="#__codelineno-0-278"> 278</a></span>
<span class="normal"><a href="#__codelineno-0-279"> 279</a></span>
<span class="normal"><a href="#__codelineno-0-280"> 280</a></span>
<span class="normal"><a href="#__codelineno-0-281"> 281</a></span>
<span class="normal"><a href="#__codelineno-0-282"> 282</a></span>
<span class="normal"><a href="#__codelineno-0-283"> 283</a></span>
<span class="normal"><a href="#__codelineno-0-284"> 284</a></span>
<span class="normal"><a href="#__codelineno-0-285"> 285</a></span>
<span class="normal"><a href="#__codelineno-0-286"> 286</a></span>
<span class="normal"><a href="#__codelineno-0-287"> 287</a></span>
<span class="normal"><a href="#__codelineno-0-288"> 288</a></span>
<span class="normal"><a href="#__codelineno-0-289"> 289</a></span>
<span class="normal"><a href="#__codelineno-0-290"> 290</a></span>
<span class="normal"><a href="#__codelineno-0-291"> 291</a></span>
<span class="normal"><a href="#__codelineno-0-292"> 292</a></span>
<span class="normal"><a href="#__codelineno-0-293"> 293</a></span>
<span class="normal"><a href="#__codelineno-0-294"> 294</a></span>
<span class="normal"><a href="#__codelineno-0-295"> 295</a></span>
<span class="normal"><a href="#__codelineno-0-296"> 296</a></span>
<span class="normal"><a href="#__codelineno-0-297"> 297</a></span>
<span class="normal"><a href="#__codelineno-0-298"> 298</a></span>
<span class="normal"><a href="#__codelineno-0-299"> 299</a></span>
<span class="normal"><a href="#__codelineno-0-300"> 300</a></span>
<span class="normal"><a href="#__codelineno-0-301"> 301</a></span>
<span class="normal"><a href="#__codelineno-0-302"> 302</a></span>
<span class="normal"><a href="#__codelineno-0-303"> 303</a></span>
<span class="normal"><a href="#__codelineno-0-304"> 304</a></span>
<span class="normal"><a href="#__codelineno-0-305"> 305</a></span>
<span class="normal"><a href="#__codelineno-0-306"> 306</a></span>
<span class="normal"><a href="#__codelineno-0-307"> 307</a></span>
<span class="normal"><a href="#__codelineno-0-308"> 308</a></span>
<span class="normal"><a href="#__codelineno-0-309"> 309</a></span>
<span class="normal"><a href="#__codelineno-0-310"> 310</a></span>
<span class="normal"><a href="#__codelineno-0-311"> 311</a></span>
<span class="normal"><a href="#__codelineno-0-312"> 312</a></span>
<span class="normal"><a href="#__codelineno-0-313"> 313</a></span>
<span class="normal"><a href="#__codelineno-0-314"> 314</a></span>
<span class="normal"><a href="#__codelineno-0-315"> 315</a></span>
<span class="normal"><a href="#__codelineno-0-316"> 316</a></span>
<span class="normal"><a href="#__codelineno-0-317"> 317</a></span>
<span class="normal"><a href="#__codelineno-0-318"> 318</a></span>
<span class="normal"><a href="#__codelineno-0-319"> 319</a></span>
<span class="normal"><a href="#__codelineno-0-320"> 320</a></span>
<span class="normal"><a href="#__codelineno-0-321"> 321</a></span>
<span class="normal"><a href="#__codelineno-0-322"> 322</a></span>
<span class="normal"><a href="#__codelineno-0-323"> 323</a></span>
<span class="normal"><a href="#__codelineno-0-324"> 324</a></span>
<span class="normal"><a href="#__codelineno-0-325"> 325</a></span>
<span class="normal"><a href="#__codelineno-0-326"> 326</a></span>
<span class="normal"><a href="#__codelineno-0-327"> 327</a></span>
<span class="normal"><a href="#__codelineno-0-328"> 328</a></span>
<span class="normal"><a href="#__codelineno-0-329"> 329</a></span>
<span class="normal"><a href="#__codelineno-0-330"> 330</a></span>
<span class="normal"><a href="#__codelineno-0-331"> 331</a></span>
<span class="normal"><a href="#__codelineno-0-332"> 332</a></span>
<span class="normal"><a href="#__codelineno-0-333"> 333</a></span>
<span class="normal"><a href="#__codelineno-0-334"> 334</a></span>
<span class="normal"><a href="#__codelineno-0-335"> 335</a></span>
<span class="normal"><a href="#__codelineno-0-336"> 336</a></span>
<span class="normal"><a href="#__codelineno-0-337"> 337</a></span>
<span class="normal"><a href="#__codelineno-0-338"> 338</a></span>
<span class="normal"><a href="#__codelineno-0-339"> 339</a></span>
<span class="normal"><a href="#__codelineno-0-340"> 340</a></span>
<span class="normal"><a href="#__codelineno-0-341"> 341</a></span>
<span class="normal"><a href="#__codelineno-0-342"> 342</a></span>
<span class="normal"><a href="#__codelineno-0-343"> 343</a></span>
<span class="normal"><a href="#__codelineno-0-344"> 344</a></span>
<span class="normal"><a href="#__codelineno-0-345"> 345</a></span>
<span class="normal"><a href="#__codelineno-0-346"> 346</a></span>
<span class="normal"><a href="#__codelineno-0-347"> 347</a></span>
<span class="normal"><a href="#__codelineno-0-348"> 348</a></span>
<span class="normal"><a href="#__codelineno-0-349"> 349</a></span>
<span class="normal"><a href="#__codelineno-0-350"> 350</a></span>
<span class="normal"><a href="#__codelineno-0-351"> 351</a></span>
<span class="normal"><a href="#__codelineno-0-352"> 352</a></span>
<span class="normal"><a href="#__codelineno-0-353"> 353</a></span>
<span class="normal"><a href="#__codelineno-0-354"> 354</a></span>
<span class="normal"><a href="#__codelineno-0-355"> 355</a></span>
<span class="normal"><a href="#__codelineno-0-356"> 356</a></span>
<span class="normal"><a href="#__codelineno-0-357"> 357</a></span>
<span class="normal"><a href="#__codelineno-0-358"> 358</a></span>
<span class="normal"><a href="#__codelineno-0-359"> 359</a></span>
<span class="normal"><a href="#__codelineno-0-360"> 360</a></span>
<span class="normal"><a href="#__codelineno-0-361"> 361</a></span>
<span class="normal"><a href="#__codelineno-0-362"> 362</a></span>
<span class="normal"><a href="#__codelineno-0-363"> 363</a></span>
<span class="normal"><a href="#__codelineno-0-364"> 364</a></span>
<span class="normal"><a href="#__codelineno-0-365"> 365</a></span>
<span class="normal"><a href="#__codelineno-0-366"> 366</a></span>
<span class="normal"><a href="#__codelineno-0-367"> 367</a></span>
<span class="normal"><a href="#__codelineno-0-368"> 368</a></span>
<span class="normal"><a href="#__codelineno-0-369"> 369</a></span>
<span class="normal"><a href="#__codelineno-0-370"> 370</a></span>
<span class="normal"><a href="#__codelineno-0-371"> 371</a></span>
<span class="normal"><a href="#__codelineno-0-372"> 372</a></span>
<span class="normal"><a href="#__codelineno-0-373"> 373</a></span>
<span class="normal"><a href="#__codelineno-0-374"> 374</a></span>
<span class="normal"><a href="#__codelineno-0-375"> 375</a></span>
<span class="normal"><a href="#__codelineno-0-376"> 376</a></span>
<span class="normal"><a href="#__codelineno-0-377"> 377</a></span>
<span class="normal"><a href="#__codelineno-0-378"> 378</a></span>
<span class="normal"><a href="#__codelineno-0-379"> 379</a></span>
<span class="normal"><a href="#__codelineno-0-380"> 380</a></span>
<span class="normal"><a href="#__codelineno-0-381"> 381</a></span>
<span class="normal"><a href="#__codelineno-0-382"> 382</a></span>
<span class="normal"><a href="#__codelineno-0-383"> 383</a></span>
<span class="normal"><a href="#__codelineno-0-384"> 384</a></span>
<span class="normal"><a href="#__codelineno-0-385"> 385</a></span>
<span class="normal"><a href="#__codelineno-0-386"> 386</a></span>
<span class="normal"><a href="#__codelineno-0-387"> 387</a></span>
<span class="normal"><a href="#__codelineno-0-388"> 388</a></span>
<span class="normal"><a href="#__codelineno-0-389"> 389</a></span>
<span class="normal"><a href="#__codelineno-0-390"> 390</a></span>
<span class="normal"><a href="#__codelineno-0-391"> 391</a></span>
<span class="normal"><a href="#__codelineno-0-392"> 392</a></span>
<span class="normal"><a href="#__codelineno-0-393"> 393</a></span>
<span class="normal"><a href="#__codelineno-0-394"> 394</a></span>
<span class="normal"><a href="#__codelineno-0-395"> 395</a></span>
<span class="normal"><a href="#__codelineno-0-396"> 396</a></span>
<span class="normal"><a href="#__codelineno-0-397"> 397</a></span>
<span class="normal"><a href="#__codelineno-0-398"> 398</a></span>
<span class="normal"><a href="#__codelineno-0-399"> 399</a></span>
<span class="normal"><a href="#__codelineno-0-400"> 400</a></span>
<span class="normal"><a href="#__codelineno-0-401"> 401</a></span>
<span class="normal"><a href="#__codelineno-0-402"> 402</a></span>
<span class="normal"><a href="#__codelineno-0-403"> 403</a></span>
<span class="normal"><a href="#__codelineno-0-404"> 404</a></span>
<span class="normal"><a href="#__codelineno-0-405"> 405</a></span>
<span class="normal"><a href="#__codelineno-0-406"> 406</a></span>
<span class="normal"><a href="#__codelineno-0-407"> 407</a></span>
<span class="normal"><a href="#__codelineno-0-408"> 408</a></span>
<span class="normal"><a href="#__codelineno-0-409"> 409</a></span>
<span class="normal"><a href="#__codelineno-0-410"> 410</a></span>
<span class="normal"><a href="#__codelineno-0-411"> 411</a></span>
<span class="normal"><a href="#__codelineno-0-412"> 412</a></span>
<span class="normal"><a href="#__codelineno-0-413"> 413</a></span>
<span class="normal"><a href="#__codelineno-0-414"> 414</a></span>
<span class="normal"><a href="#__codelineno-0-415"> 415</a></span>
<span class="normal"><a href="#__codelineno-0-416"> 416</a></span>
<span class="normal"><a href="#__codelineno-0-417"> 417</a></span>
<span class="normal"><a href="#__codelineno-0-418"> 418</a></span>
<span class="normal"><a href="#__codelineno-0-419"> 419</a></span>
<span class="normal"><a href="#__codelineno-0-420"> 420</a></span>
<span class="normal"><a href="#__codelineno-0-421"> 421</a></span>
<span class="normal"><a href="#__codelineno-0-422"> 422</a></span>
<span class="normal"><a href="#__codelineno-0-423"> 423</a></span>
<span class="normal"><a href="#__codelineno-0-424"> 424</a></span>
<span class="normal"><a href="#__codelineno-0-425"> 425</a></span>
<span class="normal"><a href="#__codelineno-0-426"> 426</a></span>
<span class="normal"><a href="#__codelineno-0-427"> 427</a></span>
<span class="normal"><a href="#__codelineno-0-428"> 428</a></span>
<span class="normal"><a href="#__codelineno-0-429"> 429</a></span>
<span class="normal"><a href="#__codelineno-0-430"> 430</a></span>
<span class="normal"><a href="#__codelineno-0-431"> 431</a></span>
<span class="normal"><a href="#__codelineno-0-432"> 432</a></span>
<span class="normal"><a href="#__codelineno-0-433"> 433</a></span>
<span class="normal"><a href="#__codelineno-0-434"> 434</a></span>
<span class="normal"><a href="#__codelineno-0-435"> 435</a></span>
<span class="normal"><a href="#__codelineno-0-436"> 436</a></span>
<span class="normal"><a href="#__codelineno-0-437"> 437</a></span>
<span class="normal"><a href="#__codelineno-0-438"> 438</a></span>
<span class="normal"><a href="#__codelineno-0-439"> 439</a></span>
<span class="normal"><a href="#__codelineno-0-440"> 440</a></span>
<span class="normal"><a href="#__codelineno-0-441"> 441</a></span>
<span class="normal"><a href="#__codelineno-0-442"> 442</a></span>
<span class="normal"><a href="#__codelineno-0-443"> 443</a></span>
<span class="normal"><a href="#__codelineno-0-444"> 444</a></span>
<span class="normal"><a href="#__codelineno-0-445"> 445</a></span>
<span class="normal"><a href="#__codelineno-0-446"> 446</a></span>
<span class="normal"><a href="#__codelineno-0-447"> 447</a></span>
<span class="normal"><a href="#__codelineno-0-448"> 448</a></span>
<span class="normal"><a href="#__codelineno-0-449"> 449</a></span>
<span class="normal"><a href="#__codelineno-0-450"> 450</a></span>
<span class="normal"><a href="#__codelineno-0-451"> 451</a></span>
<span class="normal"><a href="#__codelineno-0-452"> 452</a></span>
<span class="normal"><a href="#__codelineno-0-453"> 453</a></span>
<span class="normal"><a href="#__codelineno-0-454"> 454</a></span>
<span class="normal"><a href="#__codelineno-0-455"> 455</a></span>
<span class="normal"><a href="#__codelineno-0-456"> 456</a></span>
<span class="normal"><a href="#__codelineno-0-457"> 457</a></span>
<span class="normal"><a href="#__codelineno-0-458"> 458</a></span>
<span class="normal"><a href="#__codelineno-0-459"> 459</a></span>
<span class="normal"><a href="#__codelineno-0-460"> 460</a></span>
<span class="normal"><a href="#__codelineno-0-461"> 461</a></span>
<span class="normal"><a href="#__codelineno-0-462"> 462</a></span>
<span class="normal"><a href="#__codelineno-0-463"> 463</a></span>
<span class="normal"><a href="#__codelineno-0-464"> 464</a></span>
<span class="normal"><a href="#__codelineno-0-465"> 465</a></span>
<span class="normal"><a href="#__codelineno-0-466"> 466</a></span>
<span class="normal"><a href="#__codelineno-0-467"> 467</a></span>
<span class="normal"><a href="#__codelineno-0-468"> 468</a></span>
<span class="normal"><a href="#__codelineno-0-469"> 469</a></span>
<span class="normal"><a href="#__codelineno-0-470"> 470</a></span>
<span class="normal"><a href="#__codelineno-0-471"> 471</a></span>
<span class="normal"><a href="#__codelineno-0-472"> 472</a></span>
<span class="normal"><a href="#__codelineno-0-473"> 473</a></span>
<span class="normal"><a href="#__codelineno-0-474"> 474</a></span>
<span class="normal"><a href="#__codelineno-0-475"> 475</a></span>
<span class="normal"><a href="#__codelineno-0-476"> 476</a></span>
<span class="normal"><a href="#__codelineno-0-477"> 477</a></span>
<span class="normal"><a href="#__codelineno-0-478"> 478</a></span>
<span class="normal"><a href="#__codelineno-0-479"> 479</a></span>
<span class="normal"><a href="#__codelineno-0-480"> 480</a></span>
<span class="normal"><a href="#__codelineno-0-481"> 481</a></span>
<span class="normal"><a href="#__codelineno-0-482"> 482</a></span>
<span class="normal"><a href="#__codelineno-0-483"> 483</a></span>
<span class="normal"><a href="#__codelineno-0-484"> 484</a></span>
<span class="normal"><a href="#__codelineno-0-485"> 485</a></span>
<span class="normal"><a href="#__codelineno-0-486"> 486</a></span>
<span class="normal"><a href="#__codelineno-0-487"> 487</a></span>
<span class="normal"><a href="#__codelineno-0-488"> 488</a></span>
<span class="normal"><a href="#__codelineno-0-489"> 489</a></span>
<span class="normal"><a href="#__codelineno-0-490"> 490</a></span>
<span class="normal"><a href="#__codelineno-0-491"> 491</a></span>
<span class="normal"><a href="#__codelineno-0-492"> 492</a></span>
<span class="normal"><a href="#__codelineno-0-493"> 493</a></span>
<span class="normal"><a href="#__codelineno-0-494"> 494</a></span>
<span class="normal"><a href="#__codelineno-0-495"> 495</a></span>
<span class="normal"><a href="#__codelineno-0-496"> 496</a></span>
<span class="normal"><a href="#__codelineno-0-497"> 497</a></span>
<span class="normal"><a href="#__codelineno-0-498"> 498</a></span>
<span class="normal"><a href="#__codelineno-0-499"> 499</a></span>
<span class="normal"><a href="#__codelineno-0-500"> 500</a></span>
<span class="normal"><a href="#__codelineno-0-501"> 501</a></span>
<span class="normal"><a href="#__codelineno-0-502"> 502</a></span>
<span class="normal"><a href="#__codelineno-0-503"> 503</a></span>
<span class="normal"><a href="#__codelineno-0-504"> 504</a></span>
<span class="normal"><a href="#__codelineno-0-505"> 505</a></span>
<span class="normal"><a href="#__codelineno-0-506"> 506</a></span>
<span class="normal"><a href="#__codelineno-0-507"> 507</a></span>
<span class="normal"><a href="#__codelineno-0-508"> 508</a></span>
<span class="normal"><a href="#__codelineno-0-509"> 509</a></span>
<span class="normal"><a href="#__codelineno-0-510"> 510</a></span>
<span class="normal"><a href="#__codelineno-0-511"> 511</a></span>
<span class="normal"><a href="#__codelineno-0-512"> 512</a></span>
<span class="normal"><a href="#__codelineno-0-513"> 513</a></span>
<span class="normal"><a href="#__codelineno-0-514"> 514</a></span>
<span class="normal"><a href="#__codelineno-0-515"> 515</a></span>
<span class="normal"><a href="#__codelineno-0-516"> 516</a></span>
<span class="normal"><a href="#__codelineno-0-517"> 517</a></span>
<span class="normal"><a href="#__codelineno-0-518"> 518</a></span>
<span class="normal"><a href="#__codelineno-0-519"> 519</a></span>
<span class="normal"><a href="#__codelineno-0-520"> 520</a></span>
<span class="normal"><a href="#__codelineno-0-521"> 521</a></span>
<span class="normal"><a href="#__codelineno-0-522"> 522</a></span>
<span class="normal"><a href="#__codelineno-0-523"> 523</a></span>
<span class="normal"><a href="#__codelineno-0-524"> 524</a></span>
<span class="normal"><a href="#__codelineno-0-525"> 525</a></span>
<span class="normal"><a href="#__codelineno-0-526"> 526</a></span>
<span class="normal"><a href="#__codelineno-0-527"> 527</a></span>
<span class="normal"><a href="#__codelineno-0-528"> 528</a></span>
<span class="normal"><a href="#__codelineno-0-529"> 529</a></span>
<span class="normal"><a href="#__codelineno-0-530"> 530</a></span>
<span class="normal"><a href="#__codelineno-0-531"> 531</a></span>
<span class="normal"><a href="#__codelineno-0-532"> 532</a></span>
<span class="normal"><a href="#__codelineno-0-533"> 533</a></span>
<span class="normal"><a href="#__codelineno-0-534"> 534</a></span>
<span class="normal"><a href="#__codelineno-0-535"> 535</a></span>
<span class="normal"><a href="#__codelineno-0-536"> 536</a></span>
<span class="normal"><a href="#__codelineno-0-537"> 537</a></span>
<span class="normal"><a href="#__codelineno-0-538"> 538</a></span>
<span class="normal"><a href="#__codelineno-0-539"> 539</a></span>
<span class="normal"><a href="#__codelineno-0-540"> 540</a></span>
<span class="normal"><a href="#__codelineno-0-541"> 541</a></span>
<span class="normal"><a href="#__codelineno-0-542"> 542</a></span>
<span class="normal"><a href="#__codelineno-0-543"> 543</a></span>
<span class="normal"><a href="#__codelineno-0-544"> 544</a></span>
<span class="normal"><a href="#__codelineno-0-545"> 545</a></span>
<span class="normal"><a href="#__codelineno-0-546"> 546</a></span>
<span class="normal"><a href="#__codelineno-0-547"> 547</a></span>
<span class="normal"><a href="#__codelineno-0-548"> 548</a></span>
<span class="normal"><a href="#__codelineno-0-549"> 549</a></span>
<span class="normal"><a href="#__codelineno-0-550"> 550</a></span>
<span class="normal"><a href="#__codelineno-0-551"> 551</a></span>
<span class="normal"><a href="#__codelineno-0-552"> 552</a></span>
<span class="normal"><a href="#__codelineno-0-553"> 553</a></span>
<span class="normal"><a href="#__codelineno-0-554"> 554</a></span>
<span class="normal"><a href="#__codelineno-0-555"> 555</a></span>
<span class="normal"><a href="#__codelineno-0-556"> 556</a></span>
<span class="normal"><a href="#__codelineno-0-557"> 557</a></span>
<span class="normal"><a href="#__codelineno-0-558"> 558</a></span>
<span class="normal"><a href="#__codelineno-0-559"> 559</a></span>
<span class="normal"><a href="#__codelineno-0-560"> 560</a></span>
<span class="normal"><a href="#__codelineno-0-561"> 561</a></span>
<span class="normal"><a href="#__codelineno-0-562"> 562</a></span>
<span class="normal"><a href="#__codelineno-0-563"> 563</a></span>
<span class="normal"><a href="#__codelineno-0-564"> 564</a></span>
<span class="normal"><a href="#__codelineno-0-565"> 565</a></span>
<span class="normal"><a href="#__codelineno-0-566"> 566</a></span>
<span class="normal"><a href="#__codelineno-0-567"> 567</a></span>
<span class="normal"><a href="#__codelineno-0-568"> 568</a></span>
<span class="normal"><a href="#__codelineno-0-569"> 569</a></span>
<span class="normal"><a href="#__codelineno-0-570"> 570</a></span>
<span class="normal"><a href="#__codelineno-0-571"> 571</a></span>
<span class="normal"><a href="#__codelineno-0-572"> 572</a></span>
<span class="normal"><a href="#__codelineno-0-573"> 573</a></span>
<span class="normal"><a href="#__codelineno-0-574"> 574</a></span>
<span class="normal"><a href="#__codelineno-0-575"> 575</a></span>
<span class="normal"><a href="#__codelineno-0-576"> 576</a></span>
<span class="normal"><a href="#__codelineno-0-577"> 577</a></span>
<span class="normal"><a href="#__codelineno-0-578"> 578</a></span>
<span class="normal"><a href="#__codelineno-0-579"> 579</a></span>
<span class="normal"><a href="#__codelineno-0-580"> 580</a></span>
<span class="normal"><a href="#__codelineno-0-581"> 581</a></span>
<span class="normal"><a href="#__codelineno-0-582"> 582</a></span>
<span class="normal"><a href="#__codelineno-0-583"> 583</a></span>
<span class="normal"><a href="#__codelineno-0-584"> 584</a></span>
<span class="normal"><a href="#__codelineno-0-585"> 585</a></span>
<span class="normal"><a href="#__codelineno-0-586"> 586</a></span>
<span class="normal"><a href="#__codelineno-0-587"> 587</a></span>
<span class="normal"><a href="#__codelineno-0-588"> 588</a></span>
<span class="normal"><a href="#__codelineno-0-589"> 589</a></span>
<span class="normal"><a href="#__codelineno-0-590"> 590</a></span>
<span class="normal"><a href="#__codelineno-0-591"> 591</a></span>
<span class="normal"><a href="#__codelineno-0-592"> 592</a></span>
<span class="normal"><a href="#__codelineno-0-593"> 593</a></span>
<span class="normal"><a href="#__codelineno-0-594"> 594</a></span>
<span class="normal"><a href="#__codelineno-0-595"> 595</a></span>
<span class="normal"><a href="#__codelineno-0-596"> 596</a></span>
<span class="normal"><a href="#__codelineno-0-597"> 597</a></span>
<span class="normal"><a href="#__codelineno-0-598"> 598</a></span>
<span class="normal"><a href="#__codelineno-0-599"> 599</a></span>
<span class="normal"><a href="#__codelineno-0-600"> 600</a></span>
<span class="normal"><a href="#__codelineno-0-601"> 601</a></span>
<span class="normal"><a href="#__codelineno-0-602"> 602</a></span>
<span class="normal"><a href="#__codelineno-0-603"> 603</a></span>
<span class="normal"><a href="#__codelineno-0-604"> 604</a></span>
<span class="normal"><a href="#__codelineno-0-605"> 605</a></span>
<span class="normal"><a href="#__codelineno-0-606"> 606</a></span>
<span class="normal"><a href="#__codelineno-0-607"> 607</a></span>
<span class="normal"><a href="#__codelineno-0-608"> 608</a></span>
<span class="normal"><a href="#__codelineno-0-609"> 609</a></span>
<span class="normal"><a href="#__codelineno-0-610"> 610</a></span>
<span class="normal"><a href="#__codelineno-0-611"> 611</a></span>
<span class="normal"><a href="#__codelineno-0-612"> 612</a></span>
<span class="normal"><a href="#__codelineno-0-613"> 613</a></span>
<span class="normal"><a href="#__codelineno-0-614"> 614</a></span>
<span class="normal"><a href="#__codelineno-0-615"> 615</a></span>
<span class="normal"><a href="#__codelineno-0-616"> 616</a></span>
<span class="normal"><a href="#__codelineno-0-617"> 617</a></span>
<span class="normal"><a href="#__codelineno-0-618"> 618</a></span>
<span class="normal"><a href="#__codelineno-0-619"> 619</a></span>
<span class="normal"><a href="#__codelineno-0-620"> 620</a></span>
<span class="normal"><a href="#__codelineno-0-621"> 621</a></span>
<span class="normal"><a href="#__codelineno-0-622"> 622</a></span>
<span class="normal"><a href="#__codelineno-0-623"> 623</a></span>
<span class="normal"><a href="#__codelineno-0-624"> 624</a></span>
<span class="normal"><a href="#__codelineno-0-625"> 625</a></span>
<span class="normal"><a href="#__codelineno-0-626"> 626</a></span>
<span class="normal"><a href="#__codelineno-0-627"> 627</a></span>
<span class="normal"><a href="#__codelineno-0-628"> 628</a></span>
<span class="normal"><a href="#__codelineno-0-629"> 629</a></span>
<span class="normal"><a href="#__codelineno-0-630"> 630</a></span>
<span class="normal"><a href="#__codelineno-0-631"> 631</a></span>
<span class="normal"><a href="#__codelineno-0-632"> 632</a></span>
<span class="normal"><a href="#__codelineno-0-633"> 633</a></span>
<span class="normal"><a href="#__codelineno-0-634"> 634</a></span>
<span class="normal"><a href="#__codelineno-0-635"> 635</a></span>
<span class="normal"><a href="#__codelineno-0-636"> 636</a></span>
<span class="normal"><a href="#__codelineno-0-637"> 637</a></span>
<span class="normal"><a href="#__codelineno-0-638"> 638</a></span>
<span class="normal"><a href="#__codelineno-0-639"> 639</a></span>
<span class="normal"><a href="#__codelineno-0-640"> 640</a></span>
<span class="normal"><a href="#__codelineno-0-641"> 641</a></span>
<span class="normal"><a href="#__codelineno-0-642"> 642</a></span>
<span class="normal"><a href="#__codelineno-0-643"> 643</a></span>
<span class="normal"><a href="#__codelineno-0-644"> 644</a></span>
<span class="normal"><a href="#__codelineno-0-645"> 645</a></span>
<span class="normal"><a href="#__codelineno-0-646"> 646</a></span>
<span class="normal"><a href="#__codelineno-0-647"> 647</a></span>
<span class="normal"><a href="#__codelineno-0-648"> 648</a></span>
<span class="normal"><a href="#__codelineno-0-649"> 649</a></span>
<span class="normal"><a href="#__codelineno-0-650"> 650</a></span>
<span class="normal"><a href="#__codelineno-0-651"> 651</a></span>
<span class="normal"><a href="#__codelineno-0-652"> 652</a></span>
<span class="normal"><a href="#__codelineno-0-653"> 653</a></span>
<span class="normal"><a href="#__codelineno-0-654"> 654</a></span>
<span class="normal"><a href="#__codelineno-0-655"> 655</a></span>
<span class="normal"><a href="#__codelineno-0-656"> 656</a></span>
<span class="normal"><a href="#__codelineno-0-657"> 657</a></span>
<span class="normal"><a href="#__codelineno-0-658"> 658</a></span>
<span class="normal"><a href="#__codelineno-0-659"> 659</a></span>
<span class="normal"><a href="#__codelineno-0-660"> 660</a></span>
<span class="normal"><a href="#__codelineno-0-661"> 661</a></span>
<span class="normal"><a href="#__codelineno-0-662"> 662</a></span>
<span class="normal"><a href="#__codelineno-0-663"> 663</a></span>
<span class="normal"><a href="#__codelineno-0-664"> 664</a></span>
<span class="normal"><a href="#__codelineno-0-665"> 665</a></span>
<span class="normal"><a href="#__codelineno-0-666"> 666</a></span>
<span class="normal"><a href="#__codelineno-0-667"> 667</a></span>
<span class="normal"><a href="#__codelineno-0-668"> 668</a></span>
<span class="normal"><a href="#__codelineno-0-669"> 669</a></span>
<span class="normal"><a href="#__codelineno-0-670"> 670</a></span>
<span class="normal"><a href="#__codelineno-0-671"> 671</a></span>
<span class="normal"><a href="#__codelineno-0-672"> 672</a></span>
<span class="normal"><a href="#__codelineno-0-673"> 673</a></span>
<span class="normal"><a href="#__codelineno-0-674"> 674</a></span>
<span class="normal"><a href="#__codelineno-0-675"> 675</a></span>
<span class="normal"><a href="#__codelineno-0-676"> 676</a></span>
<span class="normal"><a href="#__codelineno-0-677"> 677</a></span>
<span class="normal"><a href="#__codelineno-0-678"> 678</a></span>
<span class="normal"><a href="#__codelineno-0-679"> 679</a></span>
<span class="normal"><a href="#__codelineno-0-680"> 680</a></span>
<span class="normal"><a href="#__codelineno-0-681"> 681</a></span>
<span class="normal"><a href="#__codelineno-0-682"> 682</a></span>
<span class="normal"><a href="#__codelineno-0-683"> 683</a></span>
<span class="normal"><a href="#__codelineno-0-684"> 684</a></span>
<span class="normal"><a href="#__codelineno-0-685"> 685</a></span>
<span class="normal"><a href="#__codelineno-0-686"> 686</a></span>
<span class="normal"><a href="#__codelineno-0-687"> 687</a></span>
<span class="normal"><a href="#__codelineno-0-688"> 688</a></span>
<span class="normal"><a href="#__codelineno-0-689"> 689</a></span>
<span class="normal"><a href="#__codelineno-0-690"> 690</a></span>
<span class="normal"><a href="#__codelineno-0-691"> 691</a></span>
<span class="normal"><a href="#__codelineno-0-692"> 692</a></span>
<span class="normal"><a href="#__codelineno-0-693"> 693</a></span>
<span class="normal"><a href="#__codelineno-0-694"> 694</a></span>
<span class="normal"><a href="#__codelineno-0-695"> 695</a></span>
<span class="normal"><a href="#__codelineno-0-696"> 696</a></span>
<span class="normal"><a href="#__codelineno-0-697"> 697</a></span>
<span class="normal"><a href="#__codelineno-0-698"> 698</a></span>
<span class="normal"><a href="#__codelineno-0-699"> 699</a></span>
<span class="normal"><a href="#__codelineno-0-700"> 700</a></span>
<span class="normal"><a href="#__codelineno-0-701"> 701</a></span>
<span class="normal"><a href="#__codelineno-0-702"> 702</a></span>
<span class="normal"><a href="#__codelineno-0-703"> 703</a></span>
<span class="normal"><a href="#__codelineno-0-704"> 704</a></span>
<span class="normal"><a href="#__codelineno-0-705"> 705</a></span>
<span class="normal"><a href="#__codelineno-0-706"> 706</a></span>
<span class="normal"><a href="#__codelineno-0-707"> 707</a></span>
<span class="normal"><a href="#__codelineno-0-708"> 708</a></span>
<span class="normal"><a href="#__codelineno-0-709"> 709</a></span>
<span class="normal"><a href="#__codelineno-0-710"> 710</a></span>
<span class="normal"><a href="#__codelineno-0-711"> 711</a></span>
<span class="normal"><a href="#__codelineno-0-712"> 712</a></span>
<span class="normal"><a href="#__codelineno-0-713"> 713</a></span>
<span class="normal"><a href="#__codelineno-0-714"> 714</a></span>
<span class="normal"><a href="#__codelineno-0-715"> 715</a></span>
<span class="normal"><a href="#__codelineno-0-716"> 716</a></span>
<span class="normal"><a href="#__codelineno-0-717"> 717</a></span>
<span class="normal"><a href="#__codelineno-0-718"> 718</a></span>
<span class="normal"><a href="#__codelineno-0-719"> 719</a></span>
<span class="normal"><a href="#__codelineno-0-720"> 720</a></span>
<span class="normal"><a href="#__codelineno-0-721"> 721</a></span>
<span class="normal"><a href="#__codelineno-0-722"> 722</a></span>
<span class="normal"><a href="#__codelineno-0-723"> 723</a></span>
<span class="normal"><a href="#__codelineno-0-724"> 724</a></span>
<span class="normal"><a href="#__codelineno-0-725"> 725</a></span>
<span class="normal"><a href="#__codelineno-0-726"> 726</a></span>
<span class="normal"><a href="#__codelineno-0-727"> 727</a></span>
<span class="normal"><a href="#__codelineno-0-728"> 728</a></span>
<span class="normal"><a href="#__codelineno-0-729"> 729</a></span>
<span class="normal"><a href="#__codelineno-0-730"> 730</a></span>
<span class="normal"><a href="#__codelineno-0-731"> 731</a></span>
<span class="normal"><a href="#__codelineno-0-732"> 732</a></span>
<span class="normal"><a href="#__codelineno-0-733"> 733</a></span>
<span class="normal"><a href="#__codelineno-0-734"> 734</a></span>
<span class="normal"><a href="#__codelineno-0-735"> 735</a></span>
<span class="normal"><a href="#__codelineno-0-736"> 736</a></span>
<span class="normal"><a href="#__codelineno-0-737"> 737</a></span>
<span class="normal"><a href="#__codelineno-0-738"> 738</a></span>
<span class="normal"><a href="#__codelineno-0-739"> 739</a></span>
<span class="normal"><a href="#__codelineno-0-740"> 740</a></span>
<span class="normal"><a href="#__codelineno-0-741"> 741</a></span>
<span class="normal"><a href="#__codelineno-0-742"> 742</a></span>
<span class="normal"><a href="#__codelineno-0-743"> 743</a></span>
<span class="normal"><a href="#__codelineno-0-744"> 744</a></span>
<span class="normal"><a href="#__codelineno-0-745"> 745</a></span>
<span class="normal"><a href="#__codelineno-0-746"> 746</a></span>
<span class="normal"><a href="#__codelineno-0-747"> 747</a></span>
<span class="normal"><a href="#__codelineno-0-748"> 748</a></span>
<span class="normal"><a href="#__codelineno-0-749"> 749</a></span>
<span class="normal"><a href="#__codelineno-0-750"> 750</a></span>
<span class="normal"><a href="#__codelineno-0-751"> 751</a></span>
<span class="normal"><a href="#__codelineno-0-752"> 752</a></span>
<span class="normal"><a href="#__codelineno-0-753"> 753</a></span>
<span class="normal"><a href="#__codelineno-0-754"> 754</a></span>
<span class="normal"><a href="#__codelineno-0-755"> 755</a></span>
<span class="normal"><a href="#__codelineno-0-756"> 756</a></span>
<span class="normal"><a href="#__codelineno-0-757"> 757</a></span>
<span class="normal"><a href="#__codelineno-0-758"> 758</a></span>
<span class="normal"><a href="#__codelineno-0-759"> 759</a></span>
<span class="normal"><a href="#__codelineno-0-760"> 760</a></span>
<span class="normal"><a href="#__codelineno-0-761"> 761</a></span>
<span class="normal"><a href="#__codelineno-0-762"> 762</a></span>
<span class="normal"><a href="#__codelineno-0-763"> 763</a></span>
<span class="normal"><a href="#__codelineno-0-764"> 764</a></span>
<span class="normal"><a href="#__codelineno-0-765"> 765</a></span>
<span class="normal"><a href="#__codelineno-0-766"> 766</a></span>
<span class="normal"><a href="#__codelineno-0-767"> 767</a></span>
<span class="normal"><a href="#__codelineno-0-768"> 768</a></span>
<span class="normal"><a href="#__codelineno-0-769"> 769</a></span>
<span class="normal"><a href="#__codelineno-0-770"> 770</a></span>
<span class="normal"><a href="#__codelineno-0-771"> 771</a></span>
<span class="normal"><a href="#__codelineno-0-772"> 772</a></span>
<span class="normal"><a href="#__codelineno-0-773"> 773</a></span>
<span class="normal"><a href="#__codelineno-0-774"> 774</a></span>
<span class="normal"><a href="#__codelineno-0-775"> 775</a></span>
<span class="normal"><a href="#__codelineno-0-776"> 776</a></span>
<span class="normal"><a href="#__codelineno-0-777"> 777</a></span>
<span class="normal"><a href="#__codelineno-0-778"> 778</a></span>
<span class="normal"><a href="#__codelineno-0-779"> 779</a></span>
<span class="normal"><a href="#__codelineno-0-780"> 780</a></span>
<span class="normal"><a href="#__codelineno-0-781"> 781</a></span>
<span class="normal"><a href="#__codelineno-0-782"> 782</a></span>
<span class="normal"><a href="#__codelineno-0-783"> 783</a></span>
<span class="normal"><a href="#__codelineno-0-784"> 784</a></span>
<span class="normal"><a href="#__codelineno-0-785"> 785</a></span>
<span class="normal"><a href="#__codelineno-0-786"> 786</a></span>
<span class="normal"><a href="#__codelineno-0-787"> 787</a></span>
<span class="normal"><a href="#__codelineno-0-788"> 788</a></span>
<span class="normal"><a href="#__codelineno-0-789"> 789</a></span>
<span class="normal"><a href="#__codelineno-0-790"> 790</a></span>
<span class="normal"><a href="#__codelineno-0-791"> 791</a></span>
<span class="normal"><a href="#__codelineno-0-792"> 792</a></span>
<span class="normal"><a href="#__codelineno-0-793"> 793</a></span>
<span class="normal"><a href="#__codelineno-0-794"> 794</a></span>
<span class="normal"><a href="#__codelineno-0-795"> 795</a></span>
<span class="normal"><a href="#__codelineno-0-796"> 796</a></span>
<span class="normal"><a href="#__codelineno-0-797"> 797</a></span>
<span class="normal"><a href="#__codelineno-0-798"> 798</a></span>
<span class="normal"><a href="#__codelineno-0-799"> 799</a></span>
<span class="normal"><a href="#__codelineno-0-800"> 800</a></span>
<span class="normal"><a href="#__codelineno-0-801"> 801</a></span>
<span class="normal"><a href="#__codelineno-0-802"> 802</a></span>
<span class="normal"><a href="#__codelineno-0-803"> 803</a></span>
<span class="normal"><a href="#__codelineno-0-804"> 804</a></span>
<span class="normal"><a href="#__codelineno-0-805"> 805</a></span>
<span class="normal"><a href="#__codelineno-0-806"> 806</a></span>
<span class="normal"><a href="#__codelineno-0-807"> 807</a></span>
<span class="normal"><a href="#__codelineno-0-808"> 808</a></span>
<span class="normal"><a href="#__codelineno-0-809"> 809</a></span>
<span class="normal"><a href="#__codelineno-0-810"> 810</a></span>
<span class="normal"><a href="#__codelineno-0-811"> 811</a></span>
<span class="normal"><a href="#__codelineno-0-812"> 812</a></span>
<span class="normal"><a href="#__codelineno-0-813"> 813</a></span>
<span class="normal"><a href="#__codelineno-0-814"> 814</a></span>
<span class="normal"><a href="#__codelineno-0-815"> 815</a></span>
<span class="normal"><a href="#__codelineno-0-816"> 816</a></span>
<span class="normal"><a href="#__codelineno-0-817"> 817</a></span>
<span class="normal"><a href="#__codelineno-0-818"> 818</a></span>
<span class="normal"><a href="#__codelineno-0-819"> 819</a></span>
<span class="normal"><a href="#__codelineno-0-820"> 820</a></span>
<span class="normal"><a href="#__codelineno-0-821"> 821</a></span>
<span class="normal"><a href="#__codelineno-0-822"> 822</a></span>
<span class="normal"><a href="#__codelineno-0-823"> 823</a></span>
<span class="normal"><a href="#__codelineno-0-824"> 824</a></span>
<span class="normal"><a href="#__codelineno-0-825"> 825</a></span>
<span class="normal"><a href="#__codelineno-0-826"> 826</a></span>
<span class="normal"><a href="#__codelineno-0-827"> 827</a></span>
<span class="normal"><a href="#__codelineno-0-828"> 828</a></span>
<span class="normal"><a href="#__codelineno-0-829"> 829</a></span>
<span class="normal"><a href="#__codelineno-0-830"> 830</a></span>
<span class="normal"><a href="#__codelineno-0-831"> 831</a></span>
<span class="normal"><a href="#__codelineno-0-832"> 832</a></span>
<span class="normal"><a href="#__codelineno-0-833"> 833</a></span>
<span class="normal"><a href="#__codelineno-0-834"> 834</a></span>
<span class="normal"><a href="#__codelineno-0-835"> 835</a></span>
<span class="normal"><a href="#__codelineno-0-836"> 836</a></span>
<span class="normal"><a href="#__codelineno-0-837"> 837</a></span>
<span class="normal"><a href="#__codelineno-0-838"> 838</a></span>
<span class="normal"><a href="#__codelineno-0-839"> 839</a></span>
<span class="normal"><a href="#__codelineno-0-840"> 840</a></span>
<span class="normal"><a href="#__codelineno-0-841"> 841</a></span>
<span class="normal"><a href="#__codelineno-0-842"> 842</a></span>
<span class="normal"><a href="#__codelineno-0-843"> 843</a></span>
<span class="normal"><a href="#__codelineno-0-844"> 844</a></span>
<span class="normal"><a href="#__codelineno-0-845"> 845</a></span>
<span class="normal"><a href="#__codelineno-0-846"> 846</a></span>
<span class="normal"><a href="#__codelineno-0-847"> 847</a></span>
<span class="normal"><a href="#__codelineno-0-848"> 848</a></span>
<span class="normal"><a href="#__codelineno-0-849"> 849</a></span>
<span class="normal"><a href="#__codelineno-0-850"> 850</a></span>
<span class="normal"><a href="#__codelineno-0-851"> 851</a></span>
<span class="normal"><a href="#__codelineno-0-852"> 852</a></span>
<span class="normal"><a href="#__codelineno-0-853"> 853</a></span>
<span class="normal"><a href="#__codelineno-0-854"> 854</a></span>
<span class="normal"><a href="#__codelineno-0-855"> 855</a></span>
<span class="normal"><a href="#__codelineno-0-856"> 856</a></span>
<span class="normal"><a href="#__codelineno-0-857"> 857</a></span>
<span class="normal"><a href="#__codelineno-0-858"> 858</a></span>
<span class="normal"><a href="#__codelineno-0-859"> 859</a></span>
<span class="normal"><a href="#__codelineno-0-860"> 860</a></span>
<span class="normal"><a href="#__codelineno-0-861"> 861</a></span>
<span class="normal"><a href="#__codelineno-0-862"> 862</a></span>
<span class="normal"><a href="#__codelineno-0-863"> 863</a></span>
<span class="normal"><a href="#__codelineno-0-864"> 864</a></span>
<span class="normal"><a href="#__codelineno-0-865"> 865</a></span>
<span class="normal"><a href="#__codelineno-0-866"> 866</a></span>
<span class="normal"><a href="#__codelineno-0-867"> 867</a></span>
<span class="normal"><a href="#__codelineno-0-868"> 868</a></span>
<span class="normal"><a href="#__codelineno-0-869"> 869</a></span>
<span class="normal"><a href="#__codelineno-0-870"> 870</a></span>
<span class="normal"><a href="#__codelineno-0-871"> 871</a></span>
<span class="normal"><a href="#__codelineno-0-872"> 872</a></span>
<span class="normal"><a href="#__codelineno-0-873"> 873</a></span>
<span class="normal"><a href="#__codelineno-0-874"> 874</a></span>
<span class="normal"><a href="#__codelineno-0-875"> 875</a></span>
<span class="normal"><a href="#__codelineno-0-876"> 876</a></span>
<span class="normal"><a href="#__codelineno-0-877"> 877</a></span>
<span class="normal"><a href="#__codelineno-0-878"> 878</a></span>
<span class="normal"><a href="#__codelineno-0-879"> 879</a></span>
<span class="normal"><a href="#__codelineno-0-880"> 880</a></span>
<span class="normal"><a href="#__codelineno-0-881"> 881</a></span>
<span class="normal"><a href="#__codelineno-0-882"> 882</a></span>
<span class="normal"><a href="#__codelineno-0-883"> 883</a></span>
<span class="normal"><a href="#__codelineno-0-884"> 884</a></span>
<span class="normal"><a href="#__codelineno-0-885"> 885</a></span>
<span class="normal"><a href="#__codelineno-0-886"> 886</a></span>
<span class="normal"><a href="#__codelineno-0-887"> 887</a></span>
<span class="normal"><a href="#__codelineno-0-888"> 888</a></span>
<span class="normal"><a href="#__codelineno-0-889"> 889</a></span>
<span class="normal"><a href="#__codelineno-0-890"> 890</a></span>
<span class="normal"><a href="#__codelineno-0-891"> 891</a></span>
<span class="normal"><a href="#__codelineno-0-892"> 892</a></span>
<span class="normal"><a href="#__codelineno-0-893"> 893</a></span>
<span class="normal"><a href="#__codelineno-0-894"> 894</a></span>
<span class="normal"><a href="#__codelineno-0-895"> 895</a></span>
<span class="normal"><a href="#__codelineno-0-896"> 896</a></span>
<span class="normal"><a href="#__codelineno-0-897"> 897</a></span>
<span class="normal"><a href="#__codelineno-0-898"> 898</a></span>
<span class="normal"><a href="#__codelineno-0-899"> 899</a></span>
<span class="normal"><a href="#__codelineno-0-900"> 900</a></span>
<span class="normal"><a href="#__codelineno-0-901"> 901</a></span>
<span class="normal"><a href="#__codelineno-0-902"> 902</a></span>
<span class="normal"><a href="#__codelineno-0-903"> 903</a></span>
<span class="normal"><a href="#__codelineno-0-904"> 904</a></span>
<span class="normal"><a href="#__codelineno-0-905"> 905</a></span>
<span class="normal"><a href="#__codelineno-0-906"> 906</a></span>
<span class="normal"><a href="#__codelineno-0-907"> 907</a></span>
<span class="normal"><a href="#__codelineno-0-908"> 908</a></span>
<span class="normal"><a href="#__codelineno-0-909"> 909</a></span>
<span class="normal"><a href="#__codelineno-0-910"> 910</a></span>
<span class="normal"><a href="#__codelineno-0-911"> 911</a></span>
<span class="normal"><a href="#__codelineno-0-912"> 912</a></span>
<span class="normal"><a href="#__codelineno-0-913"> 913</a></span>
<span class="normal"><a href="#__codelineno-0-914"> 914</a></span>
<span class="normal"><a href="#__codelineno-0-915"> 915</a></span>
<span class="normal"><a href="#__codelineno-0-916"> 916</a></span>
<span class="normal"><a href="#__codelineno-0-917"> 917</a></span>
<span class="normal"><a href="#__codelineno-0-918"> 918</a></span>
<span class="normal"><a href="#__codelineno-0-919"> 919</a></span>
<span class="normal"><a href="#__codelineno-0-920"> 920</a></span>
<span class="normal"><a href="#__codelineno-0-921"> 921</a></span>
<span class="normal"><a href="#__codelineno-0-922"> 922</a></span>
<span class="normal"><a href="#__codelineno-0-923"> 923</a></span>
<span class="normal"><a href="#__codelineno-0-924"> 924</a></span>
<span class="normal"><a href="#__codelineno-0-925"> 925</a></span>
<span class="normal"><a href="#__codelineno-0-926"> 926</a></span>
<span class="normal"><a href="#__codelineno-0-927"> 927</a></span>
<span class="normal"><a href="#__codelineno-0-928"> 928</a></span>
<span class="normal"><a href="#__codelineno-0-929"> 929</a></span>
<span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span>
<span class="normal"><a href="#__codelineno-0-1126">1126</a></span>
<span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span>
<span class="normal"><a href="#__codelineno-0-1131">1131</a></span>
<span class="normal"><a href="#__codelineno-0-1132">1132</a></span>
<span class="normal"><a href="#__codelineno-0-1133">1133</a></span>
<span class="normal"><a href="#__codelineno-0-1134">1134</a></span>
<span class="normal"><a href="#__codelineno-0-1135">1135</a></span>
<span class="normal"><a href="#__codelineno-0-1136">1136</a></span>
<span class="normal"><a href="#__codelineno-0-1137">1137</a></span>
<span class="normal"><a href="#__codelineno-0-1138">1138</a></span>
<span class="normal"><a href="#__codelineno-0-1139">1139</a></span>
<span class="normal"><a href="#__codelineno-0-1140">1140</a></span>
<span class="normal"><a href="#__codelineno-0-1141">1141</a></span>
<span class="normal"><a href="#__codelineno-0-1142">1142</a></span>
<span class="normal"><a href="#__codelineno-0-1143">1143</a></span>
<span class="normal"><a href="#__codelineno-0-1144">1144</a></span>
<span class="normal"><a href="#__codelineno-0-1145">1145</a></span>
<span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span>
<span class="normal"><a href="#__codelineno-0-1277">1277</a></span>
<span class="normal"><a href="#__codelineno-0-1278">1278</a></span>
<span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="k">class</span><span class="w"> </span><span class="nc">ColorCode</span><span class="p">:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    Class for constructing a color code circuit and simulating the concatenated MWPM decoder.</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    --------</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    Triangular patch with uniform circuit-level noise of 1e-3:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    &gt;&gt;&gt; from color_code_stim import ColorCode, NoiseModel</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    &gt;&gt;&gt; noise = NoiseModel.uniform_circuit_noise(1e-3)</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    &gt;&gt;&gt; colorcode = ColorCode(d=5, rounds=5, circuit_type=&quot;tri&quot;, noise_model=noise)</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    &gt;&gt;&gt; num_fails, info = colorcode.simulate(shots=10000, full_output=True)</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    See `getting_started.ipynb` for more detailed usage.</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="n">tanner_graph</span><span class="p">:</span> <span class="n">ig</span><span class="o">.</span><span class="n">Graph</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="n">circuit</span><span class="p">:</span> <span class="n">stim</span><span class="o">.</span><span class="n">Circuit</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="n">d</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span class="n">d2</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="n">rounds</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>    <span class="n">circuit_type</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="n">temp_bdry_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="n">cnot_schedule</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="n">num_obs</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="n">qubit_groups</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ig</span><span class="o">.</span><span class="n">VertexSeq</span><span class="p">]</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>    <span class="n">obs_paulis</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PAULI_LABEL</span><span class="p">]</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span class="n">dem_xz</span><span class="p">:</span> <span class="n">stim</span><span class="o">.</span><span class="n">DetectorErrorModel</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="n">H</span><span class="p">:</span> <span class="n">csc_matrix</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="n">probs_xz</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span class="n">obs_matrix</span><span class="p">:</span> <span class="n">csc_matrix</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="n">detector_ids_by_color</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">COLOR_LABEL</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="n">detectors_checks_map</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">ig</span><span class="o">.</span><span class="n">Vertex</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="n">cult_detector_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="n">interface_detector_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="n">dems_decomposed</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">COLOR_LABEL</span><span class="p">,</span> <span class="n">DemDecomp</span><span class="p">]</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="n">perfect_init_final</span><span class="p">:</span> <span class="nb">bool</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="n">noise_model</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;bitflip&quot;</span><span class="p">,</span> <span class="s2">&quot;reset&quot;</span><span class="p">,</span> <span class="s2">&quot;meas&quot;</span><span class="p">,</span> <span class="s2">&quot;cnot&quot;</span><span class="p">,</span> <span class="s2">&quot;idle&quot;</span><span class="p">,</span> <span class="s2">&quot;cult&quot;</span><span class="p">],</span> <span class="nb">float</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="p">]</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="n">comparative_decoding</span><span class="p">:</span> <span class="nb">bool</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="n">exclude_non_essential_pauli_detectors</span><span class="p">:</span> <span class="nb">bool</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="n">cultivation_circuit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">stim</span><span class="o">.</span><span class="n">Circuit</span><span class="p">]</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="n">remove_non_edge_like_errors</span><span class="p">:</span> <span class="nb">bool</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="n">_benchmarking</span><span class="p">:</span> <span class="nb">bool</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="n">_bp_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="n">_dem_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DemManager</span><span class="p">]</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="n">_concat_matching_decoder</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ConcatMatchingDecoder</span><span class="p">]</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="n">_bp_decoder</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BPDecoder</span><span class="p">]</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="n">_belief_concat_matching_decoder</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BeliefConcatMatchingDecoder</span><span class="p">]</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="n">_simulator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Simulator</span><span class="p">]</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span class="n">d</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="n">rounds</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="n">circuit_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;tri&quot;</span><span class="p">,</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="n">d2</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="n">cnot_schedule</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;tri_optimal&quot;</span><span class="p">,</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="n">superdense_circuit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="n">temp_bdry_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>        <span class="n">noise_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NoiseModel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="n">perfect_logical_initialization</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="n">perfect_logical_measurement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">perfect_init_final</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="n">perfect_first_syndrome_extraction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="n">comparative_decoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="n">exclude_non_essential_pauli_detectors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">cultivation_circuit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">stim</span><span class="o">.</span><span class="n">Circuit</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="n">remove_non_edge_like_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="n">shape</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="n">p_bitflip</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="n">p_depol</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="n">p_reset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="n">p_meas</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="n">p_cnot</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span class="n">p_idle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>        <span class="n">p_circuit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="n">p_cult</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="n">_generate_dem</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="n">_decompose_dem</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="n">_benchmarking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="p">):</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">        Class for constructing a color code circuit and simulating the</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">        concatenated MWPM decoder.</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">        Examples</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">        --------</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">        Triangular patch with uniform circuit-level noise of 1e-3:</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">        &gt;&gt;&gt; from color_code_stim import ColorCode, NoiseModel</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">        &gt;&gt;&gt; noise = NoiseModel.uniform_circuit_noise(1e-3)</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">        &gt;&gt;&gt; colorcode = ColorCode(d=5, rounds=5, circuit_type=&quot;tri&quot;, noise_model=noise)</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">        &gt;&gt;&gt; num_fails, info = colorcode.simulate(shots=10000, full_output=True)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">        See `getting_started.ipynb` for more detailed usage.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">        d : int &gt;= 3</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">            Code distance.</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">        rounds : int &gt;= 1</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">            Number of syndrome extraction rounds.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">        circuit_type : {&#39;triangle&#39;, &#39;tri&#39;, &#39;rectangle&#39;, &#39;rec&#39;, &#39;rec_stability&#39;, &#39;growing&#39;, &#39;cult+growing&#39;}, default &#39;tri&#39;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">            Circuit type.</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">            - &#39;triangle&#39;/&#39;tri&#39;: memory experiment of a triangular patch with distance</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">              `d`.</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">            - &#39;rectangle&#39;/&#39;rec&#39;: memory experiment of a rectangular patch with distance</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">              `d` and `d2`.</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">            - &#39;rec_stability&#39;: stability experiment of a rectangle-like patch with</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">              single-type boundaries. `d` and `d2` indicate the size of the patch,</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">              rather than code distances.</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">            - &#39;growing&#39;: growing operation from a triangular patch with distance `d` to</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">              a larger triangular patch with distance `d2`. Must be `d2 &gt; d`.</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">            - &#39;cult+growing&#39;: cultivation on a triangular patch with distance `d`,</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">              followed by a growing operation to distance `d2`. Must be `d2 &gt; d`.</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">        d2 : int &gt;= 3, optional</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">            Second code distance required for circuit types &#39;rec&#39;/&#39;rectangle&#39;, &#39;growing&#39;,</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">            and &#39;cult+growing&#39;. If not provided, `d2 = d` is used.</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">        cnot_schedule : {&#39;tri_optimal&#39;, &#39;tri_optimal_reversed&#39;, &#39;superdense_default&#39;} or list of 12 integers,</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">                        default &#39;tri_optimal&#39;</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">            CNOT schedule.</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">            - List of 12 integers: (a, b, ... l) specifying the CNOT schedule.</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">            - &#39;tri_optimal&#39;: (2, 3, 6, 5, 4, 1, 3, 4, 7, 6, 5, 2), which is the optimal</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">            schedule for the triangular color code.</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="sd">            - &#39;tri_optimal_reversed&#39;: (3, 4, 7, 6, 5, 2, 2, 3, 6, 5, 4, 1),</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="sd">            which has the X- and Z-part reversed from &#39;tri_optimal&#39;.</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="sd">            - &#39;superdense_default&#39;: (3, 1, 2, 3, 1, 2, 6, 4, 5, 6, 4, 5),</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="sd">            which is used for superdense syndrome extraction circuits.</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">        superdense_circuit : bool, default False</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="sd">            Whether to use superdense syndrome extraction circuit. When True, the syndrome</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="sd">            extraction follows a 4-step pattern: (1) X-type anc → Z-type anc CNOTs,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="sd">            (2) data → anc CNOTs with spatial routing, (3) anc → data CNOTs, (4) repeat step 1.</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">            If True and cnot_schedule is &#39;tri_optimal&#39;, it automatically switches to</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">            &#39;superdense_default&#39;.</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">        temp_bdry_type : {&#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;}, optional</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">            Type of the temporal boundaries, i.e., the reset/measurement basis of</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">            data qubits at the beginning and end of the circuit.</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">            Not supported for `rec_stability` and `cult+growing` circuits: the types of</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">            the temporal boundaries are fixed to red for `rec_stability` and `Y` for</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="sd">            `cult+growing`. For the other circuit types, it is `Z` by default.</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">        noise_model : NoiseModel, optional</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">            Noise model specifying error rates for different operations. If provided,</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">            individual noise parameters (p_bitflip, p_depol, etc.) are ignored.</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">            If not provided, a NoiseModel is constructed from individual parameters.</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">        perfect_logical_initialization : bool, default False</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">            Whether logical initialization operations (data qubit reset) are noiseless</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">        perfect_logical_measurement : bool, default False</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">            Whether logical final measurement operations are noiseless</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">        perfect_init_final : bool, default False</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">            If True, sets both perfect_logical_initialization and perfect_logical_measurement</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">            to True.</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">        perfect_first_syndrome_extraction : bool, default False</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">            Whether the first syndrome extraction round is noiseless. Useful when</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">            starting from a perfect logical state (together with</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">            `perfect_logical_initialization=True`).</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">            *Note:* `rounds` still includes this perfect round, so set to `T + 1` where</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">            `T` is the number of actual faulty syndrome extraction rounds you want to consider.</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">        comparative_decoding : bool, default False</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">            Whether to use the comparative decoding technique. If True, observables are</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">            included as additional detectors and decoding can be done by running the</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">            decoder for each logical class and choosing the lowest-weight one. This also</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="sd">            provides the logical gap information, which quantifies the reliability of</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="sd">            decoding.</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">        exclude_non_essential_pauli_detectors : bool, default False</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">            If True and `temp_bdry_type` is not &quot;Y&quot;, detectors with the Pauli type</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">            different from the temporal boundary type (e.g., X-type detectors for</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">            `temp_bdry_type=&quot;Z&quot;`) are excluded from the circuit. This does not affect the</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">            decoding results since X and Z errors are independently decoded in our method</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">            and physical errors with the same pauli type as the temporal boundaries do</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">            not affect the logical values. If `temp_bdry_type=&quot;Y&quot;` or</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">            `circuit_type=&quot;cult+growing&quot;`, both types of detectors are required for decoding,</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">            so this option is ignored.</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">        cultivation_circuit: stim.Circuit, optional</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">            If given, it is used as the cultivation circuit for cultivation + growing</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">            circuit (`circuit_type == &#39;cult+growing&#39;`). WARNING: Its validity is not</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">            checked internally.</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">        remove_non_edge_like_errors: bool, default True</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">            Whether to remove error mechanisms that are not edge-like when decomposing</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">            the detector error model.</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">        Parameters (legacy for backward compatibility)</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">        shape: str, optional</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">            Same as `circuit_type`. If given, prioritized over `circuit_type`.</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">        p_bitflip : float, default 0</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">            Bit-flip noise on every data qubit at the start of each round.</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">        p_depol : float, default 0</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">            Depolarizing noise on every data qubit at the start of each round.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">        p_reset : float, default 0</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">            Error rate for each reset (producing an orthogonal state).</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">        p_meas : float, default 0</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">            Error rate for each measurement (flipped measurement outcome).</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">        p_cnot : float, default 0</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">            Two-qubit depolarizing noise rate for each CNOT gate.</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">        p_idle : float, default 0</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="sd">            Single-qubit depolarizing noise rate for each idle gate.</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">        p_circuit : float, optional</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="sd">            If given, p_reset = p_meas = p_cnot = p_idle = p_circuit.</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">        p_cult : float, optional</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="sd">            Physical error rate during cultivation (only used for &#39;cult+growing&#39;</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">            circuits). If not given, `p_cult = p_cnot` is used.</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="sd">            Ignored if noise_model is provided.</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="c1"># Automatic cnot_schedule selection for superdense circuits</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>        <span class="k">if</span> <span class="n">superdense_circuit</span> <span class="ow">and</span> <span class="n">cnot_schedule</span> <span class="o">==</span> <span class="s2">&quot;tri_optimal&quot;</span><span class="p">:</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>            <span class="n">cnot_schedule</span> <span class="o">=</span> <span class="s2">&quot;superdense_default&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cnot_schedule</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>            <span class="k">if</span> <span class="n">cnot_schedule</span> <span class="ow">in</span> <span class="n">CNOT_SCHEDULES</span><span class="p">:</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>                <span class="n">cnot_schedule</span> <span class="o">=</span> <span class="n">CNOT_SCHEDULES</span><span class="p">[</span><span class="n">cnot_schedule</span><span class="p">]</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid cnot schedule: </span><span class="si">{</span><span class="n">cnot_schedule</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>            <span class="n">cnot_schedule</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cnot_schedule</span><span class="p">)</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">cnot_schedule</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>        <span class="k">assert</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">rounds</span> <span class="o">&gt;=</span> <span class="mi">1</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span class="c1"># Handle noise model: use provided NoiseModel or create from individual parameters</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>        <span class="k">if</span> <span class="n">noise_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>            <span class="c1"># Use provided NoiseModel</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span> <span class="o">=</span> <span class="n">noise_model</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>            <span class="c1"># Create NoiseModel from individual parameters</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span class="k">if</span> <span class="n">p_circuit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>                <span class="n">p_reset</span> <span class="o">=</span> <span class="n">p_meas</span> <span class="o">=</span> <span class="n">p_cnot</span> <span class="o">=</span> <span class="n">p_idle</span> <span class="o">=</span> <span class="n">p_circuit</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>            <span class="c1"># For cult+growing, validate requirements</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>            <span class="k">if</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;cultivation+growing&quot;</span><span class="p">,</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>                <span class="k">if</span> <span class="n">p_circuit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>                        <span class="s2">&quot;p_circuit must be provided for cult+growing circuit type&quot;</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>                    <span class="p">)</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>                <span class="k">if</span> <span class="n">p_bitflip</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>                        <span class="s2">&quot;p_bitflip must be 0 for cult+growing circuit type&quot;</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>                    <span class="p">)</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>            <span class="c1"># Create NoiseModel from individual parameters</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span> <span class="o">=</span> <span class="n">NoiseModel</span><span class="p">(</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>                <span class="n">bitflip</span><span class="o">=</span><span class="n">p_bitflip</span><span class="p">,</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>                <span class="n">depol</span><span class="o">=</span><span class="n">p_depol</span><span class="p">,</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>                <span class="n">reset</span><span class="o">=</span><span class="n">p_reset</span><span class="p">,</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>                <span class="n">meas</span><span class="o">=</span><span class="n">p_meas</span><span class="p">,</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>                <span class="n">cnot</span><span class="o">=</span><span class="n">p_cnot</span><span class="p">,</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>                <span class="n">idle</span><span class="o">=</span><span class="n">p_idle</span><span class="p">,</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>                <span class="n">cult</span><span class="o">=</span><span class="n">p_cult</span><span class="p">,</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>            <span class="p">)</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="n">d2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d2</span> <span class="o">=</span> <span class="n">d</span> <span class="k">if</span> <span class="n">d2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">d2</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rounds</span> <span class="o">=</span> <span class="n">rounds</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>        <span class="k">if</span> <span class="n">shape</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>            <span class="n">circuit_type</span> <span class="o">=</span> <span class="n">shape</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>        <span class="k">if</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;triangle&quot;</span><span class="p">,</span> <span class="s2">&quot;tri&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>            <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;tri&quot;</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="k">elif</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;rectangle&quot;</span><span class="p">,</span> <span class="s2">&quot;rec&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>            <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>            <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;rec&quot;</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span class="k">elif</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>            <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>            <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;rec_stability&quot;</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>        <span class="k">elif</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;growing&quot;</span><span class="p">:</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>            <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>            <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">&gt;</span> <span class="n">d</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;growing&quot;</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>        <span class="k">elif</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;cultivation+growing&quot;</span><span class="p">,</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>            <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>            <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">&gt;</span> <span class="n">d</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;cult+growing&quot;</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid circuit type: </span><span class="si">{</span><span class="n">circuit_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>        <span class="k">if</span> <span class="n">temp_bdry_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>            <span class="k">if</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>                <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="s2">&quot;r&quot;</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>            <span class="k">elif</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">:</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>                <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="s2">&quot;Y&quot;</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>                <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="s2">&quot;Z&quot;</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>            <span class="k">assert</span> <span class="n">temp_bdry_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">}</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>            <span class="k">assert</span> <span class="n">circuit_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;rec_stability&quot;</span><span class="p">,</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">}</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>            <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="n">temp_bdry_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="n">temp_bdry_type</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>        <span class="k">if</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">obs_paulis</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">]</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">obs_paulis</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp_bdry_type</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cnot_schedule</span> <span class="o">=</span> <span class="n">cnot_schedule</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">superdense_circuit</span> <span class="o">=</span> <span class="n">superdense_circuit</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">perfect_init_final</span> <span class="o">=</span> <span class="n">perfect_init_final</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>        <span class="c1"># Handle backward compatibility: perfect_init_final sets both initialization and measurement</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>        <span class="k">if</span> <span class="n">perfect_init_final</span><span class="p">:</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>            <span class="n">perfect_logical_initialization</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>            <span class="n">perfect_logical_measurement</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_initialization</span> <span class="o">=</span> <span class="n">perfect_logical_initialization</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_measurement</span> <span class="o">=</span> <span class="n">perfect_logical_measurement</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">perfect_first_syndrome_extraction</span> <span class="o">=</span> <span class="n">perfect_first_syndrome_extraction</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span> <span class="o">=</span> <span class="n">comparative_decoding</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exclude_non_essential_pauli_detectors</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>            <span class="n">exclude_non_essential_pauli_detectors</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>        <span class="p">)</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">remove_non_edge_like_errors</span> <span class="o">=</span> <span class="n">remove_non_edge_like_errors</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>            <span class="k">raise</span> <span class="ne">NotImplementedError</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">:</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>            <span class="k">if</span> <span class="n">cultivation_circuit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>                <span class="n">cultivation_circuit</span> <span class="o">=</span> <span class="n">_load_cultivation_circuit</span><span class="p">(</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>                    <span class="n">d</span><span class="o">=</span><span class="n">d</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span><span class="p">[</span><span class="s2">&quot;cult&quot;</span><span class="p">]</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>                <span class="p">)</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>            <span class="n">cultivation_circuit</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cultivation_circuit</span> <span class="o">=</span> <span class="n">cultivation_circuit</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_benchmarking</span> <span class="o">=</span> <span class="n">_benchmarking</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>        <span class="c1"># Build Tanner graph using TannerGraphBuilder</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>        <span class="n">graph_builder</span> <span class="o">=</span> <span class="n">TannerGraphBuilder</span><span class="p">(</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>            <span class="n">circuit_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="p">,</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>            <span class="n">d</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>            <span class="n">d2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d2</span><span class="p">,</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>        <span class="p">)</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">qubit_groups</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>        <span class="c1"># Generate circuit using CircuitBuilder</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>        <span class="n">builder</span> <span class="o">=</span> <span class="n">CircuitBuilder</span><span class="p">(</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>            <span class="n">d</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>            <span class="n">d2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d2</span><span class="p">,</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>            <span class="n">rounds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rounds</span><span class="p">,</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>            <span class="n">circuit_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="p">,</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>            <span class="n">cnot_schedule</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cnot_schedule</span><span class="p">,</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>            <span class="n">superdense_circuit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">superdense_circuit</span><span class="p">,</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>            <span class="n">temp_bdry_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_bdry_type</span><span class="p">,</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>            <span class="n">noise_model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span><span class="p">,</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>            <span class="n">perfect_init_final</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_init_final</span><span class="p">,</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>            <span class="n">perfect_logical_initialization</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_initialization</span><span class="p">,</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>            <span class="n">perfect_logical_measurement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_measurement</span><span class="p">,</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>            <span class="n">perfect_first_syndrome_extraction</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_first_syndrome_extraction</span><span class="p">,</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>            <span class="n">tanner_graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="p">,</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>            <span class="n">qubit_groups</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qubit_groups</span><span class="p">,</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>            <span class="n">exclude_non_essential_pauli_detectors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_non_essential_pauli_detectors</span><span class="p">,</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>            <span class="n">cultivation_circuit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cultivation_circuit</span><span class="p">,</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>            <span class="n">comparative_decoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span><span class="p">,</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>        <span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>        <span class="c1"># Initialize DEM manager (lazy loading)</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dem_manager</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_dem</span> <span class="o">=</span> <span class="n">_generate_dem</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_decompose_dem</span> <span class="o">=</span> <span class="n">_decompose_dem</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>        <span class="c1"># Initialize decoders (lazy loading)</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bp_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_belief_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_simulator</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dem_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DemManager</span><span class="p">:</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Detector error model manager for circuit analysis and decomposition.&quot;&quot;&quot;</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dem_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_dem</span><span class="p">:</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_dem_manager</span> <span class="o">=</span> <span class="n">DemManager</span><span class="p">(</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>                    <span class="n">circuit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="p">,</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>                    <span class="n">tanner_graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="p">,</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>                    <span class="n">circuit_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="p">,</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>                    <span class="n">comparative_decoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span><span class="p">,</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>                    <span class="n">remove_non_edge_like_errors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_non_edge_like_errors</span><span class="p">,</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>                <span class="p">)</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>                <span class="c1"># Create a minimal DEM manager for backward compatibility</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>                <span class="c1"># when _generate_dem is False</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;DEM generation is disabled&quot;</span><span class="p">)</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dem_manager</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>    <span class="c1"># Property delegation for backward compatibility</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dem_xz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">stim</span><span class="o">.</span><span class="n">DetectorErrorModel</span><span class="p">:</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Detector error model with X and Z parts separated.&quot;&quot;&quot;</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">dem_xz</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">H</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">csc_matrix</span><span class="p">:</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parity check matrix derived from the detector error model.&quot;&quot;&quot;</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">H</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">obs_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">csc_matrix</span><span class="p">:</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Logical observable matrix derived from the detector error model.&quot;&quot;&quot;</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">obs_matrix</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">probs_xz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Probability values for each error mechanism in the detector error model.&quot;&quot;&quot;</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">probs_xz</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">detector_ids_by_color</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">COLOR_LABEL</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Mapping of color labels (&#39;r&#39;, &#39;g&#39;, &#39;b&#39;) to their corresponding detector IDs.&quot;&quot;&quot;</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">detector_ids_by_color</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cult_detector_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of detector IDs associated with cultivation operations.&quot;&quot;&quot;</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">cult_detector_ids</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">interface_detector_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of detector IDs at the interface between cultivation and growing regions.&quot;&quot;&quot;</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">interface_detector_ids</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">detectors_checks_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">ig</span><span class="o">.</span><span class="n">Vertex</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Mapping from detector IDs to their corresponding ancilla qubits and rounds.&quot;&quot;&quot;</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">detectors_checks_map</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dems_decomposed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">COLOR_LABEL</span><span class="p">,</span> <span class="n">DemDecomp</span><span class="p">]:</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Color-decomposed detector error models for individual MWPM decoding.&quot;&quot;&quot;</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">dems_decomposed</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">concat_matching_decoder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConcatMatchingDecoder</span><span class="p">:</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Concatenated MWPM decoder.&quot;&quot;&quot;</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_concat_matching_decoder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_concat_matching_decoder</span> <span class="o">=</span> <span class="n">ConcatMatchingDecoder</span><span class="p">(</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>                <span class="n">dem_manager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="p">,</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>            <span class="p">)</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_concat_matching_decoder</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bp_decoder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BPDecoder</span><span class="p">:</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Belief propagation decoder.&quot;&quot;&quot;</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bp_decoder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_bp_decoder</span> <span class="o">=</span> <span class="n">BPDecoder</span><span class="p">(</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>                <span class="n">dem_manager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="p">,</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>                <span class="n">cache_inputs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>            <span class="p">)</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bp_decoder</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">belief_concat_matching_decoder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BeliefConcatMatchingDecoder</span><span class="p">:</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;BP + ConcatMWPM decoder.&quot;&quot;&quot;</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_belief_concat_matching_decoder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_belief_concat_matching_decoder</span> <span class="o">=</span> <span class="n">BeliefConcatMatchingDecoder</span><span class="p">(</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>                <span class="n">dem_manager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="p">,</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>                <span class="n">bp_cache_inputs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>            <span class="p">)</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_belief_concat_matching_decoder</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">simulator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Simulator</span><span class="p">:</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Quantum circuit simulator for sampling detector and observable outcomes.&quot;&quot;&quot;</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_simulator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_simulator</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>                <span class="n">circuit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="p">,</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>                <span class="n">circuit_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="p">,</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>            <span class="p">)</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_simulator</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_detector_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">detector_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PAULI_LABEL</span><span class="p">,</span> <span class="n">COLOR_LABEL</span><span class="p">]:</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">        Get the Pauli and color type of a detector.</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="sd">        detector_id : int</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a><span class="sd">            Detector ID to query</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a><span class="sd">        -------</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">        pauli : PAULI_LABEL</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="sd">            Pauli type of the detector (&#39;X&#39;, &#39;Y&#39;, or &#39;Z&#39;)</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">        color : COLOR_LABEL</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">            Color of the detector (&#39;r&#39;, &#39;g&#39;, or &#39;b&#39;)</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>        <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">get_detector_coordinates</span><span class="p">(</span><span class="n">only</span><span class="o">=</span><span class="p">[</span><span class="n">detector_id</span><span class="p">])[</span><span class="n">detector_id</span><span class="p">]</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>        <span class="n">pauli</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>        <span class="k">if</span> <span class="n">pauli</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>            <span class="n">pauli</span> <span class="o">=</span> <span class="s2">&quot;X&quot;</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>        <span class="k">elif</span> <span class="n">pauli</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>            <span class="n">pauli</span> <span class="o">=</span> <span class="s2">&quot;Y&quot;</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>        <span class="k">elif</span> <span class="n">pauli</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>            <span class="n">pauli</span> <span class="o">=</span> <span class="s2">&quot;Z&quot;</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid pauli: </span><span class="si">{</span><span class="n">pauli</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>        <span class="n">color</span> <span class="o">=</span> <span class="n">color_val_to_color</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>        <span class="k">return</span> <span class="n">pauli</span><span class="p">,</span> <span class="n">color</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_observable_pauli</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observable_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PAULI_LABEL</span><span class="p">:</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">        Get the Pauli type of an observable.</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="sd">        observable_id : int</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="sd">            Observable ID to query</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a><span class="sd">        -------</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="sd">        PAULI_LABEL</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="sd">            Pauli type of the observable</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obs_paulis</span><span class="p">[</span><span class="n">observable_id</span><span class="p">]</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_decomposed_dems</span><span class="p">(</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="n">COLOR_LABEL</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">stim</span><span class="o">.</span><span class="n">DetectorErrorModel</span><span class="p">,</span> <span class="n">stim</span><span class="o">.</span><span class="n">DetectorErrorModel</span><span class="p">]:</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="sd">        Get decomposed detector error models for a specific color.</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">        color : COLOR_LABEL</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="sd">            Color (&#39;r&#39;, &#39;g&#39;, or &#39;b&#39;) for which to get decomposed DEMs</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">        -------</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">        tuple</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">            (dem1, dem2) - Stage 1 and stage 2 detector error models</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">get_decomposed_dems</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">draw_lattice</span><span class="p">(</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>        <span class="n">ax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>        <span class="n">show_axes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>        <span class="n">highlight_qubits</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>            <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>        <span class="n">highlight_qubits2</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>            <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>        <span class="n">highlight_faces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>            <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">:</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">        Draws the color code lattice.</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="sd">        ax : matplotlib.axes.Axes, optional</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">            The axis on which to draw the graph. If None, a new figure and</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">            axis will be created.</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">        show_axes : bool, default False</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="sd">            Whether to show the x- and y-axis.</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">        highlight_qubits : list[int] | list[tuple] | list[str] | np.ndarray, optional</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a><span class="sd">            Data qubits to highlight with orange triangles (by default).</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a><span class="sd">            Can be a list of data qubit indices (ordered by code.vs.select(pauli=None)),</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="sd">            a list of coordinate tuples [(x, y), ...], or a list of qubit names [&#39;x-y&#39;, ...].</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">        highlight_qubits2 : list[int] | list[tuple] | list[str] | np.ndarray, optional</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="sd">            Data qubits to highlight with purple rectangles (by default).</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="sd">            Format is the same as highlight_qubits.</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a><span class="sd">        highlight_faces : list[int] | list[tuple] | list[str] | np.ndarray, optional</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a><span class="sd">            Z ancillary qubits whose corresponding faces should be highlighted.</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a><span class="sd">            Can be a list of Z ancillary qubit indices (ordered by code.vs.select(pauli=&quot;Z&quot;)),</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a><span class="sd">            a list of coordinate tuples [(x, y), ...], or a list of qubit names [&#39;x-y&#39;, ...].</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a><span class="sd">            Note that for names, the actual stored name includes a &#39;-Z&#39; suffix.</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a><span class="sd">        edge_color : str, default &#39;black&#39;</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a><span class="sd">            Colors for edges.</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a><span class="sd">        edge_linewidth : float, default 1.0</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a><span class="sd">            Linewidth for edges.</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a><span class="sd">        face_lightness : float, default 0.3</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a><span class="sd">            Controls the lightness of face colors. Lower values make colors lighter.</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="sd">        show_data_qubits : bool, default True</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="sd">            Whether to draw circles representing data qubits.</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="sd">        data_qubit_color : str, default &#39;black&#39;</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a><span class="sd">            Color for the data qubit circles (if shown).</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a><span class="sd">        data_qubit_size : float, default 5.0</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a><span class="sd">            Size for the data qubit circles (if shown).</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="sd">        highlight_qubit_color : str, default &#39;orange&#39;</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a><span class="sd">            The color used to highlight qubits in `highlight_qubits`.</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a><span class="sd">        highlight_qubit_color2 : str, default &#39;purple&#39;</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a><span class="sd">            The color used to highlight qubits in `highlight_qubits2`.</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a><span class="sd">        highlight_qubit_marker : str, default &#39;^&#39; (triangle)</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a><span class="sd">            The marker used to highlight qubits in `highlight_qubits`.</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="sd">        highlight_qubit_marker2 : str, default &#39;s&#39; (square)</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="sd">            The marker used to highlight qubits in `highlight_qubits2`.</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">        highlight_face_lightness : float, default 1.0</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="sd">            Controls the lightness of the highlighted faces.</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">        -------</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">        matplotlib.axes.Axes</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">            The axis containing the drawn lattice visualization.</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>        <span class="k">return</span> <span class="n">draw_lattice</span><span class="p">(</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a>            <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>            <span class="n">show_axes</span><span class="o">=</span><span class="n">show_axes</span><span class="p">,</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>            <span class="n">highlight_qubits</span><span class="o">=</span><span class="n">highlight_qubits</span><span class="p">,</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>            <span class="n">highlight_qubits2</span><span class="o">=</span><span class="n">highlight_qubits2</span><span class="p">,</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>            <span class="n">highlight_faces</span><span class="o">=</span><span class="n">highlight_faces</span><span class="p">,</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>        <span class="p">)</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">draw_tanner_graph</span><span class="p">(</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>        <span class="n">ax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>        <span class="n">show_axes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>        <span class="n">show_lattice</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>        <span class="n">pauli</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">:</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">        Draw the tanner graph of the code.</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="sd">        ax : matplotlib.axes.Axes, optional</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">            The axis on which to draw the graph. If None, a new figure and axis will be created.</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="sd">        show_axes : bool, default False</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">            Whether to show the x- and y-axis.</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">        show_lattice : bool, default False</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">            Whether to show the lattice edges in addition to the tanner graph edges.</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">        pauli: Literal[&quot;Z&quot;, &quot;X&quot;, &quot;both&quot;], default &quot;X&quot;</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">            Pauli type of ancillary qubits to include in the graph.</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a><span class="sd">        **kwargs : dict</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">            Additional keyword arguments to pass to igraph.plot.</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">        -------</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="sd">        matplotlib.axes.Axes</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">            The axis containing the drawn graph.</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>        <span class="k">return</span> <span class="n">draw_tanner_graph</span><span class="p">(</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>            <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>            <span class="n">show_axes</span><span class="o">=</span><span class="n">show_axes</span><span class="p">,</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>            <span class="n">show_lattice</span><span class="o">=</span><span class="n">show_lattice</span><span class="p">,</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>            <span class="n">pauli</span><span class="o">=</span><span class="n">pauli</span><span class="p">,</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>        <span class="p">)</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_detector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">detector_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">ig</span><span class="o">.</span><span class="n">Vertex</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a><span class="sd">        Get the ancillary qubit and round corresponding to a detector from a</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="sd">        given detector ID.</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="sd">        detector_id : int</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="sd">            Detector ID.</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a><span class="sd">        -------</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="sd">        anc : ig.Vertex</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="sd">            Ancillary qubit involved in the detector.</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a><span class="sd">        round : int</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">            Round that the detector belongs to.</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">detectors_checks_map</span><span class="p">[</span><span class="n">detector_id</span><span class="p">]</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detector ID </span><span class="si">{</span><span class="n">detector_id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">errors_to_qubits</span><span class="p">(</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>        <span class="n">errors</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="sd">        Convert errors (generated by `sample_with_errors`) or error predictions</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">        (generated by decoders) into the corresponding data qubit indices.</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="sd">        Available only for `tri` and `rec` circuit types with `rounds=1` under</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a><span class="sd">        bit-flip noise (i.e., probabilities besides `p_bitflip` are 0).</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">        Note: Errors and error predictions from `sample_with_errors` or decoders</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="sd">        follow the ordering of error mechanisms in the circuit&#39;s detector error model</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="sd">        (`circuit.detector_error_model()`). This function is necessary because this</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">        ordering differs from the data qubit ordering in the tanner graph</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a><span class="sd">        (`tanner_graph.vs.select(pauli=None)`). This conversion is especially helpful</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a><span class="sd">        when visualizing errors or error predictions on the lattice.</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a><span class="sd">        errors : 2D numpy array of bool</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="sd">            Errors following the ordering of error mechanisms in the DEM of the circuit</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a><span class="sd">            `circuit.detector_error_model()`.</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="sd">        -------</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">        errors_qubits : 2D numpy array of bool</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="sd">            Errors following the ordering of data qubits in the tanner graph</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">            `tanner_graph.vs.select(pauli=None)`.</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;tri&quot;</span><span class="p">,</span> <span class="s2">&quot;rec&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>                <span class="sa">f</span><span class="s1">&#39;errors_to_qubits is not available for &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="si">}</span><span class="s1">&quot; circuit type.&#39;</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>            <span class="p">)</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rounds</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>                <span class="s2">&quot;errors_to_qubits is only available when rounds = 1.&quot;</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>            <span class="p">)</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">prob</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">prob</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;bitflip&quot;</span><span class="p">):</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>                <span class="s2">&quot;errors_to_qubits is only available under bit-flip noise &quot;</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>                <span class="s2">&quot;(only p_bitflip is nonzero).&quot;</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>            <span class="p">)</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>        <span class="c1"># set of ancillary qubits - data qubit mapping</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>        <span class="n">anc_qids_to_data_qubit_idx</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>        <span class="n">data_qubits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pauli</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>        <span class="k">for</span> <span class="n">i_dq</span><span class="p">,</span> <span class="n">data_qubit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_qubits</span><span class="p">):</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>            <span class="n">data_qubit</span><span class="p">:</span> <span class="n">ig</span><span class="o">.</span><span class="n">Vertex</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>            <span class="n">connected_anc_qubits</span> <span class="o">=</span> <span class="n">data_qubit</span><span class="o">.</span><span class="n">neighbors</span><span class="p">()</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>            <span class="n">connected_anc_qubits</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>                <span class="n">q</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">connected_anc_qubits</span> <span class="k">if</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;pauli&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Z&quot;</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>            <span class="p">]</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>            <span class="n">key</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">connected_anc_qubits</span><span class="p">)</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>            <span class="k">assert</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">anc_qids_to_data_qubit_idx</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>            <span class="n">anc_qids_to_data_qubit_idx</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_dq</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>        <span class="c1"># data qubit mapping - error mechanism in DEM</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>        <span class="n">dem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">detector_error_model</span><span class="p">()</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>        <span class="n">data_qubit_idx_to_em</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_qubits</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;int32&quot;</span><span class="p">)</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>        <span class="k">for</span> <span class="n">i_em</span><span class="p">,</span> <span class="n">em</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dem</span><span class="p">):</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>            <span class="k">if</span> <span class="n">em</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>                <span class="n">det_ids</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>                    <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>                    <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">em</span><span class="o">.</span><span class="n">targets_copy</span><span class="p">()</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>                    <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">is_relative_detector_id</span><span class="p">()</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>                <span class="p">]</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>                <span class="n">anc_qids</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">get_detector</span><span class="p">(</span><span class="n">det_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>                    <span class="k">for</span> <span class="n">det_id</span> <span class="ow">in</span> <span class="n">det_ids</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>                    <span class="k">if</span> <span class="n">det_id</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detectors_checks_map</span><span class="p">)</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a>                <span class="p">]</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>                <span class="n">anc_qids</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">anc_qids</span><span class="p">)</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>                <span class="n">data_qubit_idx</span> <span class="o">=</span> <span class="n">anc_qids_to_data_qubit_idx</span><span class="p">[</span><span class="n">anc_qids</span><span class="p">]</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>                <span class="k">if</span> <span class="n">data_qubit_idx_to_em</span><span class="p">[</span><span class="n">data_qubit_idx</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>                        <span class="sa">f</span><span class="s2">&quot;Data qubit </span><span class="si">{</span><span class="n">data_qubit_idx</span><span class="si">}</span><span class="s2"> is mapped to multiple error mechanisms: </span><span class="si">{</span><span class="n">data_qubit_idx_to_em</span><span class="p">[</span><span class="n">data_qubit_idx</span><span class="p">]</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">i_em</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>                    <span class="p">)</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>                <span class="n">data_qubit_idx_to_em</span><span class="p">[</span><span class="n">data_qubit_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_em</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>        <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">data_qubit_idx_to_em</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>        <span class="k">return</span> <span class="n">errors</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">data_qubit_idx_to_em</span><span class="p">]</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">decode_bp</span><span class="p">(</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>        <span class="n">detector_outcomes</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>        <span class="n">max_iter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>    <span class="p">):</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="sd">        Decode detector outcomes using belief propagation.</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a><span class="sd">        This method delegates to the BPDecoder while maintaining backward compatibility</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a><span class="sd">        with the _bp_inputs caching mechanism for integration with pre-decoding.</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">        detector_outcomes : np.ndarray</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="sd">            1D or 2D array of detector measurement outcomes to decode.</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="sd">        max_iter : int</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">            Maximum number of belief propagation iterations to perform.</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="sd">        **kwargs</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="sd">            Additional keyword arguments to pass to the BpDecoder constructor.</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">        -------</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="sd">        pred : np.ndarray</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="sd">            Predicted error pattern.</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="sd">        llrs : np.ndarray</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="sd">            Log probability ratios for each bit in the predicted error pattern.</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">        converge : bool</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="sd">            Whether the belief propagation algorithm converged within max_iter iterations.</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>        <span class="c1"># Update _bp_inputs cache for compatibility with pre-decoding integration</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span><span class="p">:</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span><span class="p">:</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a>                <span class="n">dem</span> <span class="o">=</span> <span class="n">remove_obs_from_dem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dem_xz</span><span class="p">)</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>                <span class="n">dem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_xz</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a>            <span class="n">H</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">dem_to_parity_check</span><span class="p">(</span><span class="n">dem</span><span class="p">)</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span><span class="p">[</span><span class="s2">&quot;H&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">H</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span><span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a>        <span class="c1"># Delegate to BP decoder</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bp_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">detector_outcomes</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="n">max_iter</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">decode</span><span class="p">(</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a>        <span class="n">detector_outcomes</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a>        <span class="n">colors</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>        <span class="n">logical_value</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>        <span class="n">bp_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a>        <span class="n">bp_prms</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>        <span class="n">erasure_matcher_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>        <span class="n">partial_correction_by_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a>        <span class="n">full_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a>        <span class="n">check_validity</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">        Decode detector outcomes using concatenated MWPM decoding.</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="sd">        This method delegates to the ConcatMatchingDecoder while preserving backward</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="sd">        compatibility and handling BP pre-decoding integration.</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a><span class="sd">        detector_outcomes : 1D or 2D array-like of bool</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="sd">            Array of input detector outcomes for one or multiple samples.</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="sd">            If 1D, it is interpreted as a single sample.</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="sd">            If 2D, each row corresponds to a sample and each column corresponds to a</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="sd">            detector. detector_outcomes[i, j] is True if and only if the detector with</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="sd">            id j in the ith sample has the outcome −1.</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="sd">        colors : str or list of str, default &#39;all&#39;</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">            Colors to use for decoding. Can be &#39;all&#39;, one of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;},</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="sd">            or a list containing any combination of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;}.</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">        logical_value : bool or 1D array-like of bool, optional</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">            Logical value(s) to use for decoding. If None, all possible logical value</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="sd">            combinations (i.e., logical classes) will be tried and the one with minimum</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="sd">            weight will be selected.</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a><span class="sd">        bp_predecoding : bool, default False</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><span class="sd">            Whether to use belief propagation as a pre-decoding step.</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="sd">        bp_prms : dict, default None</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="sd">            Parameters for the belief propagation decoder.</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="sd">        erasure_matcher_predecoding : bool, default False</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a><span class="sd">            Whether to use erasure matcher as a pre-decoding step.</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">        partial_correction_by_predecoding : bool, default False</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="sd">            Whether to use the prediction from the erasure matcher predecoding as a</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="sd">            partial correction for the second round of decoding, in the case that the predecoding fails to find a valid prediction.</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a><span class="sd">        full_output : bool, default False</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a><span class="sd">            Whether to return extra information about the decoding process.</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><span class="sd">        check_validity : bool, default False</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a><span class="sd">            Whether to check the validity of the predicted error patterns.</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="sd">        verbose : bool, default False</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="sd">            Whether to print additional information during decoding.</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="sd">        -------</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">        obs_preds : 1D or 2D numpy array of bool</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a><span class="sd">            Predicted observables. It is 1D if there is only one observable and</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">            2D if otherwise. obs_preds[i] or obs_preds[i,j] is True if and only</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="sd">            if the j-th observable (j=0 when 1D) of the i-th sample is</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">            predicted to be -1.</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a><span class="sd">        extra_outputs : dict, only when full_output is True</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="sd">            Dictionary containing additional decoding outputs.</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a>        <span class="c1"># Handle BP pre-decoding by delegating to BeliefConcatMatchingDecoder</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>        <span class="k">if</span> <span class="n">bp_predecoding</span><span class="p">:</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">belief_concat_matching_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>                <span class="n">detector_outcomes</span><span class="o">=</span><span class="n">detector_outcomes</span><span class="p">,</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>                <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>                <span class="n">logical_value</span><span class="o">=</span><span class="n">logical_value</span><span class="p">,</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a>                <span class="n">bp_prms</span><span class="o">=</span><span class="n">bp_prms</span><span class="p">,</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a>                <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="n">erasure_matcher_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a>                <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="n">partial_correction_by_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a>                <span class="n">full_output</span><span class="o">=</span><span class="n">full_output</span><span class="p">,</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a>                <span class="n">check_validity</span><span class="o">=</span><span class="n">check_validity</span><span class="p">,</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a>                <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>            <span class="p">)</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a>        <span class="c1"># Delegate to ConcatMatchingDecoder for standard decoding</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">concat_matching_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a>            <span class="n">detector_outcomes</span><span class="o">=</span><span class="n">detector_outcomes</span><span class="p">,</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>            <span class="n">logical_value</span><span class="o">=</span><span class="n">logical_value</span><span class="p">,</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>            <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="n">erasure_matcher_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>            <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="n">partial_correction_by_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>            <span class="n">full_output</span><span class="o">=</span><span class="n">full_output</span><span class="p">,</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>            <span class="n">check_validity</span><span class="o">=</span><span class="n">check_validity</span><span class="p">,</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a>        <span class="p">)</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sample</span><span class="p">(</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">shots</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a><span class="sd">        Sample detector outcomes and observables from the quantum circuit.</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a><span class="sd">        shots : int</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a><span class="sd">            Number of samples to generate</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a><span class="sd">        seed : int, optional</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a><span class="sd">            Seed value to initialize the random number generator</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a><span class="sd">        -------</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="sd">        det : 2D numpy array of bool</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a><span class="sd">            Detector outcomes. det[i,j] is True if and only if the detector</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a><span class="sd">            with id j in the i-th sample has an outcome of −1.</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a><span class="sd">        obs : 1D or 2D numpy array of bool</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a><span class="sd">            Observable outcomes. If there is only one observable, returns a 1D array;</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a><span class="sd">            otherwise returns a 2D array. obs[i] or obs[i,j] is True if and only if</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a><span class="sd">            the j-th observable (j=0 when 1D) of the i-th sample has an outcome of -1.</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sample_with_errors</span><span class="p">(</span>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>        <span class="n">shots</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a><span class="sd">        Sample detector outcomes, observables, and errors from the quantum circuit.</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><span class="sd">        shots : int</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="sd">            Number of samples to generate</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="sd">        seed : int, optional</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="sd">            Seed value to initialize the random number generator</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="sd">        -------</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><span class="sd">        det : 2D numpy array of bool</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a><span class="sd">            Detector outcomes. det[i,j] is True if and only if the detector</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a><span class="sd">            with id j in the i-th sample has an outcome of −1.</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="sd">        obs : 1D or 2D numpy array of bool</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a><span class="sd">            Observable outcomes. If there is only one observable, returns a 1D array;</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a><span class="sd">            otherwise returns a 2D array. obs[i] or obs[i,j] is True if and only if</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><span class="sd">            the j-th observable (j=0 when 1D) of the i-th sample has an outcome of -1.</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="sd">        errors : 2D numpy array of bool</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><span class="sd">            Errors sampled from the quantum circuit. errors[i,j] is True if and only if</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a><span class="sd">            the j-th error (in the DEM) of the i-th sample has an outcome of -1.</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">sample_with_errors</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">simulate</span><span class="p">(</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>        <span class="n">shots</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a>        <span class="n">bp_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>        <span class="n">bp_prms</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>        <span class="n">erasure_matcher_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>        <span class="n">partial_correction_by_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>        <span class="n">colors</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>        <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>        <span class="n">confint_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;wilson&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>        <span class="n">full_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a><span class="sd">        Monte-Carlo simulation of the concatenated MWPM decoder. Delegated to simulator.</span>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a><span class="sd">        shots : int</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a><span class="sd">            Number of shots to simulate.</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a><span class="sd">        bp_predecoding : bool, default False</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a><span class="sd">            If True, use belief propagation for predecoding.</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a><span class="sd">        bp_prms : dict | None, default None</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a><span class="sd">            Parameters for belief propagation predecoding.</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a><span class="sd">        erasure_matcher_predecoding : bool, default False</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a><span class="sd">            If True, use erasure matcher predecoding to identify errors common to all colors.</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a><span class="sd">        partial_correction_by_predecoding : bool, default False</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a><span class="sd">            If True, apply partial correction using predecoding results when erasure matcher predecoding fails.</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a><span class="sd">        colors : Union[List[str], str], default &#39;all&#39;</span>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a><span class="sd">            Colors of the sub-decoding procedures to consider. Can be &#39;all&#39;, one of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;},</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><span class="sd">            or a list containing any combination of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;}.</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a><span class="sd">        alpha : float, default 0.01</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a><span class="sd">            Significance level for the confidence interval calculation.</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a><span class="sd">        confint_method : str, default &#39;wilson&#39;</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a><span class="sd">            Method to calculate the confidence interval.</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a><span class="sd">            See statsmodels.stats.proportion.proportion_confint for available options.</span>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a><span class="sd">        full_output: bool = False,</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a><span class="sd">            If True, return additional information.</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a><span class="sd">        seed : Optional[int], default None</span>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><span class="sd">            Seed to initialize the random number generator.</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a><span class="sd">        verbose : bool, default False</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a><span class="sd">            If True, print progress information during simulation.</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a><span class="sd">        **kwargs :</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a><span class="sd">            Additional keyword arguments for the decoder (see `ColorCode.decode()`).</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a><span class="sd">        -------</span>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><span class="sd">        num_fails : numpy.ndarray</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a><span class="sd">            Number of failures for each observable.</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><span class="sd">        extra_outputs : dict, optional</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a><span class="sd">            Dictionary containing additional information:</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><span class="sd">            - &#39;stats&#39;: Tuple of (pfail, delta_pfail) where pfail is the estimated failure rate</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><span class="sd">              and delta_pfail is the half-width of the confidence interval</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a><span class="sd">            - &#39;fails&#39;: Boolean array indicating which samples failed</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><span class="sd">            - &#39;logical_gaps&#39;: Array of logical gaps (only when self.logical_gap is True)</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><span class="sd">            - etc.</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>        <span class="c1"># Create decoder function for simulator</span>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">decoder_func</span><span class="p">(</span><span class="n">detector_outcomes</span><span class="p">,</span> <span class="o">**</span><span class="n">decode_kwargs</span><span class="p">):</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a>                <span class="n">detector_outcomes</span><span class="p">,</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a>                <span class="n">bp_predecoding</span><span class="o">=</span><span class="n">bp_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a>                <span class="n">bp_prms</span><span class="o">=</span><span class="n">bp_prms</span><span class="p">,</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a>                <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="n">erasure_matcher_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a>                <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="n">partial_correction_by_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a>                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>  <span class="c1"># Original kwargs from simulate</span>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a>                <span class="o">**</span><span class="n">decode_kwargs</span><span class="p">,</span>  <span class="c1"># Additional kwargs from simulator</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a>            <span class="p">)</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a>        <span class="c1"># Delegate to simulator</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span>
<a id="__codelineno-0-1104" name="__codelineno-0-1104"></a>            <span class="n">shots</span><span class="o">=</span><span class="n">shots</span><span class="p">,</span>
<a id="__codelineno-0-1105" name="__codelineno-0-1105"></a>            <span class="n">decoder_func</span><span class="o">=</span><span class="n">decoder_func</span><span class="p">,</span>
<a id="__codelineno-0-1106" name="__codelineno-0-1106"></a>            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
<a id="__codelineno-0-1107" name="__codelineno-0-1107"></a>            <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span>
<a id="__codelineno-0-1108" name="__codelineno-0-1108"></a>            <span class="n">confint_method</span><span class="o">=</span><span class="n">confint_method</span><span class="p">,</span>
<a id="__codelineno-0-1109" name="__codelineno-0-1109"></a>            <span class="n">full_output</span><span class="o">=</span><span class="n">full_output</span><span class="p">,</span>
<a id="__codelineno-0-1110" name="__codelineno-0-1110"></a>            <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
<a id="__codelineno-0-1111" name="__codelineno-0-1111"></a>            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-1112" name="__codelineno-0-1112"></a>        <span class="p">)</span>
<a id="__codelineno-0-1113" name="__codelineno-0-1113"></a>
<a id="__codelineno-0-1114" name="__codelineno-0-1114"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-1115" name="__codelineno-0-1115"></a>
<a id="__codelineno-0-1116" name="__codelineno-0-1116"></a>    <span class="c1"># ----- Save/Load Methods -----</span>
<a id="__codelineno-0-1117" name="__codelineno-0-1117"></a>
<a id="__codelineno-0-1118" name="__codelineno-0-1118"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_test_attribute_picklability</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<a id="__codelineno-0-1119" name="__codelineno-0-1119"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1120" name="__codelineno-0-1120"></a><span class="sd">        Test which attributes are picklable and which are not.</span>
<a id="__codelineno-0-1121" name="__codelineno-0-1121"></a>
<a id="__codelineno-0-1122" name="__codelineno-0-1122"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-1123" name="__codelineno-0-1123"></a><span class="sd">        -------</span>
<a id="__codelineno-0-1124" name="__codelineno-0-1124"></a><span class="sd">        picklable : List[str]</span>
<a id="__codelineno-0-1125" name="__codelineno-0-1125"></a><span class="sd">            List of attribute names that can be pickled</span>
<a id="__codelineno-0-1126" name="__codelineno-0-1126"></a><span class="sd">        non_picklable : List[str]</span>
<a id="__codelineno-0-1127" name="__codelineno-0-1127"></a><span class="sd">            List of attribute names that cannot be pickled</span>
<a id="__codelineno-0-1128" name="__codelineno-0-1128"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1129" name="__codelineno-0-1129"></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>
<a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">io</span>
<a id="__codelineno-0-1131" name="__codelineno-0-1131"></a>
<a id="__codelineno-0-1132" name="__codelineno-0-1132"></a>        <span class="n">picklable</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1133" name="__codelineno-0-1133"></a>        <span class="n">non_picklable</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1134" name="__codelineno-0-1134"></a>
<a id="__codelineno-0-1135" name="__codelineno-0-1135"></a>        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-1136" name="__codelineno-0-1136"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1137" name="__codelineno-0-1137"></a>                <span class="c1"># Try to pickle the attribute</span>
<a id="__codelineno-0-1138" name="__codelineno-0-1138"></a>                <span class="n">buffer</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
<a id="__codelineno-0-1139" name="__codelineno-0-1139"></a>                <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">attr_value</span><span class="p">,</span> <span class="n">buffer</span><span class="p">)</span>
<a id="__codelineno-0-1140" name="__codelineno-0-1140"></a>                <span class="n">picklable</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>
<a id="__codelineno-0-1141" name="__codelineno-0-1141"></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<a id="__codelineno-0-1142" name="__codelineno-0-1142"></a>                <span class="n">non_picklable</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>
<a id="__codelineno-0-1143" name="__codelineno-0-1143"></a>
<a id="__codelineno-0-1144" name="__codelineno-0-1144"></a>        <span class="k">return</span> <span class="n">picklable</span><span class="p">,</span> <span class="n">non_picklable</span>
<a id="__codelineno-0-1145" name="__codelineno-0-1145"></a>
<a id="__codelineno-0-1146" name="__codelineno-0-1146"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1147" name="__codelineno-0-1147"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1148" name="__codelineno-0-1148"></a><span class="sd">        Save the ColorCode object to a file using pickle.</span>
<a id="__codelineno-0-1149" name="__codelineno-0-1149"></a>
<a id="__codelineno-0-1150" name="__codelineno-0-1150"></a><span class="sd">        Automatically identifies and excludes non-picklable attributes such as igraph objects,</span>
<a id="__codelineno-0-1151" name="__codelineno-0-1151"></a><span class="sd">        complex decoder objects, and lazy-loaded managers. These will be reconstructed upon loading.</span>
<a id="__codelineno-0-1152" name="__codelineno-0-1152"></a>
<a id="__codelineno-0-1153" name="__codelineno-0-1153"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-1154" name="__codelineno-0-1154"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-1155" name="__codelineno-0-1155"></a><span class="sd">        path : str</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a><span class="sd">            The file path where the object should be saved.</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a>        <span class="c1"># Known non-picklable attributes based on modular architecture</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a>        <span class="n">known_non_picklable</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a>            <span class="c1"># igraph objects</span>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a>            <span class="s2">&quot;tanner_graph&quot;</span><span class="p">,</span>  <span class="c1"># igraph.Graph</span>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a>            <span class="s2">&quot;qubit_groups&quot;</span><span class="p">,</span>  <span class="c1"># Dict[str, ig.VertexSeq]</span>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a>            <span class="c1"># Complex manager and decoder objects (lazy-loaded)</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a>            <span class="s2">&quot;_dem_manager&quot;</span><span class="p">,</span>  <span class="c1"># DemManager with igraph references</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>            <span class="s2">&quot;_concat_matching_decoder&quot;</span><span class="p">,</span>  <span class="c1"># ConcatMatchingDecoder</span>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a>            <span class="s2">&quot;_bp_decoder&quot;</span><span class="p">,</span>  <span class="c1"># BPDecoder</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a>            <span class="s2">&quot;_belief_concat_matching_decoder&quot;</span><span class="p">,</span>  <span class="c1"># BeliefConcatMatchingDecoder</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a>            <span class="s2">&quot;_simulator&quot;</span><span class="p">,</span>  <span class="c1"># Simulator</span>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>            <span class="c1"># Cache that should be reconstructed</span>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a>            <span class="s2">&quot;_bp_inputs&quot;</span><span class="p">,</span>  <span class="c1"># Dictionary cache</span>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a>        <span class="p">]</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a>        <span class="c1"># Test remaining attributes for picklability and get dynamic exclusions</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a>        <span class="n">temp_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">known_non_picklable</span><span class="p">}</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">additional_non_picklable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_remaining_attributes</span><span class="p">(</span><span class="n">temp_data</span><span class="p">)</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a>        <span class="c1"># Combine known and discovered non-picklable attributes</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a>        <span class="n">all_excluded</span> <span class="o">=</span> <span class="n">known_non_picklable</span> <span class="o">+</span> <span class="n">additional_non_picklable</span>
<a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>
<a id="__codelineno-0-1182" name="__codelineno-0-1182"></a>        <span class="c1"># Remove non-picklable attributes</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_excluded</span><span class="p">:</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a>                <span class="k">del</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-1189" name="__codelineno-0-1189"></a>
<a id="__codelineno-0-1190" name="__codelineno-0-1190"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_test_remaining_attributes</span><span class="p">(</span>
<a id="__codelineno-0-1191" name="__codelineno-0-1191"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">:</span> <span class="nb">dict</span>
<a id="__codelineno-0-1192" name="__codelineno-0-1192"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<a id="__codelineno-0-1193" name="__codelineno-0-1193"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1194" name="__codelineno-0-1194"></a><span class="sd">        Test remaining attributes for picklability after excluding known non-picklable ones.</span>
<a id="__codelineno-0-1195" name="__codelineno-0-1195"></a>
<a id="__codelineno-0-1196" name="__codelineno-0-1196"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-1197" name="__codelineno-0-1197"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-1198" name="__codelineno-0-1198"></a><span class="sd">        data_dict : dict</span>
<a id="__codelineno-0-1199" name="__codelineno-0-1199"></a><span class="sd">            Dictionary of attributes to test</span>
<a id="__codelineno-0-1200" name="__codelineno-0-1200"></a>
<a id="__codelineno-0-1201" name="__codelineno-0-1201"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-1202" name="__codelineno-0-1202"></a><span class="sd">        -------</span>
<a id="__codelineno-0-1203" name="__codelineno-0-1203"></a><span class="sd">        picklable : List[str]</span>
<a id="__codelineno-0-1204" name="__codelineno-0-1204"></a><span class="sd">            List of attribute names that can be pickled</span>
<a id="__codelineno-0-1205" name="__codelineno-0-1205"></a><span class="sd">        non_picklable : List[str]</span>
<a id="__codelineno-0-1206" name="__codelineno-0-1206"></a><span class="sd">            List of attribute names that cannot be pickled</span>
<a id="__codelineno-0-1207" name="__codelineno-0-1207"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">io</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a>        <span class="n">picklable</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a>        <span class="n">non_picklable</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a>        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a>                <span class="c1"># Try to pickle the attribute</span>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a>                <span class="n">buffer</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a>                <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">attr_value</span><span class="p">,</span> <span class="n">buffer</span><span class="p">)</span>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a>                <span class="n">picklable</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>                <span class="n">non_picklable</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>        <span class="k">return</span> <span class="n">picklable</span><span class="p">,</span> <span class="n">non_picklable</span>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ColorCode&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a><span class="sd">        Load a ColorCode object from a file saved by the `save` method.</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><span class="sd">        Reconstructs non-picklable attributes excluded during saving using the</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><span class="sd">        modular architecture approach.</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a><span class="sd">        path : str</span>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><span class="sd">            The file path from which to load the object.</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><span class="sd">        -------</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a><span class="sd">        ColorCode</span>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><span class="sd">            The loaded ColorCode object.</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a>        <span class="c1"># Create a new instance without calling __init__</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a>        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a>        <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a>        <span class="c1"># Reconstruct non-picklable attributes in the correct order</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a>            <span class="c1"># Step 1: Reconstruct tanner_graph and qubit_groups</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">_reconstruct_tanner_graph_and_qubit_groups</span><span class="p">()</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a>            <span class="c1"># Step 2: Clear lazy-loaded object caches (they will be recreated on demand)</span>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">_dem_manager</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">_bp_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">_belief_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">_simulator</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a>            <span class="c1"># Step 3: Initialize cache</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">_bp_inputs</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a>
<a id="__codelineno-0-1265" name="__codelineno-0-1265"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1266" name="__codelineno-0-1266"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during reconstruction: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1267" name="__codelineno-0-1267"></a>            <span class="k">raise</span>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a>        <span class="k">return</span> <span class="n">instance</span>
<a id="__codelineno-0-1270" name="__codelineno-0-1270"></a>
<a id="__codelineno-0-1271" name="__codelineno-0-1271"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_reconstruct_tanner_graph_and_qubit_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-1272" name="__codelineno-0-1272"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1273" name="__codelineno-0-1273"></a><span class="sd">        Reconstruct tanner_graph and qubit_groups using TannerGraphBuilder.</span>
<a id="__codelineno-0-1274" name="__codelineno-0-1274"></a>
<a id="__codelineno-0-1275" name="__codelineno-0-1275"></a><span class="sd">        This method recreates the igraph objects that cannot be pickled by using</span>
<a id="__codelineno-0-1276" name="__codelineno-0-1276"></a><span class="sd">        the same TannerGraphBuilder that was used during initialization.</span>
<a id="__codelineno-0-1277" name="__codelineno-0-1277"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1278" name="__codelineno-0-1278"></a>        <span class="c1"># Reconstruct using TannerGraphBuilder with saved parameters</span>
<a id="__codelineno-0-1279" name="__codelineno-0-1279"></a>        <span class="n">graph_builder</span> <span class="o">=</span> <span class="n">TannerGraphBuilder</span><span class="p">(</span>
<a id="__codelineno-0-1280" name="__codelineno-0-1280"></a>            <span class="n">circuit_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="p">,</span>
<a id="__codelineno-0-1281" name="__codelineno-0-1281"></a>            <span class="n">d</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span>
<a id="__codelineno-0-1282" name="__codelineno-0-1282"></a>            <span class="n">d2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d2</span><span class="p">,</span>
<a id="__codelineno-0-1283" name="__codelineno-0-1283"></a>        <span class="p">)</span>
<a id="__codelineno-0-1284" name="__codelineno-0-1284"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">qubit_groups</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.H" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">H</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Parity check matrix derived from the detector error model.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.belief_concat_matching_decoder" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">belief_concat_matching_decoder</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>BP + ConcatMWPM decoder.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.bp_decoder" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bp_decoder</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Belief propagation decoder.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.concat_matching_decoder" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">concat_matching_decoder</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Concatenated MWPM decoder.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.cult_detector_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cult_detector_ids</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>List of detector IDs associated with cultivation operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.dem_manager" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dem_manager</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Detector error model manager for circuit analysis and decomposition.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.dem_xz" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dem_xz</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Detector error model with X and Z parts separated.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.dems_decomposed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dems_decomposed</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Color-decomposed detector error models for individual MWPM decoding.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.detector_ids_by_color" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">detector_ids_by_color</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Mapping of color labels ('r', 'g', 'b') to their corresponding detector IDs.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.detectors_checks_map" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">detectors_checks_map</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Mapping from detector IDs to their corresponding ancilla qubits and rounds.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.interface_detector_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">interface_detector_ids</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>List of detector IDs at the interface between cultivation and growing regions.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.obs_matrix" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">obs_matrix</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Logical observable matrix derived from the detector error model.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.probs_xz" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">probs_xz</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Probability values for each error mechanism in the detector error model.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="color_code_stim.ColorCode.simulator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">simulator</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Quantum circuit simulator for sampling detector and observable outcomes.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">rounds</span><span class="p">,</span> <span class="n">circuit_type</span><span class="o">=</span><span class="s1">&#39;tri&#39;</span><span class="p">,</span> <span class="n">d2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cnot_schedule</span><span class="o">=</span><span class="s1">&#39;tri_optimal&#39;</span><span class="p">,</span> <span class="n">superdense_circuit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">temp_bdry_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">perfect_logical_initialization</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">perfect_logical_measurement</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">perfect_init_final</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">perfect_first_syndrome_extraction</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">comparative_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exclude_non_essential_pauli_detectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cultivation_circuit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remove_non_edge_like_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">p_bitflip</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">p_depol</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">p_reset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">p_meas</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">p_cnot</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">p_idle</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">p_circuit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">p_cult</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_generate_dem</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_decompose_dem</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_benchmarking</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Class for constructing a color code circuit and simulating the
concatenated MWPM decoder.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Triangular patch with uniform circuit-level noise of 1e-3:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">color_code_stim</span><span class="w"> </span><span class="kn">import</span> <span class="n">ColorCode</span><span class="p">,</span> <span class="n">NoiseModel</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="n">NoiseModel</span><span class="o">.</span><span class="n">uniform_circuit_noise</span><span class="p">(</span><span class="mf">1e-3</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">colorcode</span> <span class="o">=</span> <span class="n">ColorCode</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">rounds</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">circuit_type</span><span class="o">=</span><span class="s2">&quot;tri&quot;</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">num_fails</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">colorcode</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">full_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
    <p>See <code>getting_started.ipynb</code> for more detailed usage.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>d</code>
            </td>
            <td>
                  <code><span title="int">int</span> &gt;= 3</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Code distance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rounds</code>
            </td>
            <td>
                  <code><span title="int">int</span> &gt;= 1</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of syndrome extraction rounds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>circuit_type</code>
            </td>
            <td>
                  <code>(<span title="triangle">triangle</span>, <span title="tri">tri</span>, <span title="rectangle">rectangle</span>, <span title="rec">rec</span>, <span title="rec_stability">rec_stability</span>, <span title="growing">growing</span>, <span title="cult">cult</span> + <span title="growing">growing</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Circuit type.</p>
<ul>
<li>
<p>'triangle'/'tri': memory experiment of a triangular patch with distance
  <code>d</code>.</p>
</li>
<li>
<p>'rectangle'/'rec': memory experiment of a rectangular patch with distance
  <code>d</code> and <code>d2</code>.</p>
</li>
<li>
<p>'rec_stability': stability experiment of a rectangle-like patch with
  single-type boundaries. <code>d</code> and <code>d2</code> indicate the size of the patch,
  rather than code distances.</p>
</li>
<li>
<p>'growing': growing operation from a triangular patch with distance <code>d</code> to
  a larger triangular patch with distance <code>d2</code>. Must be <code>d2 &gt; d</code>.</p>
</li>
<li>
<p>'cult+growing': cultivation on a triangular patch with distance <code>d</code>,
  followed by a growing operation to distance <code>d2</code>. Must be <code>d2 &gt; d</code>.</p>
</li>
</ul>
              </div>
            </td>
            <td>
                  <code>&#39;triangle&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>d2</code>
            </td>
            <td>
                  <code><span title="int">int</span> &gt;= 3</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Second code distance required for circuit types 'rec'/'rectangle', 'growing',
and 'cult+growing'. If not provided, <code>d2 = d</code> is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cnot_schedule</code>
            </td>
            <td>
                  <code>(<span title="tri_optimal">tri_optimal</span>, <span title="tri_optimal_reversed">tri_optimal_reversed</span>, <span title="superdense_default">superdense_default</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <div class="highlight"><pre><span></span><code>        default &#39;tri_optimal&#39;
</code></pre></div>
<p>CNOT schedule.</p>
<ul>
<li>
<p>List of 12 integers: (a, b, ... l) specifying the CNOT schedule.</p>
</li>
<li>
<p>'tri_optimal': (2, 3, 6, 5, 4, 1, 3, 4, 7, 6, 5, 2), which is the optimal
schedule for the triangular color code.</p>
</li>
<li>
<p>'tri_optimal_reversed': (3, 4, 7, 6, 5, 2, 2, 3, 6, 5, 4, 1),
which has the X- and Z-part reversed from 'tri_optimal'.</p>
</li>
<li>
<p>'superdense_default': (3, 1, 2, 3, 1, 2, 6, 4, 5, 6, 4, 5),
which is used for superdense syndrome extraction circuits.</p>
</li>
</ul>
              </div>
            </td>
            <td>
                  <code>&#39;tri_optimal&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>superdense_circuit</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use superdense syndrome extraction circuit. When True, the syndrome
extraction follows a 4-step pattern: (1) X-type anc → Z-type anc CNOTs,
(2) data → anc CNOTs with spatial routing, (3) anc → data CNOTs, (4) repeat step 1.
If True and cnot_schedule is 'tri_optimal', it automatically switches to
'superdense_default'.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>temp_bdry_type</code>
            </td>
            <td>
                  <code>(<span title="X">X</span>, <span title="Y">Y</span>, <span title="Z">Z</span>, <span title="x">x</span>, <span title="y">y</span>, <span title="z">z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of the temporal boundaries, i.e., the reset/measurement basis of
data qubits at the beginning and end of the circuit.
Not supported for <code>rec_stability</code> and <code>cult+growing</code> circuits: the types of
the temporal boundaries are fixed to red for <code>rec_stability</code> and <code>Y</code> for
<code>cult+growing</code>. For the other circuit types, it is <code>Z</code> by default.</p>
              </div>
            </td>
            <td>
                  <code>&#39;X&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>noise_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="color_code_stim.noise_model.NoiseModel" href="../noise_model/#color_code_stim.NoiseModel">NoiseModel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Noise model specifying error rates for different operations. If provided,
individual noise parameters (p_bitflip, p_depol, etc.) are ignored.
If not provided, a NoiseModel is constructed from individual parameters.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>perfect_logical_initialization</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether logical initialization operations (data qubit reset) are noiseless</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>perfect_logical_measurement</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether logical final measurement operations are noiseless</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>perfect_init_final</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, sets both perfect_logical_initialization and perfect_logical_measurement
to True.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>perfect_first_syndrome_extraction</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the first syndrome extraction round is noiseless. Useful when
starting from a perfect logical state (together with
<code>perfect_logical_initialization=True</code>).
<em>Note:</em> <code>rounds</code> still includes this perfect round, so set to <code>T + 1</code> where
<code>T</code> is the number of actual faulty syndrome extraction rounds you want to consider.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>comparative_decoding</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the comparative decoding technique. If True, observables are
included as additional detectors and decoding can be done by running the
decoder for each logical class and choosing the lowest-weight one. This also
provides the logical gap information, which quantifies the reliability of
decoding.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exclude_non_essential_pauli_detectors</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True and <code>temp_bdry_type</code> is not "Y", detectors with the Pauli type
different from the temporal boundary type (e.g., X-type detectors for
<code>temp_bdry_type="Z"</code>) are excluded from the circuit. This does not affect the
decoding results since X and Z errors are independently decoded in our method
and physical errors with the same pauli type as the temporal boundaries do
not affect the logical values. If <code>temp_bdry_type="Y"</code> or
<code>circuit_type="cult+growing"</code>, both types of detectors are required for decoding,
so this option is ignored.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cultivation_circuit</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="stim.Circuit">Circuit</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If given, it is used as the cultivation circuit for cultivation + growing
circuit (<code>circuit_type == 'cult+growing'</code>). WARNING: Its validity is not
checked internally.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>remove_non_edge_like_errors</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to remove error mechanisms that are not edge-like when decomposing
the detector error model.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="parameters-(legacy-for-backward-compatibility)" open>
  <summary>Parameters (legacy for backward compatibility)</summary>
  <p>shape: str, optional
    Same as <code>circuit_type</code>. If given, prioritized over <code>circuit_type</code>.</p>
<p>p_bitflip : float, default 0
    Bit-flip noise on every data qubit at the start of each round.
    Ignored if noise_model is provided.</p>
<p>p_depol : float, default 0
    Depolarizing noise on every data qubit at the start of each round.
    Ignored if noise_model is provided.</p>
<p>p_reset : float, default 0
    Error rate for each reset (producing an orthogonal state).
    Ignored if noise_model is provided.</p>
<p>p_meas : float, default 0
    Error rate for each measurement (flipped measurement outcome).
    Ignored if noise_model is provided.</p>
<p>p_cnot : float, default 0
    Two-qubit depolarizing noise rate for each CNOT gate.
    Ignored if noise_model is provided.</p>
<p>p_idle : float, default 0
    Single-qubit depolarizing noise rate for each idle gate.
    Ignored if noise_model is provided.</p>
<p>p_circuit : float, optional
    If given, p_reset = p_meas = p_cnot = p_idle = p_circuit.
    Ignored if noise_model is provided.</p>
<p>p_cult : float, optional
    Physical error rate during cultivation (only used for 'cult+growing'
    circuits). If not given, <code>p_cult = p_cnot</code> is used.
    Ignored if noise_model is provided.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="n">d</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="n">rounds</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="n">circuit_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;tri&quot;</span><span class="p">,</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="n">d2</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="n">cnot_schedule</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;tri_optimal&quot;</span><span class="p">,</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="n">superdense_circuit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="n">temp_bdry_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="n">noise_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NoiseModel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="n">perfect_logical_initialization</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="n">perfect_logical_measurement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="n">perfect_init_final</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="n">perfect_first_syndrome_extraction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="n">comparative_decoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="n">exclude_non_essential_pauli_detectors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="n">cultivation_circuit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">stim</span><span class="o">.</span><span class="n">Circuit</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="n">remove_non_edge_like_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="n">shape</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="n">p_bitflip</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="n">p_depol</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="n">p_reset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="n">p_meas</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>    <span class="n">p_cnot</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>    <span class="n">p_idle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="n">p_circuit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>    <span class="n">p_cult</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="n">_generate_dem</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>    <span class="n">_decompose_dem</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="n">_benchmarking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="p">):</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">    Class for constructing a color code circuit and simulating the</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    concatenated MWPM decoder.</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">    --------</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    Triangular patch with uniform circuit-level noise of 1e-3:</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">    &gt;&gt;&gt; from color_code_stim import ColorCode, NoiseModel</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">    &gt;&gt;&gt; noise = NoiseModel.uniform_circuit_noise(1e-3)</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">    &gt;&gt;&gt; colorcode = ColorCode(d=5, rounds=5, circuit_type=&quot;tri&quot;, noise_model=noise)</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">    &gt;&gt;&gt; num_fails, info = colorcode.simulate(shots=10000, full_output=True)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    See `getting_started.ipynb` for more detailed usage.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">    d : int &gt;= 3</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">        Code distance.</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">    rounds : int &gt;= 1</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">        Number of syndrome extraction rounds.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    circuit_type : {&#39;triangle&#39;, &#39;tri&#39;, &#39;rectangle&#39;, &#39;rec&#39;, &#39;rec_stability&#39;, &#39;growing&#39;, &#39;cult+growing&#39;}, default &#39;tri&#39;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">        Circuit type.</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">        - &#39;triangle&#39;/&#39;tri&#39;: memory experiment of a triangular patch with distance</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">          `d`.</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">        - &#39;rectangle&#39;/&#39;rec&#39;: memory experiment of a rectangular patch with distance</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">          `d` and `d2`.</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">        - &#39;rec_stability&#39;: stability experiment of a rectangle-like patch with</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">          single-type boundaries. `d` and `d2` indicate the size of the patch,</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">          rather than code distances.</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">        - &#39;growing&#39;: growing operation from a triangular patch with distance `d` to</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">          a larger triangular patch with distance `d2`. Must be `d2 &gt; d`.</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">        - &#39;cult+growing&#39;: cultivation on a triangular patch with distance `d`,</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">          followed by a growing operation to distance `d2`. Must be `d2 &gt; d`.</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">    d2 : int &gt;= 3, optional</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">        Second code distance required for circuit types &#39;rec&#39;/&#39;rectangle&#39;, &#39;growing&#39;,</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">        and &#39;cult+growing&#39;. If not provided, `d2 = d` is used.</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    cnot_schedule : {&#39;tri_optimal&#39;, &#39;tri_optimal_reversed&#39;, &#39;superdense_default&#39;} or list of 12 integers,</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">                    default &#39;tri_optimal&#39;</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">        CNOT schedule.</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">        - List of 12 integers: (a, b, ... l) specifying the CNOT schedule.</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">        - &#39;tri_optimal&#39;: (2, 3, 6, 5, 4, 1, 3, 4, 7, 6, 5, 2), which is the optimal</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">        schedule for the triangular color code.</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="sd">        - &#39;tri_optimal_reversed&#39;: (3, 4, 7, 6, 5, 2, 2, 3, 6, 5, 4, 1),</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="sd">        which has the X- and Z-part reversed from &#39;tri_optimal&#39;.</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="sd">        - &#39;superdense_default&#39;: (3, 1, 2, 3, 1, 2, 6, 4, 5, 6, 4, 5),</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="sd">        which is used for superdense syndrome extraction circuits.</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">    superdense_circuit : bool, default False</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="sd">        Whether to use superdense syndrome extraction circuit. When True, the syndrome</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="sd">        extraction follows a 4-step pattern: (1) X-type anc → Z-type anc CNOTs,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="sd">        (2) data → anc CNOTs with spatial routing, (3) anc → data CNOTs, (4) repeat step 1.</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">        If True and cnot_schedule is &#39;tri_optimal&#39;, it automatically switches to</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">        &#39;superdense_default&#39;.</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">    temp_bdry_type : {&#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;}, optional</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">        Type of the temporal boundaries, i.e., the reset/measurement basis of</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">        data qubits at the beginning and end of the circuit.</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">        Not supported for `rec_stability` and `cult+growing` circuits: the types of</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">        the temporal boundaries are fixed to red for `rec_stability` and `Y` for</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="sd">        `cult+growing`. For the other circuit types, it is `Z` by default.</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">    noise_model : NoiseModel, optional</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">        Noise model specifying error rates for different operations. If provided,</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">        individual noise parameters (p_bitflip, p_depol, etc.) are ignored.</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">        If not provided, a NoiseModel is constructed from individual parameters.</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">    perfect_logical_initialization : bool, default False</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">        Whether logical initialization operations (data qubit reset) are noiseless</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">    perfect_logical_measurement : bool, default False</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        Whether logical final measurement operations are noiseless</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">    perfect_init_final : bool, default False</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">        If True, sets both perfect_logical_initialization and perfect_logical_measurement</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">        to True.</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">    perfect_first_syndrome_extraction : bool, default False</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">        Whether the first syndrome extraction round is noiseless. Useful when</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">        starting from a perfect logical state (together with</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">        `perfect_logical_initialization=True`).</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">        *Note:* `rounds` still includes this perfect round, so set to `T + 1` where</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        `T` is the number of actual faulty syndrome extraction rounds you want to consider.</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">    comparative_decoding : bool, default False</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">        Whether to use the comparative decoding technique. If True, observables are</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">        included as additional detectors and decoding can be done by running the</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">        decoder for each logical class and choosing the lowest-weight one. This also</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="sd">        provides the logical gap information, which quantifies the reliability of</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="sd">        decoding.</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">    exclude_non_essential_pauli_detectors : bool, default False</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">        If True and `temp_bdry_type` is not &quot;Y&quot;, detectors with the Pauli type</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">        different from the temporal boundary type (e.g., X-type detectors for</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">        `temp_bdry_type=&quot;Z&quot;`) are excluded from the circuit. This does not affect the</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">        decoding results since X and Z errors are independently decoded in our method</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">        and physical errors with the same pauli type as the temporal boundaries do</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">        not affect the logical values. If `temp_bdry_type=&quot;Y&quot;` or</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">        `circuit_type=&quot;cult+growing&quot;`, both types of detectors are required for decoding,</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">        so this option is ignored.</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">    cultivation_circuit: stim.Circuit, optional</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">        If given, it is used as the cultivation circuit for cultivation + growing</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">        circuit (`circuit_type == &#39;cult+growing&#39;`). WARNING: Its validity is not</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">        checked internally.</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">    remove_non_edge_like_errors: bool, default True</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">        Whether to remove error mechanisms that are not edge-like when decomposing</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">        the detector error model.</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">    Parameters (legacy for backward compatibility)</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">    shape: str, optional</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">        Same as `circuit_type`. If given, prioritized over `circuit_type`.</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">    p_bitflip : float, default 0</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">        Bit-flip noise on every data qubit at the start of each round.</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">    p_depol : float, default 0</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">        Depolarizing noise on every data qubit at the start of each round.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">    p_reset : float, default 0</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">        Error rate for each reset (producing an orthogonal state).</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">    p_meas : float, default 0</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">        Error rate for each measurement (flipped measurement outcome).</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">    p_cnot : float, default 0</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">        Two-qubit depolarizing noise rate for each CNOT gate.</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">    p_idle : float, default 0</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="sd">        Single-qubit depolarizing noise rate for each idle gate.</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">    p_circuit : float, optional</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="sd">        If given, p_reset = p_meas = p_cnot = p_idle = p_circuit.</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">    p_cult : float, optional</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="sd">        Physical error rate during cultivation (only used for &#39;cult+growing&#39;</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">        circuits). If not given, `p_cult = p_cnot` is used.</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="sd">        Ignored if noise_model is provided.</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span class="c1"># Automatic cnot_schedule selection for superdense circuits</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>    <span class="k">if</span> <span class="n">superdense_circuit</span> <span class="ow">and</span> <span class="n">cnot_schedule</span> <span class="o">==</span> <span class="s2">&quot;tri_optimal&quot;</span><span class="p">:</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>        <span class="n">cnot_schedule</span> <span class="o">=</span> <span class="s2">&quot;superdense_default&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cnot_schedule</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span class="k">if</span> <span class="n">cnot_schedule</span> <span class="ow">in</span> <span class="n">CNOT_SCHEDULES</span><span class="p">:</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>            <span class="n">cnot_schedule</span> <span class="o">=</span> <span class="n">CNOT_SCHEDULES</span><span class="p">[</span><span class="n">cnot_schedule</span><span class="p">]</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid cnot schedule: </span><span class="si">{</span><span class="n">cnot_schedule</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="n">cnot_schedule</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cnot_schedule</span><span class="p">)</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">cnot_schedule</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>    <span class="k">assert</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">rounds</span> <span class="o">&gt;=</span> <span class="mi">1</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="c1"># Handle noise model: use provided NoiseModel or create from individual parameters</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="k">if</span> <span class="n">noise_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>        <span class="c1"># Use provided NoiseModel</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span> <span class="o">=</span> <span class="n">noise_model</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="c1"># Create NoiseModel from individual parameters</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span class="k">if</span> <span class="n">p_circuit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>            <span class="n">p_reset</span> <span class="o">=</span> <span class="n">p_meas</span> <span class="o">=</span> <span class="n">p_cnot</span> <span class="o">=</span> <span class="n">p_idle</span> <span class="o">=</span> <span class="n">p_circuit</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>        <span class="c1"># For cult+growing, validate requirements</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>        <span class="k">if</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;cultivation+growing&quot;</span><span class="p">,</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>            <span class="k">if</span> <span class="n">p_circuit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>                    <span class="s2">&quot;p_circuit must be provided for cult+growing circuit type&quot;</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>                <span class="p">)</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>            <span class="k">if</span> <span class="n">p_bitflip</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>                    <span class="s2">&quot;p_bitflip must be 0 for cult+growing circuit type&quot;</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>                <span class="p">)</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>        <span class="c1"># Create NoiseModel from individual parameters</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span> <span class="o">=</span> <span class="n">NoiseModel</span><span class="p">(</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>            <span class="n">bitflip</span><span class="o">=</span><span class="n">p_bitflip</span><span class="p">,</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>            <span class="n">depol</span><span class="o">=</span><span class="n">p_depol</span><span class="p">,</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>            <span class="n">reset</span><span class="o">=</span><span class="n">p_reset</span><span class="p">,</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>            <span class="n">meas</span><span class="o">=</span><span class="n">p_meas</span><span class="p">,</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>            <span class="n">cnot</span><span class="o">=</span><span class="n">p_cnot</span><span class="p">,</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>            <span class="n">idle</span><span class="o">=</span><span class="n">p_idle</span><span class="p">,</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>            <span class="n">cult</span><span class="o">=</span><span class="n">p_cult</span><span class="p">,</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="p">)</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>    <span class="n">d2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d2</span> <span class="o">=</span> <span class="n">d</span> <span class="k">if</span> <span class="n">d2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">d2</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">rounds</span> <span class="o">=</span> <span class="n">rounds</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>    <span class="k">if</span> <span class="n">shape</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>        <span class="n">circuit_type</span> <span class="o">=</span> <span class="n">shape</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>    <span class="k">if</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;triangle&quot;</span><span class="p">,</span> <span class="s2">&quot;tri&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;tri&quot;</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>    <span class="k">elif</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;rectangle&quot;</span><span class="p">,</span> <span class="s2">&quot;rec&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>        <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>        <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;rec&quot;</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>    <span class="k">elif</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>        <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>        <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;rec_stability&quot;</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>    <span class="k">elif</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;growing&quot;</span><span class="p">:</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>        <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>        <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">&gt;</span> <span class="n">d</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;growing&quot;</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>    <span class="k">elif</span> <span class="n">circuit_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;cultivation+growing&quot;</span><span class="p">,</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>        <span class="k">assert</span> <span class="n">d2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>        <span class="k">assert</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d2</span> <span class="o">&gt;</span> <span class="n">d</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">=</span> <span class="s2">&quot;cult+growing&quot;</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid circuit type: </span><span class="si">{</span><span class="n">circuit_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>    <span class="k">if</span> <span class="n">temp_bdry_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>        <span class="k">if</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>            <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="s2">&quot;r&quot;</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>        <span class="k">elif</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">:</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>            <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="s2">&quot;Y&quot;</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>            <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="s2">&quot;Z&quot;</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>        <span class="k">assert</span> <span class="n">temp_bdry_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">}</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>        <span class="k">assert</span> <span class="n">circuit_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;rec_stability&quot;</span><span class="p">,</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">}</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>        <span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="n">temp_bdry_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">temp_bdry_type</span> <span class="o">=</span> <span class="n">temp_bdry_type</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>    <span class="k">if</span> <span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obs_paulis</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">]</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obs_paulis</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp_bdry_type</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_obs</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">cnot_schedule</span> <span class="o">=</span> <span class="n">cnot_schedule</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">superdense_circuit</span> <span class="o">=</span> <span class="n">superdense_circuit</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">perfect_init_final</span> <span class="o">=</span> <span class="n">perfect_init_final</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>    <span class="c1"># Handle backward compatibility: perfect_init_final sets both initialization and measurement</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>    <span class="k">if</span> <span class="n">perfect_init_final</span><span class="p">:</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>        <span class="n">perfect_logical_initialization</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>        <span class="n">perfect_logical_measurement</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_initialization</span> <span class="o">=</span> <span class="n">perfect_logical_initialization</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_measurement</span> <span class="o">=</span> <span class="n">perfect_logical_measurement</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">perfect_first_syndrome_extraction</span> <span class="o">=</span> <span class="n">perfect_first_syndrome_extraction</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span> <span class="o">=</span> <span class="n">comparative_decoding</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">exclude_non_essential_pauli_detectors</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="n">exclude_non_essential_pauli_detectors</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>    <span class="p">)</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">remove_non_edge_like_errors</span> <span class="o">=</span> <span class="n">remove_non_edge_like_errors</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;rec_stability&quot;</span><span class="p">:</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="o">==</span> <span class="s2">&quot;cult+growing&quot;</span><span class="p">:</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>        <span class="k">if</span> <span class="n">cultivation_circuit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>            <span class="n">cultivation_circuit</span> <span class="o">=</span> <span class="n">_load_cultivation_circuit</span><span class="p">(</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>                <span class="n">d</span><span class="o">=</span><span class="n">d</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span><span class="p">[</span><span class="s2">&quot;cult&quot;</span><span class="p">]</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>            <span class="p">)</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span class="n">cultivation_circuit</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">cultivation_circuit</span> <span class="o">=</span> <span class="n">cultivation_circuit</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_benchmarking</span> <span class="o">=</span> <span class="n">_benchmarking</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>    <span class="c1"># Build Tanner graph using TannerGraphBuilder</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>    <span class="n">graph_builder</span> <span class="o">=</span> <span class="n">TannerGraphBuilder</span><span class="p">(</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>        <span class="n">circuit_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="p">,</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>        <span class="n">d</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>        <span class="n">d2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d2</span><span class="p">,</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>    <span class="p">)</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">qubit_groups</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>    <span class="c1"># Generate circuit using CircuitBuilder</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>    <span class="n">builder</span> <span class="o">=</span> <span class="n">CircuitBuilder</span><span class="p">(</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>        <span class="n">d</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>        <span class="n">d2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d2</span><span class="p">,</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>        <span class="n">rounds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rounds</span><span class="p">,</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>        <span class="n">circuit_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="p">,</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>        <span class="n">cnot_schedule</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cnot_schedule</span><span class="p">,</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>        <span class="n">superdense_circuit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">superdense_circuit</span><span class="p">,</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>        <span class="n">temp_bdry_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_bdry_type</span><span class="p">,</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>        <span class="n">noise_model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span><span class="p">,</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>        <span class="n">perfect_init_final</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_init_final</span><span class="p">,</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>        <span class="n">perfect_logical_initialization</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_initialization</span><span class="p">,</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>        <span class="n">perfect_logical_measurement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_logical_measurement</span><span class="p">,</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>        <span class="n">perfect_first_syndrome_extraction</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">perfect_first_syndrome_extraction</span><span class="p">,</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>        <span class="n">tanner_graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="p">,</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>        <span class="n">qubit_groups</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qubit_groups</span><span class="p">,</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>        <span class="n">exclude_non_essential_pauli_detectors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_non_essential_pauli_detectors</span><span class="p">,</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>        <span class="n">cultivation_circuit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cultivation_circuit</span><span class="p">,</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>        <span class="n">comparative_decoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span><span class="p">,</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>    <span class="c1"># Initialize DEM manager (lazy loading)</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_dem_manager</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_generate_dem</span> <span class="o">=</span> <span class="n">_generate_dem</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_decompose_dem</span> <span class="o">=</span> <span class="n">_decompose_dem</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>    <span class="c1"># Initialize decoders (lazy loading)</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_bp_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_belief_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_simulator</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.decode" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decode</span><span class="p">(</span><span class="n">detector_outcomes</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">logical_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bp_predecoding</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bp_prms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">full_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">check_validity</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Decode detector outcomes using concatenated MWPM decoding.</p>
<p>This method delegates to the ConcatMatchingDecoder while preserving backward
compatibility and handling BP pre-decoding integration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>detector_outcomes</code>
            </td>
            <td>
                  <code>1D or 2D array-like of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Array of input detector outcomes for one or multiple samples.
If 1D, it is interpreted as a single sample.
If 2D, each row corresponds to a sample and each column corresponds to a
detector. detector_outcomes[i, j] is True if and only if the detector with
id j in the ith sample has the outcome −1.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colors</code>
            </td>
            <td>
                  <code>str or list of str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colors to use for decoding. Can be 'all', one of {'r', 'g', 'b'},
or a list containing any combination of {'r', 'g', 'b'}.</p>
              </div>
            </td>
            <td>
                  <code>&#39;all&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logical_value</code>
            </td>
            <td>
                  <code>bool or 1D array-like of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Logical value(s) to use for decoding. If None, all possible logical value
combinations (i.e., logical classes) will be tried and the one with minimum
weight will be selected.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bp_predecoding</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use belief propagation as a pre-decoding step.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bp_prms</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters for the belief propagation decoder.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>erasure_matcher_predecoding</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use erasure matcher as a pre-decoding step.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>partial_correction_by_predecoding</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the prediction from the erasure matcher predecoding as a
partial correction for the second round of decoding, in the case that the predecoding fails to find a valid prediction.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>full_output</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to return extra information about the decoding process.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>check_validity</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to check the validity of the predicted error patterns.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to print additional information during decoding.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>obs_preds</code></td>            <td>
                  <code>1D or 2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Predicted observables. It is 1D if there is only one observable and
2D if otherwise. obs_preds[i] or obs_preds[i,j] is True if and only
if the j-th observable (j=0 when 1D) of the i-th sample is
predicted to be -1.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>extra_outputs</code></td>            <td>
                  <code>dict, only when full_output is True</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing additional decoding outputs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span>
<span class="normal"><a href="#__codelineno-0-928">928</a></span>
<span class="normal"><a href="#__codelineno-0-929">929</a></span>
<span class="normal"><a href="#__codelineno-0-930">930</a></span>
<span class="normal"><a href="#__codelineno-0-931">931</a></span>
<span class="normal"><a href="#__codelineno-0-932">932</a></span>
<span class="normal"><a href="#__codelineno-0-933">933</a></span>
<span class="normal"><a href="#__codelineno-0-934">934</a></span>
<span class="normal"><a href="#__codelineno-0-935">935</a></span>
<span class="normal"><a href="#__codelineno-0-936">936</a></span>
<span class="normal"><a href="#__codelineno-0-937">937</a></span>
<span class="normal"><a href="#__codelineno-0-938">938</a></span>
<span class="normal"><a href="#__codelineno-0-939">939</a></span>
<span class="normal"><a href="#__codelineno-0-940">940</a></span>
<span class="normal"><a href="#__codelineno-0-941">941</a></span>
<span class="normal"><a href="#__codelineno-0-942">942</a></span>
<span class="normal"><a href="#__codelineno-0-943">943</a></span>
<span class="normal"><a href="#__codelineno-0-944">944</a></span>
<span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span>
<span class="normal"><a href="#__codelineno-0-947">947</a></span>
<span class="normal"><a href="#__codelineno-0-948">948</a></span>
<span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span>
<span class="normal"><a href="#__codelineno-0-952">952</a></span>
<span class="normal"><a href="#__codelineno-0-953">953</a></span>
<span class="normal"><a href="#__codelineno-0-954">954</a></span>
<span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span>
<span class="normal"><a href="#__codelineno-0-962">962</a></span>
<span class="normal"><a href="#__codelineno-0-963">963</a></span>
<span class="normal"><a href="#__codelineno-0-964">964</a></span>
<span class="normal"><a href="#__codelineno-0-965">965</a></span>
<span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span>
<span class="normal"><a href="#__codelineno-0-969">969</a></span>
<span class="normal"><a href="#__codelineno-0-970">970</a></span>
<span class="normal"><a href="#__codelineno-0-971">971</a></span>
<span class="normal"><a href="#__codelineno-0-972">972</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="k">def</span><span class="w"> </span><span class="nf">decode</span><span class="p">(</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a>    <span class="n">detector_outcomes</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a>    <span class="n">colors</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>    <span class="n">logical_value</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>    <span class="n">bp_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a>    <span class="n">bp_prms</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>    <span class="n">erasure_matcher_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>    <span class="n">partial_correction_by_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a>    <span class="n">full_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a>    <span class="n">check_validity</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">    Decode detector outcomes using concatenated MWPM decoding.</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="sd">    This method delegates to the ConcatMatchingDecoder while preserving backward</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="sd">    compatibility and handling BP pre-decoding integration.</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a><span class="sd">    detector_outcomes : 1D or 2D array-like of bool</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="sd">        Array of input detector outcomes for one or multiple samples.</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="sd">        If 1D, it is interpreted as a single sample.</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="sd">        If 2D, each row corresponds to a sample and each column corresponds to a</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="sd">        detector. detector_outcomes[i, j] is True if and only if the detector with</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="sd">        id j in the ith sample has the outcome −1.</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="sd">    colors : str or list of str, default &#39;all&#39;</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">        Colors to use for decoding. Can be &#39;all&#39;, one of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;},</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="sd">        or a list containing any combination of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;}.</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">    logical_value : bool or 1D array-like of bool, optional</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">        Logical value(s) to use for decoding. If None, all possible logical value</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="sd">        combinations (i.e., logical classes) will be tried and the one with minimum</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="sd">        weight will be selected.</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a><span class="sd">    bp_predecoding : bool, default False</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><span class="sd">        Whether to use belief propagation as a pre-decoding step.</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="sd">    bp_prms : dict, default None</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="sd">        Parameters for the belief propagation decoder.</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="sd">    erasure_matcher_predecoding : bool, default False</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a><span class="sd">        Whether to use erasure matcher as a pre-decoding step.</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">    partial_correction_by_predecoding : bool, default False</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="sd">        Whether to use the prediction from the erasure matcher predecoding as a</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="sd">        partial correction for the second round of decoding, in the case that the predecoding fails to find a valid prediction.</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a><span class="sd">    full_output : bool, default False</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a><span class="sd">        Whether to return extra information about the decoding process.</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><span class="sd">    check_validity : bool, default False</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a><span class="sd">        Whether to check the validity of the predicted error patterns.</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="sd">    verbose : bool, default False</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="sd">        Whether to print additional information during decoding.</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="sd">    -------</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">    obs_preds : 1D or 2D numpy array of bool</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a><span class="sd">        Predicted observables. It is 1D if there is only one observable and</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">        2D if otherwise. obs_preds[i] or obs_preds[i,j] is True if and only</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="sd">        if the j-th observable (j=0 when 1D) of the i-th sample is</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">        predicted to be -1.</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a><span class="sd">    extra_outputs : dict, only when full_output is True</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="sd">        Dictionary containing additional decoding outputs.</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a>    <span class="c1"># Handle BP pre-decoding by delegating to BeliefConcatMatchingDecoder</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>    <span class="k">if</span> <span class="n">bp_predecoding</span><span class="p">:</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">belief_concat_matching_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>            <span class="n">detector_outcomes</span><span class="o">=</span><span class="n">detector_outcomes</span><span class="p">,</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>            <span class="n">logical_value</span><span class="o">=</span><span class="n">logical_value</span><span class="p">,</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a>            <span class="n">bp_prms</span><span class="o">=</span><span class="n">bp_prms</span><span class="p">,</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a>            <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="n">erasure_matcher_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a>            <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="n">partial_correction_by_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a>            <span class="n">full_output</span><span class="o">=</span><span class="n">full_output</span><span class="p">,</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a>            <span class="n">check_validity</span><span class="o">=</span><span class="n">check_validity</span><span class="p">,</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a>            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>        <span class="p">)</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a>    <span class="c1"># Delegate to ConcatMatchingDecoder for standard decoding</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">concat_matching_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a>        <span class="n">detector_outcomes</span><span class="o">=</span><span class="n">detector_outcomes</span><span class="p">,</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>        <span class="n">logical_value</span><span class="o">=</span><span class="n">logical_value</span><span class="p">,</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>        <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="n">erasure_matcher_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>        <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="n">partial_correction_by_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>        <span class="n">full_output</span><span class="o">=</span><span class="n">full_output</span><span class="p">,</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>        <span class="n">check_validity</span><span class="o">=</span><span class="n">check_validity</span><span class="p">,</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.decode_bp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decode_bp</span><span class="p">(</span><span class="n">detector_outcomes</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Decode detector outcomes using belief propagation.</p>
<p>This method delegates to the BPDecoder while maintaining backward compatibility
with the _bp_inputs caching mechanism for integration with pre-decoding.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>detector_outcomes</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>1D or 2D array of detector measurement outcomes to decode.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_iter</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of belief propagation iterations to perform.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the BpDecoder constructor.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pred</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Predicted error pattern.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>llrs</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log probability ratios for each bit in the predicted error pattern.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>converge</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the belief propagation algorithm converged within max_iter iterations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-845" name="__codelineno-0-845"></a><span class="k">def</span><span class="w"> </span><span class="nf">decode_bp</span><span class="p">(</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>    <span class="n">detector_outcomes</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>    <span class="n">max_iter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a><span class="p">):</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="sd">    Decode detector outcomes using belief propagation.</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a><span class="sd">    This method delegates to the BPDecoder while maintaining backward compatibility</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a><span class="sd">    with the _bp_inputs caching mechanism for integration with pre-decoding.</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">    detector_outcomes : np.ndarray</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="sd">        1D or 2D array of detector measurement outcomes to decode.</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="sd">    max_iter : int</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">        Maximum number of belief propagation iterations to perform.</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="sd">    **kwargs</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="sd">        Additional keyword arguments to pass to the BpDecoder constructor.</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">    -------</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="sd">    pred : np.ndarray</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="sd">        Predicted error pattern.</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="sd">    llrs : np.ndarray</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="sd">        Log probability ratios for each bit in the predicted error pattern.</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">    converge : bool</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="sd">        Whether the belief propagation algorithm converged within max_iter iterations.</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>    <span class="c1"># Update _bp_inputs cache for compatibility with pre-decoding integration</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span><span class="p">:</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">comparative_decoding</span><span class="p">:</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a>            <span class="n">dem</span> <span class="o">=</span> <span class="n">remove_obs_from_dem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dem_xz</span><span class="p">)</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>            <span class="n">dem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_xz</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a>        <span class="n">H</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">dem_to_parity_check</span><span class="p">(</span><span class="n">dem</span><span class="p">)</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span><span class="p">[</span><span class="s2">&quot;H&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">H</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bp_inputs</span><span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a>    <span class="c1"># Delegate to BP decoder</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bp_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">detector_outcomes</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="n">max_iter</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.draw_lattice" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">draw_lattice</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">highlight_qubits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">highlight_qubits2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">highlight_faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Draws the color code lattice.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ax</code>
            </td>
            <td>
                  <code><span title="matplotlib.axes.Axes">Axes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The axis on which to draw the graph. If None, a new figure and
axis will be created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_axes</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to show the x- and y-axis.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_qubits</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>] | <span title="list">list</span>[<span title="tuple">tuple</span>] | <span title="list">list</span>[<span title="str">str</span>] | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data qubits to highlight with orange triangles (by default).
Can be a list of data qubit indices (ordered by code.vs.select(pauli=None)),
a list of coordinate tuples [(x, y), ...], or a list of qubit names ['x-y', ...].</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_qubits2</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>] | <span title="list">list</span>[<span title="tuple">tuple</span>] | <span title="list">list</span>[<span title="str">str</span>] | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data qubits to highlight with purple rectangles (by default).
Format is the same as highlight_qubits.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_faces</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>] | <span title="list">list</span>[<span title="tuple">tuple</span>] | <span title="list">list</span>[<span title="str">str</span>] | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Z ancillary qubits whose corresponding faces should be highlighted.
Can be a list of Z ancillary qubit indices (ordered by code.vs.select(pauli="Z")),
a list of coordinate tuples [(x, y), ...], or a list of qubit names ['x-y', ...].
Note that for names, the actual stored name includes a '-Z' suffix.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>edge_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colors for edges.</p>
              </div>
            </td>
            <td>
                  <code>&#39;black&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>edge_linewidth</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Linewidth for edges.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>face_lightness</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Controls the lightness of face colors. Lower values make colors lighter.</p>
              </div>
            </td>
            <td>
                  <code>0.3</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_data_qubits</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to draw circles representing data qubits.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_qubit_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Color for the data qubit circles (if shown).</p>
              </div>
            </td>
            <td>
                  <code>&#39;black&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_qubit_size</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Size for the data qubit circles (if shown).</p>
              </div>
            </td>
            <td>
                  <code>5.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_qubit_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color used to highlight qubits in <code>highlight_qubits</code>.</p>
              </div>
            </td>
            <td>
                  <code>&#39;orange&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_qubit_color2</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color used to highlight qubits in <code>highlight_qubits2</code>.</p>
              </div>
            </td>
            <td>
                  <code>&#39;purple&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_qubit_marker</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The marker used to highlight qubits in <code>highlight_qubits</code>.</p>
              </div>
            </td>
            <td>
                  <code>&#39;^&#39; (triangle)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_qubit_marker2</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The marker used to highlight qubits in <code>highlight_qubits2</code>.</p>
              </div>
            </td>
            <td>
                  <code>&#39;s&#39; (square)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlight_face_lightness</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Controls the lightness of the highlighted faces.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="matplotlib.axes.Axes">Axes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The axis containing the drawn lattice visualization.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="k">def</span><span class="w"> </span><span class="nf">draw_lattice</span><span class="p">(</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>    <span class="n">ax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>    <span class="n">show_axes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>    <span class="n">highlight_qubits</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>        <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>    <span class="n">highlight_qubits2</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>        <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>    <span class="n">highlight_faces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>        <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">:</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">    Draws the color code lattice.</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="sd">    ax : matplotlib.axes.Axes, optional</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">        The axis on which to draw the graph. If None, a new figure and</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">        axis will be created.</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">    show_axes : bool, default False</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="sd">        Whether to show the x- and y-axis.</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">    highlight_qubits : list[int] | list[tuple] | list[str] | np.ndarray, optional</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a><span class="sd">        Data qubits to highlight with orange triangles (by default).</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a><span class="sd">        Can be a list of data qubit indices (ordered by code.vs.select(pauli=None)),</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="sd">        a list of coordinate tuples [(x, y), ...], or a list of qubit names [&#39;x-y&#39;, ...].</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">    highlight_qubits2 : list[int] | list[tuple] | list[str] | np.ndarray, optional</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="sd">        Data qubits to highlight with purple rectangles (by default).</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="sd">        Format is the same as highlight_qubits.</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a><span class="sd">    highlight_faces : list[int] | list[tuple] | list[str] | np.ndarray, optional</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a><span class="sd">        Z ancillary qubits whose corresponding faces should be highlighted.</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a><span class="sd">        Can be a list of Z ancillary qubit indices (ordered by code.vs.select(pauli=&quot;Z&quot;)),</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a><span class="sd">        a list of coordinate tuples [(x, y), ...], or a list of qubit names [&#39;x-y&#39;, ...].</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a><span class="sd">        Note that for names, the actual stored name includes a &#39;-Z&#39; suffix.</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a><span class="sd">    edge_color : str, default &#39;black&#39;</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a><span class="sd">        Colors for edges.</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a><span class="sd">    edge_linewidth : float, default 1.0</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a><span class="sd">        Linewidth for edges.</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a><span class="sd">    face_lightness : float, default 0.3</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a><span class="sd">        Controls the lightness of face colors. Lower values make colors lighter.</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="sd">    show_data_qubits : bool, default True</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="sd">        Whether to draw circles representing data qubits.</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="sd">    data_qubit_color : str, default &#39;black&#39;</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a><span class="sd">        Color for the data qubit circles (if shown).</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a><span class="sd">    data_qubit_size : float, default 5.0</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a><span class="sd">        Size for the data qubit circles (if shown).</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="sd">    highlight_qubit_color : str, default &#39;orange&#39;</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a><span class="sd">        The color used to highlight qubits in `highlight_qubits`.</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a><span class="sd">    highlight_qubit_color2 : str, default &#39;purple&#39;</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a><span class="sd">        The color used to highlight qubits in `highlight_qubits2`.</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a><span class="sd">    highlight_qubit_marker : str, default &#39;^&#39; (triangle)</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a><span class="sd">        The marker used to highlight qubits in `highlight_qubits`.</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="sd">    highlight_qubit_marker2 : str, default &#39;s&#39; (square)</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="sd">        The marker used to highlight qubits in `highlight_qubits2`.</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">    highlight_face_lightness : float, default 1.0</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="sd">        Controls the lightness of the highlighted faces.</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">    -------</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">    matplotlib.axes.Axes</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">        The axis containing the drawn lattice visualization.</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>    <span class="k">return</span> <span class="n">draw_lattice</span><span class="p">(</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>        <span class="n">show_axes</span><span class="o">=</span><span class="n">show_axes</span><span class="p">,</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>        <span class="n">highlight_qubits</span><span class="o">=</span><span class="n">highlight_qubits</span><span class="p">,</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>        <span class="n">highlight_qubits2</span><span class="o">=</span><span class="n">highlight_qubits2</span><span class="p">,</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>        <span class="n">highlight_faces</span><span class="o">=</span><span class="n">highlight_faces</span><span class="p">,</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.draw_tanner_graph" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">draw_tanner_graph</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show_lattice</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pauli</span><span class="o">=</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Draw the tanner graph of the code.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ax</code>
            </td>
            <td>
                  <code><span title="matplotlib.axes.Axes">Axes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The axis on which to draw the graph. If None, a new figure and axis will be created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_axes</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to show the x- and y-axis.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_lattice</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to show the lattice edges in addition to the tanner graph edges.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pauli</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;Z&#39;, &#39;X&#39;, &#39;both&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pauli type of ancillary qubits to include in the graph.</p>
              </div>
            </td>
            <td>
                  <code>&#39;X&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to igraph.plot.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="matplotlib.axes.Axes">Axes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The axis containing the drawn graph.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-699" name="__codelineno-0-699"></a><span class="k">def</span><span class="w"> </span><span class="nf">draw_tanner_graph</span><span class="p">(</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>    <span class="n">ax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>    <span class="n">show_axes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>    <span class="n">show_lattice</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>    <span class="n">pauli</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">:</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">    Draw the tanner graph of the code.</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="sd">    ax : matplotlib.axes.Axes, optional</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">        The axis on which to draw the graph. If None, a new figure and axis will be created.</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="sd">    show_axes : bool, default False</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">        Whether to show the x- and y-axis.</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">    show_lattice : bool, default False</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">        Whether to show the lattice edges in addition to the tanner graph edges.</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">    pauli: Literal[&quot;Z&quot;, &quot;X&quot;, &quot;both&quot;], default &quot;X&quot;</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">        Pauli type of ancillary qubits to include in the graph.</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a><span class="sd">    **kwargs : dict</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">        Additional keyword arguments to pass to igraph.plot.</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">    -------</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="sd">    matplotlib.axes.Axes</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">        The axis containing the drawn graph.</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>    <span class="k">return</span> <span class="n">draw_tanner_graph</span><span class="p">(</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>        <span class="n">show_axes</span><span class="o">=</span><span class="n">show_axes</span><span class="p">,</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>        <span class="n">show_lattice</span><span class="o">=</span><span class="n">show_lattice</span><span class="p">,</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>        <span class="n">pauli</span><span class="o">=</span><span class="n">pauli</span><span class="p">,</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.errors_to_qubits" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">errors_to_qubits</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert errors (generated by <code>sample_with_errors</code>) or error predictions
(generated by decoders) into the corresponding data qubit indices.</p>
<p>Available only for <code>tri</code> and <code>rec</code> circuit types with <code>rounds=1</code> under
bit-flip noise (i.e., probabilities besides <code>p_bitflip</code> are 0).</p>
<p>Note: Errors and error predictions from <code>sample_with_errors</code> or decoders
follow the ordering of error mechanisms in the circuit's detector error model
(<code>circuit.detector_error_model()</code>). This function is necessary because this
ordering differs from the data qubit ordering in the tanner graph
(<code>tanner_graph.vs.select(pauli=None)</code>). This conversion is especially helpful
when visualizing errors or error predictions on the lattice.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>errors</code>
            </td>
            <td>
                  <code>2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Errors following the ordering of error mechanisms in the DEM of the circuit
<code>circuit.detector_error_model()</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>errors_qubits</code></td>            <td>
                  <code>2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Errors following the ordering of data qubits in the tanner graph
<code>tanner_graph.vs.select(pauli=None)</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-759" name="__codelineno-0-759"></a><span class="k">def</span><span class="w"> </span><span class="nf">errors_to_qubits</span><span class="p">(</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>    <span class="n">errors</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="sd">    Convert errors (generated by `sample_with_errors`) or error predictions</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">    (generated by decoders) into the corresponding data qubit indices.</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="sd">    Available only for `tri` and `rec` circuit types with `rounds=1` under</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a><span class="sd">    bit-flip noise (i.e., probabilities besides `p_bitflip` are 0).</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">    Note: Errors and error predictions from `sample_with_errors` or decoders</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="sd">    follow the ordering of error mechanisms in the circuit&#39;s detector error model</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="sd">    (`circuit.detector_error_model()`). This function is necessary because this</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">    ordering differs from the data qubit ordering in the tanner graph</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a><span class="sd">    (`tanner_graph.vs.select(pauli=None)`). This conversion is especially helpful</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a><span class="sd">    when visualizing errors or error predictions on the lattice.</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a><span class="sd">    errors : 2D numpy array of bool</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="sd">        Errors following the ordering of error mechanisms in the DEM of the circuit</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a><span class="sd">        `circuit.detector_error_model()`.</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="sd">    -------</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">    errors_qubits : 2D numpy array of bool</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="sd">        Errors following the ordering of data qubits in the tanner graph</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">        `tanner_graph.vs.select(pauli=None)`.</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;tri&quot;</span><span class="p">,</span> <span class="s2">&quot;rec&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>            <span class="sa">f</span><span class="s1">&#39;errors_to_qubits is not available for &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">circuit_type</span><span class="si">}</span><span class="s1">&quot; circuit type.&#39;</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>        <span class="p">)</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rounds</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>            <span class="s2">&quot;errors_to_qubits is only available when rounds = 1.&quot;</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>        <span class="p">)</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">prob</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">prob</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">noise_model</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;bitflip&quot;</span><span class="p">):</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>            <span class="s2">&quot;errors_to_qubits is only available under bit-flip noise &quot;</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>            <span class="s2">&quot;(only p_bitflip is nonzero).&quot;</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span class="p">)</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>    <span class="c1"># set of ancillary qubits - data qubit mapping</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>    <span class="n">anc_qids_to_data_qubit_idx</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>    <span class="n">data_qubits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tanner_graph</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pauli</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>    <span class="k">for</span> <span class="n">i_dq</span><span class="p">,</span> <span class="n">data_qubit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_qubits</span><span class="p">):</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>        <span class="n">data_qubit</span><span class="p">:</span> <span class="n">ig</span><span class="o">.</span><span class="n">Vertex</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>        <span class="n">connected_anc_qubits</span> <span class="o">=</span> <span class="n">data_qubit</span><span class="o">.</span><span class="n">neighbors</span><span class="p">()</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>        <span class="n">connected_anc_qubits</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>            <span class="n">q</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">connected_anc_qubits</span> <span class="k">if</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;pauli&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Z&quot;</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>        <span class="p">]</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>        <span class="n">key</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">connected_anc_qubits</span><span class="p">)</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>        <span class="k">assert</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">anc_qids_to_data_qubit_idx</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>        <span class="n">anc_qids_to_data_qubit_idx</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_dq</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>    <span class="c1"># data qubit mapping - error mechanism in DEM</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>    <span class="n">dem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">detector_error_model</span><span class="p">()</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>    <span class="n">data_qubit_idx_to_em</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_qubits</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;int32&quot;</span><span class="p">)</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>    <span class="k">for</span> <span class="n">i_em</span><span class="p">,</span> <span class="n">em</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dem</span><span class="p">):</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>        <span class="k">if</span> <span class="n">em</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>            <span class="n">det_ids</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>                <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">target</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>                <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">em</span><span class="o">.</span><span class="n">targets_copy</span><span class="p">()</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>                <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">is_relative_detector_id</span><span class="p">()</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>            <span class="p">]</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>            <span class="n">anc_qids</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get_detector</span><span class="p">(</span><span class="n">det_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>                <span class="k">for</span> <span class="n">det_id</span> <span class="ow">in</span> <span class="n">det_ids</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>                <span class="k">if</span> <span class="n">det_id</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detectors_checks_map</span><span class="p">)</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a>            <span class="p">]</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>            <span class="n">anc_qids</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">anc_qids</span><span class="p">)</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>            <span class="n">data_qubit_idx</span> <span class="o">=</span> <span class="n">anc_qids_to_data_qubit_idx</span><span class="p">[</span><span class="n">anc_qids</span><span class="p">]</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>            <span class="k">if</span> <span class="n">data_qubit_idx_to_em</span><span class="p">[</span><span class="n">data_qubit_idx</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>                    <span class="sa">f</span><span class="s2">&quot;Data qubit </span><span class="si">{</span><span class="n">data_qubit_idx</span><span class="si">}</span><span class="s2"> is mapped to multiple error mechanisms: </span><span class="si">{</span><span class="n">data_qubit_idx_to_em</span><span class="p">[</span><span class="n">data_qubit_idx</span><span class="p">]</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">i_em</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>                <span class="p">)</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>            <span class="n">data_qubit_idx_to_em</span><span class="p">[</span><span class="n">data_qubit_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_em</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">data_qubit_idx_to_em</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>    <span class="k">return</span> <span class="n">errors</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">data_qubit_idx_to_em</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.get_decomposed_dems" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_decomposed_dems</span><span class="p">(</span><span class="n">color</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Get decomposed detector error models for a specific color.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>color</code>
            </td>
            <td>
                  <code><span title="color_code_stim.config.COLOR_LABEL">COLOR_LABEL</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Color ('r', 'g', or 'b') for which to get decomposed DEMs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(dem1, dem2) - Stage 1 and stage 2 detector error models</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-606" name="__codelineno-0-606"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_decomposed_dems</span><span class="p">(</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="n">COLOR_LABEL</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">stim</span><span class="o">.</span><span class="n">DetectorErrorModel</span><span class="p">,</span> <span class="n">stim</span><span class="o">.</span><span class="n">DetectorErrorModel</span><span class="p">]:</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="sd">    Get decomposed detector error models for a specific color.</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">    color : COLOR_LABEL</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="sd">        Color (&#39;r&#39;, &#39;g&#39;, or &#39;b&#39;) for which to get decomposed DEMs</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">    -------</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">    tuple</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">        (dem1, dem2) - Stage 1 and stage 2 detector error models</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dem_manager</span><span class="o">.</span><span class="n">get_decomposed_dems</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.get_detector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_detector</span><span class="p">(</span><span class="n">detector_id</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Get the ancillary qubit and round corresponding to a detector from a
given detector ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>detector_id</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detector ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>anc</code></td>            <td>
                  <code><span title="igraph.Vertex">Vertex</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ancillary qubit involved in the detector.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>round</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Round that the detector belongs to.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-737" name="__codelineno-0-737"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_detector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">detector_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">ig</span><span class="o">.</span><span class="n">Vertex</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a><span class="sd">    Get the ancillary qubit and round corresponding to a detector from a</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="sd">    given detector ID.</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="sd">    detector_id : int</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="sd">        Detector ID.</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a><span class="sd">    -------</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="sd">    anc : ig.Vertex</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="sd">        Ancillary qubit involved in the detector.</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a><span class="sd">    round : int</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">        Round that the detector belongs to.</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">detectors_checks_map</span><span class="p">[</span><span class="n">detector_id</span><span class="p">]</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detector ID </span><span class="si">{</span><span class="n">detector_id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.get_detector_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_detector_type</span><span class="p">(</span><span class="n">detector_id</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Get the Pauli and color type of a detector.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>detector_id</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detector ID to query</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pauli</code></td>            <td>
                  <code><span title="color_code_stim.config.PAULI_LABEL">PAULI_LABEL</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pauli type of the detector ('X', 'Y', or 'Z')</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>color</code></td>            <td>
                  <code><span title="color_code_stim.config.COLOR_LABEL">COLOR_LABEL</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Color of the detector ('r', 'g', or 'b')</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_detector_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">detector_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PAULI_LABEL</span><span class="p">,</span> <span class="n">COLOR_LABEL</span><span class="p">]:</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">    Get the Pauli and color type of a detector.</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="sd">    detector_id : int</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a><span class="sd">        Detector ID to query</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a><span class="sd">    -------</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">    pauli : PAULI_LABEL</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="sd">        Pauli type of the detector (&#39;X&#39;, &#39;Y&#39;, or &#39;Z&#39;)</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">    color : COLOR_LABEL</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">        Color of the detector (&#39;r&#39;, &#39;g&#39;, or &#39;b&#39;)</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>    <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">get_detector_coordinates</span><span class="p">(</span><span class="n">only</span><span class="o">=</span><span class="p">[</span><span class="n">detector_id</span><span class="p">])[</span><span class="n">detector_id</span><span class="p">]</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>    <span class="n">pauli</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>    <span class="k">if</span> <span class="n">pauli</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>        <span class="n">pauli</span> <span class="o">=</span> <span class="s2">&quot;X&quot;</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>    <span class="k">elif</span> <span class="n">pauli</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>        <span class="n">pauli</span> <span class="o">=</span> <span class="s2">&quot;Y&quot;</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>    <span class="k">elif</span> <span class="n">pauli</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>        <span class="n">pauli</span> <span class="o">=</span> <span class="s2">&quot;Z&quot;</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid pauli: </span><span class="si">{</span><span class="n">pauli</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>    <span class="n">color</span> <span class="o">=</span> <span class="n">color_val_to_color</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>    <span class="k">return</span> <span class="n">pauli</span><span class="p">,</span> <span class="n">color</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.get_observable_pauli" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_observable_pauli</span><span class="p">(</span><span class="n">observable_id</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Get the Pauli type of an observable.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>observable_id</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Observable ID to query</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="color_code_stim.config.PAULI_LABEL">PAULI_LABEL</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pauli type of the observable</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-590" name="__codelineno-0-590"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_observable_pauli</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observable_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PAULI_LABEL</span><span class="p">:</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">    Get the Pauli type of an observable.</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="sd">    observable_id : int</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="sd">        Observable ID to query</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a><span class="sd">    -------</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="sd">    PAULI_LABEL</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="sd">        Pauli type of the observable</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obs_paulis</span><span class="p">[</span><span class="n">observable_id</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.load" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Load a ColorCode object from a file saved by the <code>save</code> method.</p>
<p>Reconstructs non-picklable attributes excluded during saving using the
modular architecture approach.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path from which to load the object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="color_code_stim.color_code.ColorCode" href="#color_code_stim.ColorCode">ColorCode</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The loaded ColorCode object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1225" name="__codelineno-0-1225"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a><span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ColorCode&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a><span class="sd">    Load a ColorCode object from a file saved by the `save` method.</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><span class="sd">    Reconstructs non-picklable attributes excluded during saving using the</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><span class="sd">    modular architecture approach.</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a><span class="sd">    path : str</span>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><span class="sd">        The file path from which to load the object.</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><span class="sd">    -------</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a><span class="sd">    ColorCode</span>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><span class="sd">        The loaded ColorCode object.</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a>    <span class="c1"># Create a new instance without calling __init__</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a>    <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a>    <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a>    <span class="c1"># Reconstruct non-picklable attributes in the correct order</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a>        <span class="c1"># Step 1: Reconstruct tanner_graph and qubit_groups</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_reconstruct_tanner_graph_and_qubit_groups</span><span class="p">()</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a>        <span class="c1"># Step 2: Clear lazy-loaded object caches (they will be recreated on demand)</span>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_dem_manager</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_bp_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_belief_concat_matching_decoder</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_simulator</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a>        <span class="c1"># Step 3: Initialize cache</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_bp_inputs</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a>
<a id="__codelineno-0-1265" name="__codelineno-0-1265"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1266" name="__codelineno-0-1266"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during reconstruction: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1267" name="__codelineno-0-1267"></a>        <span class="k">raise</span>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a>    <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.sample" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sample</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Sample detector outcomes and observables from the quantum circuit.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>shots</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of samples to generate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Seed value to initialize the random number generator</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>det</code></td>            <td>
                  <code>2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detector outcomes. det[i,j] is True if and only if the detector
with id j in the i-th sample has an outcome of −1.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>obs</code></td>            <td>
                  <code>1D or 2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Observable outcomes. If there is only one observable, returns a 1D array;
otherwise returns a 2D array. obs[i] or obs[i,j] is True if and only if
the j-th observable (j=0 when 1D) of the i-th sample has an outcome of -1.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-974">974</a></span>
<span class="normal"><a href="#__codelineno-0-975">975</a></span>
<span class="normal"><a href="#__codelineno-0-976">976</a></span>
<span class="normal"><a href="#__codelineno-0-977">977</a></span>
<span class="normal"><a href="#__codelineno-0-978">978</a></span>
<span class="normal"><a href="#__codelineno-0-979">979</a></span>
<span class="normal"><a href="#__codelineno-0-980">980</a></span>
<span class="normal"><a href="#__codelineno-0-981">981</a></span>
<span class="normal"><a href="#__codelineno-0-982">982</a></span>
<span class="normal"><a href="#__codelineno-0-983">983</a></span>
<span class="normal"><a href="#__codelineno-0-984">984</a></span>
<span class="normal"><a href="#__codelineno-0-985">985</a></span>
<span class="normal"><a href="#__codelineno-0-986">986</a></span>
<span class="normal"><a href="#__codelineno-0-987">987</a></span>
<span class="normal"><a href="#__codelineno-0-988">988</a></span>
<span class="normal"><a href="#__codelineno-0-989">989</a></span>
<span class="normal"><a href="#__codelineno-0-990">990</a></span>
<span class="normal"><a href="#__codelineno-0-991">991</a></span>
<span class="normal"><a href="#__codelineno-0-992">992</a></span>
<span class="normal"><a href="#__codelineno-0-993">993</a></span>
<span class="normal"><a href="#__codelineno-0-994">994</a></span>
<span class="normal"><a href="#__codelineno-0-995">995</a></span>
<span class="normal"><a href="#__codelineno-0-996">996</a></span>
<span class="normal"><a href="#__codelineno-0-997">997</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-974" name="__codelineno-0-974"></a><span class="k">def</span><span class="w"> </span><span class="nf">sample</span><span class="p">(</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">shots</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a><span class="sd">    Sample detector outcomes and observables from the quantum circuit.</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a><span class="sd">    shots : int</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a><span class="sd">        Number of samples to generate</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a><span class="sd">    seed : int, optional</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a><span class="sd">        Seed value to initialize the random number generator</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a><span class="sd">    -------</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="sd">    det : 2D numpy array of bool</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a><span class="sd">        Detector outcomes. det[i,j] is True if and only if the detector</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a><span class="sd">        with id j in the i-th sample has an outcome of −1.</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a><span class="sd">    obs : 1D or 2D numpy array of bool</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a><span class="sd">        Observable outcomes. If there is only one observable, returns a 1D array;</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a><span class="sd">        otherwise returns a 2D array. obs[i] or obs[i,j] is True if and only if</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a><span class="sd">        the j-th observable (j=0 when 1D) of the i-th sample has an outcome of -1.</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.sample_with_errors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sample_with_errors</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Sample detector outcomes, observables, and errors from the quantum circuit.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>shots</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of samples to generate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Seed value to initialize the random number generator</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>det</code></td>            <td>
                  <code>2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detector outcomes. det[i,j] is True if and only if the detector
with id j in the i-th sample has an outcome of −1.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>obs</code></td>            <td>
                  <code>1D or 2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Observable outcomes. If there is only one observable, returns a 1D array;
otherwise returns a 2D array. obs[i] or obs[i,j] is True if and only if
the j-th observable (j=0 when 1D) of the i-th sample has an outcome of -1.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>errors</code></td>            <td>
                  <code>2D numpy array of bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Errors sampled from the quantum circuit. errors[i,j] is True if and only if
the j-th error (in the DEM) of the i-th sample has an outcome of -1.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-999" name="__codelineno-0-999"></a><span class="k">def</span><span class="w"> </span><span class="nf">sample_with_errors</span><span class="p">(</span>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>    <span class="n">shots</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>    <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a><span class="sd">    Sample detector outcomes, observables, and errors from the quantum circuit.</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><span class="sd">    shots : int</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="sd">        Number of samples to generate</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="sd">    seed : int, optional</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="sd">        Seed value to initialize the random number generator</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="sd">    -------</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><span class="sd">    det : 2D numpy array of bool</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a><span class="sd">        Detector outcomes. det[i,j] is True if and only if the detector</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a><span class="sd">        with id j in the i-th sample has an outcome of −1.</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="sd">    obs : 1D or 2D numpy array of bool</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a><span class="sd">        Observable outcomes. If there is only one observable, returns a 1D array;</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a><span class="sd">        otherwise returns a 2D array. obs[i] or obs[i,j] is True if and only if</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><span class="sd">        the j-th observable (j=0 when 1D) of the i-th sample has an outcome of -1.</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="sd">    errors : 2D numpy array of bool</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><span class="sd">        Errors sampled from the quantum circuit. errors[i,j] is True if and only if</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a><span class="sd">        the j-th error (in the DEM) of the i-th sample has an outcome of -1.</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">sample_with_errors</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.save" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Save the ColorCode object to a file using pickle.</p>
<p>Automatically identifies and excludes non-picklable attributes such as igraph objects,
complex decoder objects, and lazy-loaded managers. These will be reconstructed upon loading.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path where the object should be saved.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1146" name="__codelineno-0-1146"></a><span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1147" name="__codelineno-0-1147"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1148" name="__codelineno-0-1148"></a><span class="sd">    Save the ColorCode object to a file using pickle.</span>
<a id="__codelineno-0-1149" name="__codelineno-0-1149"></a>
<a id="__codelineno-0-1150" name="__codelineno-0-1150"></a><span class="sd">    Automatically identifies and excludes non-picklable attributes such as igraph objects,</span>
<a id="__codelineno-0-1151" name="__codelineno-0-1151"></a><span class="sd">    complex decoder objects, and lazy-loaded managers. These will be reconstructed upon loading.</span>
<a id="__codelineno-0-1152" name="__codelineno-0-1152"></a>
<a id="__codelineno-0-1153" name="__codelineno-0-1153"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-1154" name="__codelineno-0-1154"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-1155" name="__codelineno-0-1155"></a><span class="sd">    path : str</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a><span class="sd">        The file path where the object should be saved.</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a>    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a>    <span class="c1"># Known non-picklable attributes based on modular architecture</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a>    <span class="n">known_non_picklable</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a>        <span class="c1"># igraph objects</span>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a>        <span class="s2">&quot;tanner_graph&quot;</span><span class="p">,</span>  <span class="c1"># igraph.Graph</span>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a>        <span class="s2">&quot;qubit_groups&quot;</span><span class="p">,</span>  <span class="c1"># Dict[str, ig.VertexSeq]</span>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a>        <span class="c1"># Complex manager and decoder objects (lazy-loaded)</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a>        <span class="s2">&quot;_dem_manager&quot;</span><span class="p">,</span>  <span class="c1"># DemManager with igraph references</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>        <span class="s2">&quot;_concat_matching_decoder&quot;</span><span class="p">,</span>  <span class="c1"># ConcatMatchingDecoder</span>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a>        <span class="s2">&quot;_bp_decoder&quot;</span><span class="p">,</span>  <span class="c1"># BPDecoder</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a>        <span class="s2">&quot;_belief_concat_matching_decoder&quot;</span><span class="p">,</span>  <span class="c1"># BeliefConcatMatchingDecoder</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a>        <span class="s2">&quot;_simulator&quot;</span><span class="p">,</span>  <span class="c1"># Simulator</span>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>        <span class="c1"># Cache that should be reconstructed</span>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a>        <span class="s2">&quot;_bp_inputs&quot;</span><span class="p">,</span>  <span class="c1"># Dictionary cache</span>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a>    <span class="p">]</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a>    <span class="c1"># Test remaining attributes for picklability and get dynamic exclusions</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a>    <span class="n">temp_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">known_non_picklable</span><span class="p">}</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a>    <span class="n">_</span><span class="p">,</span> <span class="n">additional_non_picklable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_remaining_attributes</span><span class="p">(</span><span class="n">temp_data</span><span class="p">)</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a>    <span class="c1"># Combine known and discovered non-picklable attributes</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a>    <span class="n">all_excluded</span> <span class="o">=</span> <span class="n">known_non_picklable</span> <span class="o">+</span> <span class="n">additional_non_picklable</span>
<a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>
<a id="__codelineno-0-1182" name="__codelineno-0-1182"></a>    <span class="c1"># Remove non-picklable attributes</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_excluded</span><span class="p">:</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a>            <span class="k">del</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="color_code_stim.ColorCode.simulate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">simulate</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">bp_predecoding</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bp_prms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">confint_method</span><span class="o">=</span><span class="s1">&#39;wilson&#39;</span><span class="p">,</span> <span class="n">full_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Monte-Carlo simulation of the concatenated MWPM decoder. Delegated to simulator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>shots</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of shots to simulate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bp_predecoding</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, use belief propagation for predecoding.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bp_prms</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters for belief propagation predecoding.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>erasure_matcher_predecoding</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, use erasure matcher predecoding to identify errors common to all colors.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>partial_correction_by_predecoding</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, apply partial correction using predecoding results when erasure matcher predecoding fails.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colors</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>[<span title="str">str</span>], <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colors of the sub-decoding procedures to consider. Can be 'all', one of {'r', 'g', 'b'},
or a list containing any combination of {'r', 'g', 'b'}.</p>
              </div>
            </td>
            <td>
                  <code>&#39;all&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>alpha</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Significance level for the confidence interval calculation.</p>
              </div>
            </td>
            <td>
                  <code>0.01</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>confint_method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Method to calculate the confidence interval.
See statsmodels.stats.proportion.proportion_confint for available options.</p>
              </div>
            </td>
            <td>
                  <code>&#39;wilson&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>full_output</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, return additional information.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Seed to initialize the random number generator.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, print progress information during simulation.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the decoder (see <code>ColorCode.decode()</code>).</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>num_fails</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of failures for each observable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>extra_outputs</code></td>            <td>
                  <code>(<span title="dict">dict</span>, <span title="optional">optional</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing additional information:
- 'stats': Tuple of (pfail, delta_pfail) where pfail is the estimated failure rate
  and delta_pfail is the half-width of the confidence interval
- 'fails': Boolean array indicating which samples failed
- 'logical_gaps': Array of logical gaps (only when self.logical_gap is True)
- etc.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/color_code_stim/color_code.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><span class="k">def</span><span class="w"> </span><span class="nf">simulate</span><span class="p">(</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>    <span class="n">shots</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a>    <span class="n">bp_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>    <span class="n">bp_prms</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>    <span class="n">erasure_matcher_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>    <span class="n">partial_correction_by_predecoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>    <span class="n">colors</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>    <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>    <span class="n">confint_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;wilson&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>    <span class="n">full_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>    <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a><span class="sd">    Monte-Carlo simulation of the concatenated MWPM decoder. Delegated to simulator.</span>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a><span class="sd">    shots : int</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a><span class="sd">        Number of shots to simulate.</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a><span class="sd">    bp_predecoding : bool, default False</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a><span class="sd">        If True, use belief propagation for predecoding.</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a><span class="sd">    bp_prms : dict | None, default None</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a><span class="sd">        Parameters for belief propagation predecoding.</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a><span class="sd">    erasure_matcher_predecoding : bool, default False</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a><span class="sd">        If True, use erasure matcher predecoding to identify errors common to all colors.</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a><span class="sd">    partial_correction_by_predecoding : bool, default False</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a><span class="sd">        If True, apply partial correction using predecoding results when erasure matcher predecoding fails.</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a><span class="sd">    colors : Union[List[str], str], default &#39;all&#39;</span>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a><span class="sd">        Colors of the sub-decoding procedures to consider. Can be &#39;all&#39;, one of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;},</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><span class="sd">        or a list containing any combination of {&#39;r&#39;, &#39;g&#39;, &#39;b&#39;}.</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a><span class="sd">    alpha : float, default 0.01</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a><span class="sd">        Significance level for the confidence interval calculation.</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a><span class="sd">    confint_method : str, default &#39;wilson&#39;</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a><span class="sd">        Method to calculate the confidence interval.</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a><span class="sd">        See statsmodels.stats.proportion.proportion_confint for available options.</span>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a><span class="sd">    full_output: bool = False,</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a><span class="sd">        If True, return additional information.</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a><span class="sd">    seed : Optional[int], default None</span>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><span class="sd">        Seed to initialize the random number generator.</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a><span class="sd">    verbose : bool, default False</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a><span class="sd">        If True, print progress information during simulation.</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a><span class="sd">    **kwargs :</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a><span class="sd">        Additional keyword arguments for the decoder (see `ColorCode.decode()`).</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a><span class="sd">    -------</span>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><span class="sd">    num_fails : numpy.ndarray</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a><span class="sd">        Number of failures for each observable.</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><span class="sd">    extra_outputs : dict, optional</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a><span class="sd">        Dictionary containing additional information:</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><span class="sd">        - &#39;stats&#39;: Tuple of (pfail, delta_pfail) where pfail is the estimated failure rate</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><span class="sd">          and delta_pfail is the half-width of the confidence interval</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a><span class="sd">        - &#39;fails&#39;: Boolean array indicating which samples failed</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><span class="sd">        - &#39;logical_gaps&#39;: Array of logical gaps (only when self.logical_gap is True)</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><span class="sd">        - etc.</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>    <span class="c1"># Create decoder function for simulator</span>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">decoder_func</span><span class="p">(</span><span class="n">detector_outcomes</span><span class="p">,</span> <span class="o">**</span><span class="n">decode_kwargs</span><span class="p">):</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a>            <span class="n">detector_outcomes</span><span class="p">,</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a>            <span class="n">bp_predecoding</span><span class="o">=</span><span class="n">bp_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a>            <span class="n">bp_prms</span><span class="o">=</span><span class="n">bp_prms</span><span class="p">,</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a>            <span class="n">erasure_matcher_predecoding</span><span class="o">=</span><span class="n">erasure_matcher_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a>            <span class="n">partial_correction_by_predecoding</span><span class="o">=</span><span class="n">partial_correction_by_predecoding</span><span class="p">,</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>  <span class="c1"># Original kwargs from simulate</span>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a>            <span class="o">**</span><span class="n">decode_kwargs</span><span class="p">,</span>  <span class="c1"># Additional kwargs from simulator</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a>        <span class="p">)</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a>    <span class="c1"># Delegate to simulator</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a>    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span>
<a id="__codelineno-0-1104" name="__codelineno-0-1104"></a>        <span class="n">shots</span><span class="o">=</span><span class="n">shots</span><span class="p">,</span>
<a id="__codelineno-0-1105" name="__codelineno-0-1105"></a>        <span class="n">decoder_func</span><span class="o">=</span><span class="n">decoder_func</span><span class="p">,</span>
<a id="__codelineno-0-1106" name="__codelineno-0-1106"></a>        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
<a id="__codelineno-0-1107" name="__codelineno-0-1107"></a>        <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span>
<a id="__codelineno-0-1108" name="__codelineno-0-1108"></a>        <span class="n">confint_method</span><span class="o">=</span><span class="n">confint_method</span><span class="p">,</span>
<a id="__codelineno-0-1109" name="__codelineno-0-1109"></a>        <span class="n">full_output</span><span class="o">=</span><span class="n">full_output</span><span class="p">,</span>
<a id="__codelineno-0-1110" name="__codelineno-0-1110"></a>        <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
<a id="__codelineno-0-1111" name="__codelineno-0-1111"></a>        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-1112" name="__codelineno-0-1112"></a>    <span class="p">)</span>
<a id="__codelineno-0-1113" name="__codelineno-0-1113"></a>
<a id="__codelineno-0-1114" name="__codelineno-0-1114"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>